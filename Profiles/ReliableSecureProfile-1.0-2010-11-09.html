
<!-- saved from url=(0105)http://mp.ws-i.org/apps/org/workgroup/rspwg/download.php/6011/latest/ReliableSecureProfile-1.0-Final.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="generator" content="HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org">
<title>Reliable Secure Profile - Version 1.0 (Final)</title>

<style type="text/css">
/*<![CDATA[*/
                     body { color: black; background: white; font-family: sans-serif; margin: 16pt 24pt; }
                     dt { font-style: italic; padding-top: 0.5em; }
                     h4 { font-weight: normal; font-style: italic; font-size: 0.8em; margin-bottom: 0; }
                     .refinement { margin: 18pt 0em; }
                    .assertion-id { background-color: #faa; font-style: normal; padding: 0em 0.3em; }
                    .tanalysis-id { background-color: #faa; font-style: normal; padding: 0em 0.3em; }
                    .taglossary-id { background-color: #ccf; font-style: normal; padding: 0em 0.3em; }
                    .tbrnotes-id { background-color: #ccf; font-style: normal; padding: 0em 0.3em; }
                    .statement { font-style: italic; margin: 0.5em 5.5em; text-indent: -4em; }
                    .statement-id { background-color: #ffa; font-style: normal; padding: 0em 0.3em; }
                                        .statement-target { font-weight: bold; font-style: normal;  }
                    .statement-type { background-color: #ccf; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .compat-type { background-color: #cff; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .testable-type { background-color: #cfc; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .claim-type { background-color: pink; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .testref-type { font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .relnotesref-type { background-color: #cff; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .glossaryref-type { background-color: #cff; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .statement-origin { background-color: #fcc; font-style: normal; padding: 0em 0.3em; font-size: 0.7em; vertical-align: text-top; }
                    .assertion { background-color: #eee; }
                    .tanalysis { background-color: #ffa; }
                    .taglossary { background-color: #ccf; }
                    .tablernotes { background-color: #ffa; }
                    .rationale { margin: 0.5em 0em;  }
                    .explanation { margin: 0.5em 0em; }
                    .definition { margin: 0.5em 5.5em;}
                    .explanation p, .rationale p { margin: 0.25em 0; }
                    .practice { background-color: green; }
                    .example { background-color: #eee; margin: 0.5em 2em; padding: 0.5em; }
                    .example-banner { margin: 0; }
                    .example pre { margin: 0; }
                    .correct, .incorrect { font-family: sans-serif; font-weight: bold; font-size: 0.9em; margin: 0; }
                    .correct { color: #090; }
                    .incorrect { color: #900; }
                    .specification { padding: 0.5em; background-color: #ffa; margin: 0.5em 2em; }
                    .ednote { margin: 1.2em; padding: 1.2em; background-color: #fcc; }
                    .note { background-color: #fcc; margin-left: 1.5em; }
                    .toc { margin-left: 2em; }
                    .subtoc { margin-left: 3em; }
                    .subsubtoc { margin-left: 4em; }
                    .chg { background-color: orange; text-decoration: underline; }
                    .add { background-color: green; text-decoration: underline; }
                    .del { background-color: red; text-decoration: line-through; }
                    @media print {
                        a.offsite:after { content: " [" attr(href) "] "; font-size: 85%; font-weight: lighter; }
                    }
                    [id]:hover:after { content: " #" attr(id) " "; font-size: 50%; color: #ccc; text-decoration: none; }
/*]]>*/
</style>

<script type="text/javascript">
//<![CDATA[
                function toggle(s) {
  var id = s.href.match(/#(\w.+)/)[1];
  var el = document.getElementById(id);
  if (el.style.display == 'block')
    el.style.display = 'none';
  else
    el.style.display = 'block';
}
//]]>
</script>
</head>
<body>
<div class="head">
<p><a href="http://www.ws-i.org/"><img alt="WS-I" border="0" width="107" height="88" src="http://www.ws-i.org/images/WS-I-logo.gif" /></a></p>
<h1>Reliable Secure Profile Version 1.0</h1>
<h2>Final Material</h2>
<h2>2010-11-09</h2>
<dl>
<dt>This version:</dt>
<dd><a href="http://www.ws-i.org/Profiles/ReliableSecureProfile-1.0-2010-11-09.html">
http://www.ws-i.org/Profiles/ReliableSecureProfile-1.0-2010-11-09.html</a></dd>
<dt>Latest version:</dt>
<dd><a href="http://www.ws-i.org/Profiles/ReliableSecureProfile-1.0-2010-11-09.html">http://www.ws-i.org/Profiles/ReliableSecureProfile-1.0-2010-11-09.html</a></dd>
<dt>Errata for this Version:</dt>
<dd><a href="http://www.ws-i.org/Profiles/ReliableSecureProfile-1.0-errata-2010-11-09.html">
http://www.ws-i.org/Profiles/ReliableSecureProfile-1.0-errata-2010-11-09.html</a></dd>
<dt>Editors:</dt>
<dd>Jacques Durand, Fujitsu</dd>
<dd>Gilbert Pilz, Oracle</dd>
<dt>Administrative contact:</dt>
<dd><a href="mailto:secretary@ws-i.org">secretary@ws-i.org</a></dd>
</dl>
<p id="copyright" class="copyright">Copyright &#169; 2002-2010 by
<a href="http://www.ws-i.org/">The Web Services-Interoperability
Organization</a> (<abbr title="Web Services Interoperability Organization">WS-I</abbr>) and
Certain of its Members. All Rights Reserved.</p>
</div>
<hr />
<h2 id="abstract">Abstract</h2>
<p>This document defines the WS-I Reliable Secure Profile 1.0,
consisting of a set of non-proprietary Web services specifications,
along with clarifications, refinements, interpretations and
amplifications of those specifications which promote
interoperability. It also contains a set of executable test
assertions for assessing the conformance to the profile.</p>
<h2 id="status">Status of this Document</h2>
<p>This is a final specification. Please refer to the <a href="">errata</a>, which may include normative corrections to it.</p>
<h2 id="license">Notice</h2>
<p>The material contained herein is not a license, either expressly
or impliedly, to any intellectual property owned or controlled by
any of the authors or developers of this material or WS-I. The
material contained herein is provided on an "AS IS" basis and to
the maximum extent permitted by applicable law, this material is
provided AS IS AND WITH ALL FAULTS, and the authors and developers
of this material and WS-I hereby disclaim all other warranties and
conditions, either express, implied or statutory, including, but
not limited to, any (if any) implied warranties, duties or
conditions of merchantability, of fitness for a particular purpose,
of accuracy or completeness of responses, of results, of
workmanlike effort, of lack of viruses, and of lack of negligence.
ALSO, THERE IS NO WARRANTY OR CONDITION OF TITLE, QUIET ENJOYMENT,
QUIET POSSESSION, CORRESPONDENCE TO DESCRIPTION OR NON-INFRINGEMENT
WITH REGARD TO THIS MATERIAL.</p>
<p>IN NO EVENT WILL ANY AUTHOR OR DEVELOPER OF THIS MATERIAL OR
WS-I BE LIABLE TO ANY OTHER PARTY FOR THE COST OF PROCURING
SUBSTITUTE GOODS OR SERVICES, LOST PROFITS, LOSS OF USE, LOSS OF
DATA, OR ANY INCIDENTAL, CONSEQUENTIAL, DIRECT, INDIRECT, OR
SPECIAL DAMAGES WHETHER UNDER CONTRACT, TORT, WARRANTY, OR
OTHERWISE, ARISING IN ANY WAY OUT OF THIS OR ANY OTHER AGREEMENT
RELATING TO THIS MATERIAL, WHETHER OR NOT SUCH PARTY HAD ADVANCE
NOTICE OF THE POSSIBILITY OF SUCH DAMAGES.</p>
<h2 id="feedback">Feedback</h2>
<p>If there are areas in this specification that could be clearer,
or if errors or omissions are identified, WS-I would like to be
notified in order to provide the best possible interoperability
guidance.</p>
<p>By sending email, or otherwise communicating with WS-I, you (on
behalf of yourself if you are an individual, and your company if
you are providing Feedback on behalf of the company) will be deemed
to have granted to WS-I, the members of WS-I, and other parties
that have access to your Feedback, a non-exclusive,
non-transferable, worldwide, perpetual, irrevocable, royalty-free
license to use, disclose, copy, license, modify, sublicense or
otherwise distribute and exploit in any manner whatsoever the
Feedback you provide regarding the work. You acknowledge that you
have no expectation of confidentiality with respect to any Feedback
you provide. You represent and warrant that you have rights to
provide this Feedback, and if you are providing Feedback on behalf
of a company, you represent and warrant that you have the rights to
provide Feedback on behalf of your company. You also acknowledge
that WS-I is not required to review, discuss, use, consider or in
any way incorporate your Feedback into future versions of its work.
If WS-I does incorporate some or all of your Feedback in a future
version of the work, it may, but is not obligated to include your
name (or, if you are identified as acting on behalf of your
company, the name of your company) on a list of contributors to the
work. If the foregoing is not acceptable to you and any company on
whose behalf you are acting, please do not provide any
Feedback.</p>
<p>Feedback on this document should be directed to <a href="mailto:wsi_rsp_comment@mp.ws-i.org">wsi_rsp_comment@mp.ws-i.org</a>.</p>
<hr />
<h2 id="toc">Table of Contents</h2>
<p class="toc">1. <a href="#introduction">Introduction</a><br />
<span class="subtoc">1.1. <a href="#relationships">Relationships to
Other Profiles</a></span><br />
<span class="subtoc">1.2. <a href="#philosophy">Guiding
Principles</a></span><br />
<span class="subtoc">1.3. <a href="#tassertions">Test
Assertions</a></span><br />
<span class="subtoc">1.4. <a href="#conventions">Notational
Conventions</a></span><br />
<span class="subtoc">1.5. <a href="#versioning">Profile
Identification and Versioning</a></span><br />
2. <a href="#conformance">Profile Conformance</a><br />
<span class="subtoc">2.1. <a href="#conformance_requirements">Conformance
Requirements</a></span><br />
<span class="subtoc">2.2. <a href="#conformance_targets">Conformance Targets</a></span><br />
<span class="subtoc">2.3. <a href="#conformance_scope">Conformance
Scope</a></span><br />
<span class="subtoc">2.4. <a href="#conformance_claims">Claiming
Conformance</a></span><br />
3. <a href="#reliablemessaging">Reliable Messaging</a><br />
<span class="subtoc">3.1. <a href="#ws-rm-support">WS-ReliableMessaging Support</a></span><br />
<span class="subsubtoc">3.1.1. <a href="#Requiring_WS-ReliableMessaging">Requiring
WS-ReliableMessaging</a></span><br />
<span class="subtoc">3.2. <a href="#extensibility_points">Use of
Extension Elements and Attributes in Messages</a></span><br />
<span class="subsubtoc">3.2.1. <a href="#Ignore_Unknown_Extension_Elements">Ignore Unknown Extension
Elements</a></span><br />
<span class="subtoc">3.3. <a href="#SOAPVersion">SOAP Version
Considerations</a></span><br />
<span class="subsubtoc">3.3.1. <a href="#SOAP_Version_Selection_for_Sequence_Lifecycle_Messages">SOAP
Version Selection for Sequence Lifecycle Messages</a></span><br />
<span class="subtoc">3.4. <a href="#targetCreateSequence">Targeting
Sequence Lifecycle Messages</a></span><br />
<span class="subsubtoc">3.4.1. <a href="#CreateSequence_Target">CreateSequence Target</a></span><br />
<span class="subsubtoc">3.4.2. <a href="#Use_of_the_Offer_Element">Use of the Offer
Element</a></span><br />
<span class="subtoc">3.5. <a href="#sequence_IDs">Sequence
Identifiers</a></span><br />
<span class="subsubtoc">3.5.1. <a href="#Duplicate_Identifier_in_CreateSequenceResponse">Duplicate
Identifier in CreateSequenceResponse</a></span><br />
<span class="subtoc">3.6. <a href="#termination">Sequence
Termination</a></span><br />
<span class="subsubtoc">3.6.1. <a href="#Sequence_Termination_from_the_Destination">Sequence Termination
from the Destination</a></span><br />
<span class="subsubtoc">3.6.2. <a href="#Last_Message_Number">Last
Message Number</a></span><br />
<span class="subsubtoc">3.6.3. <a href="#Sequence_Lifecycle_Independence">Sequence Lifecycle
Independence</a></span><br />
<span class="subtoc">3.7. <a href="#xmit_seq_faults">Sequence
Faults</a></span><br />
<span class="subsubtoc">3.7.1. <a href="#WS-ReliableMessaging_Faults">WS-ReliableMessaging
Faults</a></span><br />
<span class="subtoc">3.8. <a href="#sequence_assignment">Sequence
Assignment</a></span><br />
<span class="subsubtoc">3.8.1. <a href="#Reliable_Response_Messages">Reliable Response
Messages</a></span><br />
<span class="subsubtoc">3.8.2. <a href="#Scope_of_an_RM_Node">Scope
of an RM Node</a></span><br />
<span class="subtoc">3.9. <a href="#retransmission">Retransmission
of Messages</a></span><br />
<span class="subsubtoc">3.9.1. <a href="#Retransmission_of_Unacknowledged_Messages">Retransmission of
Unacknowledged Messages</a></span><br />
<span class="subsubtoc">3.9.2. <a href="#Retransmission_of_Sequence_Lifecycle_Messages">Retransmission of
Sequence Lifecycle Messages</a></span><br />
<span class="subsubtoc">3.9.3. <a href="#Message_Identity">Message
Identity</a></span><br />
<span class="subtoc">3.10. <a href="#piggyback_acks">Piggybacking</a></span><br />
<span class="subsubtoc">3.10.1. <a href="#Endpoint_Comparison_for_Piggybacked_SequenceAcknowledgment_Headers">
Endpoint Comparison for Piggybacked SequenceAcknowledgment
Headers</a></span><br />
<span class="subsubtoc">3.10.2. <a href="#Treatment_of_ReferenceParameters_in_AcksTo_EPRs">Treatment of
ReferenceParameters in AcksTo EPRs</a></span><br />
<span class="subsubtoc">3.10.3. <a href="#Preventing_Piggybacked_Acknowledgements">Preventing Piggybacked
Acknowledgements</a></span><br />
<span class="subsubtoc">3.10.4. <a href="#Conflicting_Requirements_for_wsa_Action">Conflicting Requirements
for wsa:Action</a></span><br />
<span class="subsubtoc">3.10.5. <a href="#Use_of_the_mustUnderstand_Attribute">Use of the mustUnderstand
Attribute</a></span><br />
4. <a href="#wssc">Secure Conversation</a><br />
<span class="subtoc">4.1. <a href="#ws-sc-support">WS-SecureConversation Support</a></span><br />
<span class="subsubtoc">4.1.1. <a href="#Requiring_WS-SecureConversation">Requiring
WS-SecureConversation</a></span><br />
<span class="subtoc">4.2. <a href="#ws-sc-optionality">Optionality
of Operations</a></span><br />
<span class="subsubtoc">4.2.1. <a href="#Support_for_Amending_Contexts">Support for Amending
Contexts</a></span><br />
<span class="subsubtoc">4.2.2. <a href="#Support_for_Renewing_Contexts">Support for Renewing
Contexts</a></span><br />
<span class="subsubtoc">4.2.3. <a href="#Support_for_Canceling_Contexts">Support for Canceling
Contexts</a></span><br />
<span class="subtoc">4.3. <a href="#unsupported_tokens">Unsupported
Context Tokens</a></span><br />
<span class="subsubtoc">4.3.1. <a href="#Unrecognized_Extensions_in_a_Security_Context_Token">Unrecognized
Extensions in a Security Context Token</a></span><br />
<span class="subtoc">4.4. <a href="#proof_of_possession">Demonstrating Proof of
Possession</a></span><br />
<span class="subsubtoc">4.4.1. <a href="#Amending_Contexts">Amending Contexts</a></span><br />
<span class="subsubtoc">4.4.2. <a href="#Renewing_Contexts">Renewing Contexts</a></span><br />
<span class="subsubtoc">4.4.3. <a href="#Cancelling_Contexts">Cancelling Contexts</a></span><br />
<span class="subtoc">4.5. <a href="#claims_reauthentication">Claims
Re-Authentication</a></span><br />
<span class="subsubtoc">4.5.1. <a href="#Re-Authenticating_Claims">Re-Authenticating
Claims</a></span><br />
<span class="subtoc">4.6. <a href="#ref_sct">Referencing Security
Context Tokens</a></span><br />
<span class="subsubtoc">4.6.1. <a href="#Associating_a_Security_Context">Associating a Security
Context</a></span><br />
<span class="subsubtoc">4.6.2. <a href="#Derived_Token_References_to_Security_Contexts">Derived Token
References to Security Contexts</a></span><br />
<span class="subtoc">4.7. <a href="#wsa_headers">Addressing
Headers</a></span><br />
<span class="subsubtoc">4.7.1. <a href="#Protecting_Addressing_Headers">Protecting Addressing
Headers</a></span><br />
5. <a href="#makeconnection">MakeConnection</a><br />
<span class="subtoc">5.1. <a href="#ws-mc-support">WS-MakeConnection Support</a></span><br />
<span class="subsubtoc">5.1.1. <a href="#Requiring_WS-MakeConnection">Requiring
WS-MakeConnection</a></span><br />
<span class="subsubtoc">5.1.2. <a href="#Honoring_EPRs_with_the_MakeConnection_Anonymous_URI">Honoring
EPRs with the MakeConnection Anonymous URI</a></span><br />
<span class="subtoc">5.2. <a href="#guidance_makeconnection">Guidance On the Use of
MakeConnection</a></span><br />
<span class="subsubtoc">5.2.1. <a href="#Action_Values">Action
Values</a></span><br />
<span class="subsubtoc">5.2.2. <a href="#Binding_to_HTTP">Binding
to HTTP</a></span><br />
<span class="subsubtoc">5.2.3. <a href="#Transmission_of_MakeConnection_Faults">Transmission of
MakeConnection Faults</a></span><br />
<span class="subtoc">5.3. <a href="#makeconnection_addressing">MakeConnection
Addressing</a></span><br />
<span class="subsubtoc">5.3.1. <a href="#Addressing_Variants">Addressing Variants</a></span><br />
<span class="subsubtoc">5.3.2. <a href="#MakeConnection_Anonymous_URI">MakeConnection Anonymous
URI</a></span><br />
<span class="subtoc">5.4. <a href="#makeconnection_faulting">MakeConnection Fault
Behavior</a></span><br />
<span class="subsubtoc">5.4.1. <a href="#[Detail]_Property_Mapping">[Detail] Property
Mapping</a></span><br />
6. <a href="#sec_reliable_msg">Secure Reliable Messaging</a><br />
<span class="subtoc">6.1. <a href="#secure-sequence-creation">Initiating a Secure
Sequence</a></span><br />
<span class="subsubtoc">6.1.1. <a href="#Secure_Context_Identification">Secure Context
Identification</a></span><br />
<span class="subsubtoc">6.1.2. <a href="#Security_Token_References">Security Token
References</a></span><br />
<span class="subtoc">6.2. <a href="#signature_coverage">Signature
Coverage</a></span><br />
<span class="subsubtoc">6.2.1. <a href="#Single_Signature_for_Sequence_Header_and_SOAP_Body">Single
Signature for Sequence Header and SOAP Body</a></span><br />
<span class="subsubtoc">6.2.2. <a href="#Signed_Elements">Signed
Elements</a></span><br />
<span class="subsubtoc">6.2.3. <a href="#Single_Signature_for_SOAP_1.1_Fault_and_SequenceFault_Header">Single
Signature for SOAP 1.1 Fault and SequenceFault
Header</a></span><br />
<span class="subtoc">6.3. <a href="#sec_mc">Secure Use of
MakeConnection</a></span><br />
<span class="subsubtoc">6.3.1. <a href="#Security_Context_for_MakeConnection">Security Context for
MakeConnection</a></span><br />
<span class="subsubtoc">6.3.2. <a href="#Signing_the_MessagePending_header">Signing the MessagePending
header</a></span><br />
<span class="subtoc">6.4. <a href="#replay">Replay
Detection</a></span><br />
<span class="subsubtoc">6.4.1. <a href="#Unique_Timestamp_Values">Unique Timestamp Values</a></span><br />
Appendix A: <a href="#references">Referenced
Specifications</a><br />
Appendix B: <a href="#points">Extensibility Points</a><br />
Appendix C: <a href="#normative_references">Normative
References</a><br />
Appendix D: <a href="#acks">Acknowledgements</a><br />
Appendix E: <a href="#schm">Schemas</a><br /></p>
<h2 id="introduction">1. Introduction</h2>
<p>This document defines the WS-I Reliable Secure Profile 1.0
(hereafter, "Profile"), consisting of a set of non-proprietary Web
services specifications, along with clarifications, refinements,
interpretations and amplifications of those specifications which
promote interoperability.</p>
<p>Section 1 introduces the Profile, and explains its relationships
to other profiles.</p>
<p>Section 2, "Profile Conformance," explains what it means to be
conformant to the Profile.</p>
<p>Each subsequent section addresses a component of the Profile,
and consists of two parts; an overview detailing the component
specifications and their extensibility points, followed by
subsections that address individual parts of the component
specifications. Note that there is no relationship between the
section numbers in this document and those in the referenced
specifications.</p>
<h3 id="relationships">1.1 Relationships to Other Profiles</h3>
<p>This Profile is intended to be composed with the WS-I Basic
Profile 1.2, WS-I Basic Profile 2.0, WS-I Basic Security Profile
1.0 and WS-I Basic Security Profile 1.1. Composability of RSP with
the previously mentioned profiles offers the following guarantee to
users: conformance of an artifact to RSP does not prevent
conformance of this artifact to these other profiles, and
vice-versa.</p>
<p>Because the conformance targets defined for RSP may not match
exactly the conformance targets for another profile, the following
more precise definition of composability is assumed in this
profile:</p>
<dl>
<dd><em>A profile P2 is said to be composable with a profile P1 if,
for any respective pair of conformance targets (T2, T1) where T1
depends on T2 (see definition below), conformance of an instance of
T2 to P2 does not prevent conformance of the related T1 instance(s)
to P1, and vice-versa in case T2 depends on T1.</em></dd>
</dl>
<p>A target T1 is said to depend on a target T2 if either:</p>
<ul>
<li>T2 and T1 are just different names for the same type of
artifact (e.g. ENVELOPE in RSP and SOAP_ENVELOPE in BSP)</li>
<li>or T2 is a specialization (or particular instance) of T1 (e.g.
SECURE_ENVELOPE in BSP is a specialization of ENVELOPE in RSP)</li>
<li>T2 is contained in T1 (e.g. SECURITY_HEADER in BSP is contained
in ENVELOPE in RSP)</li>
<li>more generally, an instance of T2 will restrict in some way the
possible values - or behaviors - of T1 instances associated with
it.</li>
</ul>
<p>In order to conform to this profile (RSP):</p>
<ul>
<li>If SOAP 1.1 is being used, all requirements defined in BP 1.2
must be complied with.</li>
<li>If SOAP 1.2 is being used, all requirements defined in BP 2.0
must be complied with.</li>
<li>Implementations must conform to the WS-Addressing 1.0 - Core
and SOAP Binding specifications, and if WSDL is used, the
WS-Addressing 1.0 - Metadata specification.</li>
</ul>
<h3 id="philosophy">1.2 Guiding Principles</h3>
<p>The Profile was developed according to a set of principles that,
together, form the philosophy of the Profile, as it relates to
bringing about interoperability. This section documents these
guidelines.</p>
<dl>
<dt>No guarantee of interoperability</dt>
<dd>It is impossible to completely guarantee the interoperability
of a particular service. However, the Profile does address the most
common problems that implementation experience has revealed to
date.</dd>
<dt>Application semantics</dt>
<dd>Although communication of application semantics can be
facilitated by the technologies that comprise the Profile, assuring
the common understanding of those semantics is not addressed by
it.</dd>
<dt>Testability</dt>
<dd>When possible, the Profile makes statements that are testable.
However, such testability is not required. Preferably, testing is
achieved in a non-intrusive manner (e.g., examining artifacts "on
the wire").</dd>
<dt>Strength of requirements</dt>
<dd>The Profile makes strong requirements (e.g., MUST, MUST NOT)
wherever feasible; if there are legitimate cases where such a
requirement cannot be met, conditional requirements (e.g., SHOULD,
SHOULD NOT) are used. Optional and conditional requirements
introduce ambiguity and mismatches between implementations.</dd>
<dt>Restriction vs. relaxation</dt>
<dd>When amplifying the requirements of referenced specifications,
the Profile may restrict them, but does not relax them (e.g.,
change a MUST to a MAY).</dd>
<dt>Multiple mechanisms</dt>
<dd>If a referenced specification allows multiple mechanisms to be
used interchangeably, the Profile selects those that are
well-understood, widely implemented and useful. Extraneous or
underspecified mechanisms and extensions introduce complexity and
therefore reduce interoperability.</dd>
<dt>Future compatibility</dt>
<dd>When possible, the Profile aligns its requirements with
in-progress revisions to the specifications it references. This
aids implementers by enabling a graceful transition, and assures
that WS-I does not 'fork' from these efforts. When the Profile
cannot address an issue in a specification it references, this
information is communicated to the appropriate body to assure its
consideration.</dd>
<dt>Compatibility with deployed services</dt>
<dd>Backwards compatibility with deployed Web services is not a
goal for the Profile, but due consideration is given to it; the
Profile does not introduce a change to the requirements of a
referenced specification unless doing so addresses specific
interoperability issues.</dd>
<dt>Focus on interoperability</dt>
<dd>Although there are potentially a number of inconsistencies and
design flaws in the referenced specifications, the Profile only
addresses those that affect interoperability.</dd>
<dt>Conformance targets</dt>
<dd>Where possible, the Profile places requirements on artifacts
(e.g., WSDL descriptions, SOAP messages) rather than the producing
or consuming software's behaviors or roles. Artifacts are concrete,
making them easier to verify and therefore making conformance
easier to understand and less error-prone.</dd>
<dt>Lower-layer interoperability</dt>
<dd>The Profile speaks to interoperability at the application
layer; it assumes that interoperability of lower-layer protocols
(e.g., TCP, IP, Ethernet) is adequate and well-understood.
Similarly, statements about application-layer substrate protocols
(e.g., SSL/TLS, HTTP) are only made when there is an issue
affecting Web services specifically; WS-I does not attempt to
assure the interoperability of these protocols as a whole. This
assures that WS-I's expertise in and focus on Web services
standards is used effectively.</dd>
</dl>
<h3 id="tassertions">1.3 Test Assertions</h3>
<p>This profile document contains embedded Test Assertions (TA)
that are associated with each normative profile requirement. In the
HTML rendering of this document, these test assertions are
accessible via a toggle link at the end of each requirement. When
clicking on such a link, a table pops up that displays the TA
parts. At the end of this table is another toggle link
("help-glossary") that displays an explanation glossary for the TA
structure. In other formats of this document, the test assertions
are grouped in an appendix not controlled by any link, in order to
facilitate the printing of hard copies. The resulting set of test
assertions embedded in this document represents a conformance test
suite for the profile.</p>
<p>Release notes related to the test material included in this
document are available here:</p>
<span class="relnotesref-type"><a onclick="javascript:toggle(this)"href="#rnReleaseNotes">TESTING-RELEASE-NOTES</a></span>
<div style="display: none;" id="rnReleaseNotes">
<table width="80%" class="tablernotes" border="1">
<tbody><tr>
<th width="20%">Note Item:</th>
<th align="left"><span class="tbrnotes-id"><a name="rn" id="rn">Release Notes : 2010-04-06</a></span></th>
</tr>
<tr>
<td><b>test suite</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="test-suite">
<p>The test assertions are scripted using XPath2.0 and are
automatically processable using the version 2.0 of the WS-I
Analyzer tools.</p>
<p>Several requirements have been tagged "NOT_TESTABLE". This means
that these requirements cannot be tested based on the technology
choices (black-box testing, XPath scripting).</p>
<p>Other requirements have been tagged "NOT_TESTED". This is the
case for most optional requirements (SHOULD, MAY), and for most
Extensibility points.</p>
<p>Other requirements have been tagged
"TESTABLE_SCENARIO_DEPENDENT". This is the case when a specific
test scenario is needed in order to exercise the related test
assertion, because the test assertion is designed to trigger only
on specific input material, e.g. that is known to NEVER be
recognizable by an endpoint.</p>
<p>A subsequent version may cover untested requirements. In this
profile, the core requirements for assessing interoperability of
implementations have been initially targeted.</p>
</item>
</td>
</tr>
<tr>
<td><b>test assertions notes</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="test-assertions-notes">
<p>A few test assertions are scenario-dependent: they only trigger
if specific values are used in the messages generated by the test
scenarios. They are:</p>
<br />
<p><b>RSP0001</b>: this TA is designed to only detect messages with
unrecognizable extensions that use the namespace:
"http://dummy.example.org/unknown/nmspace".</p>
<br />
<p><b>RSP0400a</b>: this TA is designed to only detect messages
that use an unrecognizable Sequence ID of value :
"http://dummy.example.org/unknown/nmspace".</p>
<br />
<p><b>RSP0400b</b>: this TA is designed to only detect messages
that use an unrecognizable Sequence ID of value :
"http://dummy.example.org/unknown/nmspace".</p>
<br />
<p><b>RSP1001</b>: this TA is designed to only detect messages that
use an unrecognizable element inside an SCT, with namespace of
value : "http://dummy.example.org/unknown/nmspace".</p>
<br />
<p>One test assertion does not match any specific Rxxxx, but stems
from general profile requirement:</p>
<p><b>RSP8001</b>: this TA is designed to ensure that all messages
are either compliant with SOAP 1.1 or SOAP 1.2.</p>
<br />
<p>Test assertions are not guaranteed to exhaustively cover every
case where a profile requirement applies. In several instances,
more than one test assertion is needed to address the various
situations where a profile requirement applies.</p>
<p>Test assertions are usually scripted as rules of the form: "if
situation(X) occurs, then verify that property(Y) is true ". It may
be that the situation ("X") that is associated with a test
assertion, will never occur because the features concerned by this
situation are optional and not implemented by an endpoint. In such
a case it is expected that test reports will never exercise such a
test assertion, for this implementation.</p>
<p>To learn more about the details of test assertion outcomes and
how they are reported in the test report, see the glossary link
that appears below each test assertion table.</p>
</item>
</td>
</tr>
<tr>
<td><b>test log rules</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="test-log-rules">
<p><i><b>Test Log content conventions:</b></i></p>
<p>The test assertions designed for this test suite are written to
work over "test log" files that are assumed to follow some rules in
their structure and content. These rules are more completely stated
in the documentation associated with the log file description. Some
of these rules are:</p>
<p>- Every message in the log must be uniquely identified: it must
have a unique pair of values for: {message/@conversation,
message/@id}, where @id is unique within each conversation.
Typically, a conversation is used to identify an HTTP connection
and the group of messages over this connection.</p>
<p>- A response message (for WSDL request-responses as well as RM
lifecycle messages) always appears after the request message in the
log file.</p>
<p>- A wsa:RelatesTo reference always refers to a message that has
been logged before.</p>
<p>- A Fault message always appears after the message-in-error.</p>
<p>- An RM acknowledgement always appears after the messages it
acknowledges.</p>
<p>- there should not be both a doc-lit and an rpc-lit bindings for
the same portType.</p>
<p>- imports must be resolved locally to the log file.</p>
</item>
</td>
</tr>
</tbody></table>
</div>
<h3 id="conventions">1.4 Notational Conventions</h3>
<p>The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt" class="offsite">RFC2119</a>.</p>
<p>Normative statements of requirements in the Profile (i.e., those
impacting conformance, as outlined in "<a href="#conformance_requirements">Conformance Requirements</a>") are
presented in the following manner:</p>
<p class="statement"><span class="statement-id">Rnnnn</span>Statement text here.</p>
<p>where "nnnn" is replaced by a number that is unique among the
requirements in the Profile, thereby forming a unique requirement
identifier.</p>
<p>Requirements can be considered to be namespace qualified, in
such a way as to be compatible with QNames from <a href="http://www.w3.org/TR/REC-xml-names/" class="offsite">Namespaces in
XML</a>. If there is no explicit namespace prefix on a
requirement's identifier (e.g., "R9999" as opposed to
"bp10:R9999"), it should be interpreted as being in the namespace
identified for this Profile.</p>
<p>Extensibility points in underlying specifications (see "<a href="#conformance_scope">Conformance Scope</a>") are presented in a
similar manner:</p>
<p class="statement"><span class="statement-id">Ennnn</span>Extensibility Point Name -
Description</p>
<p>where "nnnn" is replaced by a number that is unique among the
extensibility points in the Profile. As with requirement
statements, extensibility statements can be considered
namespace-qualified.</p>
<p>This specification uses a number of namespace prefixes
throughout; their associated URIs are listed below. Note that the
choice of any namespace prefix is arbitrary and not semantically
significant.</p>
<ul>
<li><strong>soap11</strong> -
"http://schemas.xmlsoap.org/soap/envelope/"</li>
<li><strong>soap12</strong> -
"http://www.w3.org/2003/05/soap-envelope"</li>
<li><strong>wsdl</strong> - "http://schemas.xmlsoap.org/wsdl/"</li>
<li><strong>wsa</strong> -
"http://www.w3.org/2005/08/addressing"</li>
<li><strong>wsrm</strong> -
"http://docs.oasis-open.org/ws-rx/wsrm/200702"</li>
<li><strong>wsmc</strong> -
"http://docs.oasis-open.org/ws-rx/wsmc/200702"</li>
<li><strong>wssc</strong> -
"http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512"</li>
<li><strong>wst</strong> -
"http://docs.oasis-open.org/ws-sx/ws-trust/200512"</li>
<li><strong>wsse</strong> -
"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"</li>
<li><strong>wsu</strong> -
"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"</li>
</ul>
<h3 id="versioning">1.5 Profile Identification and Versioning</h3>
<p>This document is identified by a name (in this case, Reliable
Secure Profile) and a version number (here, 1.0). Together, they
identify a particular <em>profile instance</em>.</p>
<p>Version numbers are composed of a major and minor portion, in
the form "major.minor". They can be used to determine the
precedence of a profile instance; a higher version number
(considering both the major and minor components) indicates that an
instance is more recent, and therefore supersedes earlier
instances.</p>
<p>Instances of profiles with the same name (e.g., "Example Profile
1.1" and "Example Profile 5.0") address interoperability problems
in the same general scope (although some developments may require
the exact scope of a profile to change between instances).</p>
<p>One can also use this information to determine whether two
instances of a profile are backwards-compatible; that is, whether
one can assume that conformance to an earlier profile instance
implies conformance to a later one. Profile instances with the same
name and major version number (e.g., "Example Profile 1.0" and
"Example Profile 1.1") MAY be considered compatible. Note that this
does not imply anything about compatibility in the other direction;
that is, one cannot assume that conformance with a later profile
instance implies conformance to an earlier one.</p>
<h2 id="conformance">2 Profile Conformance</h2>
<p>Conformance to the Profile is defined by adherence to the set of
<em>requirements</em> defined for a specific <em>target</em>,
within the <em>scope</em> of the Profile. This section explains
these terms and describes how conformance is defined and used.</p>
<h3 id="conformance_requirements">2.1 Conformance Requirements</h3>
<p>Requirements state the criteria for conformance to the Profile.
They typically refer to an existing specification and embody
refinements, amplifications, interpretations and clarifications to
it in order to improve interoperability. All requirements in the
Profile are considered normative, and those in the specifications
it references that are in-scope (see "Conformance Scope") should
likewise be considered normative. When requirements in the Profile
and its referenced specifications contradict each other, the
Profile's requirements take precedence for purposes of Profile
conformance.</p>
<p>Requirement levels, using <a href="http://www.ietf.org/rfc/rfc2119.txt" class="offsite">RFC2119</a>
language (e.g., MUST, MAY, SHOULD) indicate the nature of the
requirement and its impact on conformance. Each requirement is
individually identified (e.g., R9999) for convenience.</p>
<p>For example;</p>
<p class="statement"><span class="statement-id">R9999</span> Any
<strong>WIDGET</strong> SHOULD be round in shape.</p>
<p>This requirement is identified by "R9999", applies to the target
WIDGET (see below), and places a conditional requirement upon
widgets.</p>
<p>Each requirement statement contains exactly one requirement
level keyword (e.g., "MUST") and one conformance target keyword
(e.g., "MESSAGE"). The conformance target keyword appears in bold
text (e.g. "<b>MESSAGE</b>"). Other conformance targets appearing
in non-bold text are being used strictly for their definition and
NOT as a conformance target. Additional text may be included to
illuminate a requirement or group of requirements (e.g., rationale
and examples); however, prose surrounding requirement statements
must not be considered in determining conformance.</p>
<p>Definitions of terms in the Profile are considered authoritative
for the purposes of determining conformance.</p>
<h3 id="conformance_targets">2.2 Conformance Targets</h3>
<p>Conformance targets identify what artifacts (e.g., SOAP message,
WSDL description, UDDI registry data) or parties (e.g., SOAP
processor, end user) requirements apply to.</p>
<p>This allows for the definition of conformance in different
contexts, to assure unambiguous interpretation of the applicability
of requirements, and to allow conformance testing of artifacts
(e.g., SOAP messages and WSDL descriptions) and the behavior of
various parties to a Web service (e.g., clients and service
instances).</p>
<p>Requirements' conformance targets are physical artifacts
wherever possible, to simplify testing and avoid ambiguity.</p>
<p>The following conformance targets are used in the Profile:</p>
<ul>
<li><strong>MESSAGE</strong> - protocol elements that transport the
ENVELOPE (e.g., SOAP/HTTP messages) (from <a href="http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html" class="offsite">Basic Profile 1.1</a>)</li>
<li><strong>ENVELOPE</strong> - the serialization of the
soap:Envelope element and its content (from <a href="http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html" class="offsite">Basic Profile 1.1</a>)</li>
<li><strong>INSTANCE</strong> - software that implements a
wsdl:port or a uddi:bindingTemplate (from <a href="http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html" class="offsite">Basic Profile 1.1</a>)</li>
<li><strong>CONSUMER</strong> - software that invokes an INSTANCE
(from <a href="http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html" class="offsite">Basic Profile 1.1</a>)</li>
<li><strong>SENDER</strong> - software that generates a message
according to the protocol(s) associated with it (from <a href="http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html" class="offsite">Basic Profile 1.1</a>)</li>
<li><strong>RECEIVER</strong> - software that consumes a message
according to the protocol(s) associated with it (e.g., SOAP
processors) (from <a href="http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html" class="offsite">Basic Profile 1.1</a>)</li>
<li><strong>MC-SENDER</strong> - software that generates a message
containing an EPR that uses the wsmc:MakeConnection Anonymous URI,
and generates a MakeConnection message as defined by
WS-MakeConnection 1.1 (from <a href="http://docs.oasis-open.org/ws-rx/wsmc/200702/wsmc-1.1-spec-os.html" class="offsite">WS-MakeConnection 1.1</a>)</li>
<li><strong>MC-RECEIVER</strong> - software that consumes a
MakeConnection message as defined by WS-MakeConnection 1.1 (from
<a href="http://docs.oasis-open.org/ws-rx/wsmc/200702/wsmc-1.1-spec-os.html" class="offsite">WS-MakeConnection 1.1</a>)</li>
<li><strong>RMS</strong> - RM Source as defined by
WS-ReliableMessaging 1.2 (from <a href="http://docs.oasis-open.org/ws-rx/wsrm/200702/wsrm-1.2-spec-os.html" class="offsite">WS-ReliableMessaging 1.2</a>)</li>
<li><strong>RMD</strong> - RM Destination as defined by
WS-ReliableMessaging 1.2 (from <a href="http://docs.oasis-open.org/ws-rx/wsrm/200702/wsrm-1.2-spec-os.html" class="offsite">WS-ReliableMessaging 1.2</a>)</li>
<li><strong>RM-NODE</strong> - an instance of either an RM Source
or an RM Destination (as defined above)</li>
</ul>
<h3 id="conformance_scope">2.3 Conformance Scope</h3>
<p>The scope of the Profile delineates the technologies that it
addresses; in other words, the Profile only attempts to improve
interoperability within its own scope. Generally, the Profile's
scope is bounded by the specifications referenced by it.</p>
<p>The Profile's scope is further refined by extensibility points.
Referenced specifications often provide extension mechanisms and
unspecified or open-ended configuration parameters; when identified
in the Profile as an extensibility point, such a mechanism or
parameter is outside the scope of the Profile, and its use or
non-use is not relevant to conformance.</p>
<p>Note that the Profile may still place requirements on the use of
an extensibility point. Also, specific uses of extensibility points
may be further restricted by other profiles, to improve
interoperability when used in conjunction with the Profile.</p>
<p>Because the use of extensibility points may impair
interoperability, their use should be negotiated or documented in
some fashion by the parties to a Web service; for example, this
could take the form of an out-of-band agreement.</p>
<p>The Profile's scope is defined by the referenced specifications
in <a href="#references">Appendix A</a>, as refined by the
extensibility points in <a href="#points">Appendix B</a>.</p>
<h3 id="conformance_claims">2.4 Claiming Conformance</h3>
<p>To claim conformance to this Profile, a deployed instance MUST
support one or more of the WS-ReliableMessaging (WS-RM),
WS-SecureConversation (WS-SC), or WS-MakeConnection (WS-MC)
protocols, either individually or in some combination thereof, in a
manner that conforms to the requirements set forth in this
profile.</p>
<p>Deployed instances can advertise their conformance to this
Profile either through the use of mechanisms as described in
<a href="http://www.ws-i.org/Profiles/ConformanceClaims-1.0-2004-11-15.html" class="offsite">Conformance Claim Attachment Mechanisms</a> (see
section 2.4.1) or through the use of mechanisms as described in Web
Services Policy - Framework <a href="http://www.w3.org/TR/ws-policy/" class="offsite">[WS-Policy
1.5]</a> and Web Services Policy - Attachment <a href="http://www.w3.org/TR/ws-policy-attach/" class="offsite">[WS-Policy
Attachment 1.5]</a> specifications (see section 2.4.2). Prior
agreements between partners on how Profile conformance is to be
advertised or required might exist. When no such prior agreement
exists and there is a need to advertise, the use of WS-Policy is
RECOMMENDED over the use of the Conformance Claim Attachment
Mechanisms.</p>
<div class="refinement">
<h4 id="Claiming_Conformance_using_Conformance_Claim_Attachment_Mechanisms">
2.4.1 Claiming Conformance using Conformance Claim Attachment
Mechanisms</h4>
<div class="explanation">
<p>Mechanisms described in <a href="http://www.ws-i.org/Profiles/ConformanceClaims-1.0-2004-11-15.html" class="offsite">Conformance Claim Attachment Mechanisms</a> can be
used to advertise conformance to this profile, when the applicable
Profile requirements associated with the listed targets have been
met:</p>
<ul>
<li><strong>WSDL 1.1 Claim Attachment Mechanism for Web Services
Instances</strong> - MESSAGE, INSTANCE, RECEIVER, RMS, RMD</li>
</ul>
<p>The conformance claim URIs are:</p>
<ul>
<li>
<p>To claim conformance to the requirements pertaining to
WS-ReliableMessaging (<a href="#reliablemessaging" class="offsite">Section 3 "Reliable Messaging"</a> ) defined by this
Profile, and to require the use of WS-ReliableMessaging when using
the claiming endpoint:</p>
<dl>
<dd><a href="http://ws-i.org/profiles/rsp/1.0/ws-rm/" class="offsite">"http://ws-i.org/profiles/rsp/1.0/ws-rm/"</a></dd>
</dl>
</li>
<li>
<p>To claim conformance to the requirements pertaining to
WS-SecureConversation (<a href="#wssc" class="offsite">Section 4
"Secure Conversation"</a> ) defined by this Profile, and to require
the use of WS-SecureConversation when using the claiming
endpoint:</p>
<dl>
<dd><a href="http://ws-i.org/profiles/rsp/1.0/ws-sc/" class="offsite">"http://ws-i.org/profiles/rsp/1.0/ws-sc/"</a></dd>
</dl>
</li>
<li>
<p>To claim conformance to the requirements pertaining to
WS-MakeConnection (<a href="#makeconnection" class="offsite">Section 5 "Make Connection"</a> ) defined by this
Profile, and to require the use of WS-MakeConnection when using the
claiming endpoint:</p>
<dl>
<dd><a href="http://ws-i.org/profiles/rsp/1.0/ws-mc/" class="offsite">"http://ws-i.org/profiles/rsp/1.0/ws-mc/"</a></dd>
</dl>
</li>
</ul>
<p>Use of more than one or a combination of the above conformance
claim URIs is allowed. When the claim URI
<code>"http://ws-i.org/profiles/rsp/1.0/ws-sc/"</code> is combined
with either <code>"http://ws-i.org/profiles/rsp/1.0/ws-rm/"</code>
or <code>"http://ws-i.org/profiles/rsp/1.0/ws-mc/"</code> , the
requirements pertaining to such a combination as detailed in
<a href="#sec_reliable_msg" class="offsite">Section 6 "Secure
Reliable Messaging"</a> are also claimed to be conformed with.</p>
<p>The conformance claim URI to claim conformance to all
requirements defined by this Profile is</p>
<dl>
<dd><a href="http://ws-i.org/profiles/rsp/1.0/" class="offsite">"http://ws-i.org/profiles/rsp/1.0/"</a></dd>
</dl>
<p>NOTE: Because there is no requirement targeting WSDL constructs
in RSP, a conformance claim attached to a wsdl:port only indicates
conformance of the service instance to this Profile.</p>
</div>
</div>
<div class="refinement">
<h4 id="Claiming_Conformance_using_WS-Policy_and_WS-PolicyAttachment">
2.4.2 Claiming Conformance using WS-Policy and
WS-PolicyAttachment</h4>
<div class="explanation">
<p>Mechanisms described in Web Services Policy - Framework <a href="http://www.w3.org/TR/ws-policy/" class="offsite">[WS-Policy
1.5]</a> and Web Services Policy - Attachment <a href="http://www.w3.org/TR/ws-policy-attach/" class="offsite">[WS-Policy
Attachment 1.5]</a> specifications can be used to advertise
conformance to this profile.</p>
<p>The Profile defines the following policy assertion for this
purpose:</p>
<dl>
<dd><code>&lt;rsp:Conformant
xmlns:rsp="http://ws-i.org/profiles/rsp/1.0/"/&gt;</code></dd>
</dl>
<p>The presence of this assertion indicates that policy subject
supports one or more of the WS-RM, WS-SC, or WS-MC protocols in a
manner that conforms to RSP 1.0. This assertion only has meaning
when used in a policy alternative that also contains at least one
of wsrmp:RMAssertion, wsmc:MCSupported, or
wsp:SecureConversationToken. The semantics of this assertion apply
only to those protocols (WS-RM, WS-SC, or WS-MC) whose use is
indicated by a policy assertion within the same policy alternative
as this assertion. This assertion also requires that clients MUST
use the effected protocols in a way that conforms to RSP 1.0. The
absence of this assertion says nothing about RSP 1.0 conformance;
it simply indicates the lack of an affirmative declaration of and
requirement for RSP 1.0 conformance.</p>
<p>The <code>rsp:Conformant</code> policy assertion applies to the
endpoint policy subject. For WSDL 1.1, this assertion can be
attached to a <code>wsdl11:port</code> or
<code>wsdl11:binding</code> . A policy expression containing the
<code>rsp:Conformant</code> policy assertion MUST NOT be attached
to a <code>wsdl:portType</code> .</p>
<p>Use of this policy assertion to claim conformance is highly
encouraged.</p>
<p>This following example shows a policy expression that
indicates/requires support for RSP 1.0 conformant WS-RM.</p>
</div>
<p class="example-banner">For example,</p>
<div class="example">
<p class="correct">CORRECT:</p>
<pre>&lt;wsp:Policy xmlns:wsp="http://www.w3.org/ns/ws-policy"
            xmlns:wsrmp="http://docs.oasis-open.org/ws-rx/wsrmp/200702"
            xmlns:rsp="http://ws-i.org/profiles/rsp/1.0/"&gt;
  &lt;wsrmp:RMAssertion&gt;
    &lt;wsp:Policy/&gt;
  &lt;/wsrmp:RMAssertion&gt;
  &lt;rsp:Conformant/&gt;
&lt;/wsp:Policy&gt;

</pre></div>
</div>
<div class="refinement">
<div class="explanation">
<p>In the following example, the use of WS-RM is advertised as
supporting/requiring conformance with RSP 1.0, but it is
indeterminate whether or not the implementation of WS-MC supports
or requires RSP 1.0 conformance.</p>
</div>
<p class="example-banner">For example,</p>
<div class="example">
<p class="correct">CORRECT:</p>
<pre>&lt;wsp:Policy xmlns:wsp="http://www.w3.org/ns/ws-policy"
            xmlns:wsrmp="http://docs.oasis-open.org/ws-rx/wsrmp/200702"
            xmlns:rsp="http://ws-i.org/profiles/rsp/1.0/"&gt;
  &lt;wsp:ExactlyOne&gt;
    &lt;wsp:All&gt;
      &lt;wsrmp:RMAssertion&gt;
        &lt;wsp:Policy/&gt;
      &lt;/wsrmp:RMAssertion&gt;
      &lt;rsp:Conformant/&gt;
    &lt;/wsp:All&gt;
    &lt;wsp:All&gt;
      &lt;wsmc:MCSupported/&gt;
    &lt;/wsp:All&gt;
  &lt;/wsp:ExactlyOne&gt;
&lt;/wsp:Policy&gt;

</pre></div>
</div>
<h2 id="reliablemessaging">3. Reliable Messaging</h2>
<p>This section of the Profile incorporates the following
specifications by reference, and defines extensibility points
within them:</p>
<ul>
<li><a href="http://docs.oasis-open.org/ws-rx/wsrm/200702/wsrm-1.2-spec-os.html" class="offsite">Web Services Reliable Messaging 1.2</a><br />
Extensibility points:
<ul>
<li><span id="E0001" class="statement-id">E0001</span> -
CreateSequence element and attribute extensions - Extending
CreateSequence, via additional elements or attributes, is the
primary mechanism for negotiating supplemental semantics to be
applied to the requested and/or offered Sequence. Note this
extensiblity point does not cover the pre-defined use of the
/wsrm:CreateSequence/wsse:SecurityTokenReference element.</li>
<li><span id="E0002" class="statement-id">E0002</span> -
CreateSequenceResponse element and attribute extensions - Extending
CreateSequenceResponse, via additional elements or attributes, may
be used to signal the acceptance of the supplemental semantics
requested by the use of E0001 or it may be used in its own right to
request or signal additional semantics to be applied to either
requested and/or offered Sequence.</li>
<li><span id="E0003" class="statement-id">E0003</span> -
CloseSequence element and attribute extensions - The CloseSequence
element may be extended via additional elements or attributes to
indicate the use of supplemental semantics or options in the
closure of the Sequence.</li>
<li><span id="E0004" class="statement-id">E0004</span> -
CloseSequenceResponse element and attribute extensions - The
CloseSequenceResponse element may be extended via additional
elements or attributes to indicate the use of supplemental
semantics or options in the closure of the Sequence.</li>
<li><span id="E0005" class="statement-id">E0005</span> -
TerminateSequence element and attribute extensions - The
TerminateSequence element may be extended via additional elements
or attributes to indicate the use of supplemental semantics or
options in the termination of the Sequence.</li>
<li><span id="E0006" class="statement-id">E0006</span> -
TerminateSequenceResponse element and attribute extensions - The
TerminateSequenceResponse element may be extended via additional
elements or attributes to indicate the use of supplemental
semantics or options in the termination of the Sequence.</li>
<li><span id="E0007" class="statement-id">E0007</span> - Sequence
element and attribute extensions - The Sequence header element may
be extended via additional elements or attributes to convey
supplemental semantics or options that apply to the Sequence
identified by the header.</li>
<li><span id="E0008" class="statement-id">E0008</span> -
AckRequested element and attribute extensions - The AckRequest
header element may be extended via additional elements or
attributes to convey supplemental semantics or options that apply
to the request.</li>
<li><span id="E0009" class="statement-id">E0009</span> -
SequenceAcknowledgment element and attribute extensions - The
SequenceAcknowledgment header element may be extended via
additional elements or attributes to convey supplemental semantics
or options that apply to the acknowledgment.</li>
<li><span id="E0010" class="statement-id">E0010</span> -
SequenceFault element and attribute extensions - The SequenceFault
element may be extended via additional elements or attributes to
convey supplemental semantics or options that apply to the
fault.</li>
</ul>
</li>
<li><a href="http://www.ietf.org/rfc/rfc3987.txt" class="offsite">Internationalized Resource Identifiers (IRIs)</a></li>
<li><a href="http://www.w3.org/TR/2006/REC-ws-addr-soap-20060509" class="offsite">Web Services Addressing 1.0 - SOAP Binding</a></li>
</ul>
<p>These extensibility points are listed, along with any
extensibility points from other sections of this Profile, in
<a href="#points">Appendix B</a></p>
<h3 id="ws-rm-support">3.1 WS-ReliableMessaging Support</h3>
<div class="refinement">
<h4 id="Requiring_WS-ReliableMessaging">3.1.1 Requiring
WS-ReliableMessaging</h4>
<div class="rationale">
<p>As noted in <a href="#conformance" class="offsite">Section 2</a>
, support for WS-ReliableMessaging by a specific service is
optional. However, a service may require the use of
WS-ReliableMessaging, in which case, for successful interaction
with that service, a client will need to support it.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0002" id="R0002">R0002</a></span> If an endpoint requires the use of
WS-ReliableMessaging, any <span class="statement-target">ENVELOPE</span> sent to that endpoint MUST
conform to Section 3 of this Profile. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0002a">RSP0002a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0002b">RSP0002b</a></span></p>
<div style="display: none;" id="RSP0002a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0002a" id="RSP0002a">RSP0002a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial: only checks for the common case of presence of an
rm:Sequence header, for sequence traffic messages.</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0002a" id="RSP0002a">RSP0002a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name
= 'http://docs.oasis-open.org/ws-rx/wsrmp/200702/RMAssertion' and
@mode = 'required']] [@type =
'request']/wsil:messageContents/*:Envelope [*:Body[not(.//*:Fault)
and not(.//wsrm:* ) and not(.//*:EncryptedData) ]]
[*:Header[not(wsrm:AckRequested) and
not(wsrm:SequenceAcknowledgement) and not(.//xenc:ReferenceList)]]
[ some $myenv in . satisfies some $message in
//wsdl:definitions/wsdl:message satisfies
($message/wsdl:part[1]/@type) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding
[.//*[@style = 'rpc']]/wsdl:operation[@name =
fn:local-name-from-QName(node-name($target/*:Body/*[1]))]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/*:Header/wsrm:Sequence</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an WSDL rpc-lit binding, and for which the
use of WS-ReliableMessaging was required, did not contain a
wsrm:Sequence header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0002a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0002a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP0002b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0002b" id="RSP0002b">RSP0002b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial: only checks for the common case of presence of an
rm:Sequence header, for sequence traffic messages.</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0002b" id="RSP0002b">RSP0002b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name
= 'http://docs.oasis-open.org/ws-rx/wsrmp/200702/RMAssertion' and
@mode = 'required']] [@type =
'request']/wsil:messageContents/*:Envelope [*:Body[not(.//*:Fault)
and not(.//wsrm:* ) and not(.//wsmc:*) and not(.//*:EncryptedData)
]] [*:Header[not(wsrm:AckRequested) and
not(wsrm:SequenceAcknowledgement) and not(.//xenc:ReferenceList)]]
[some $myenv in . satisfies ( every $message in
//wsdl:definitions/wsdl:message satisfies (
(not($message/wsdl:part[1]/@type) ) and ( $myenv/*:Body/*[1] or
$myenv/*:Header/wsa:Action )) ) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding/wsdl:operation
[ some $opBinding in . satisfies (if ($target/*:Body/*[1] ) then
(some $dmesg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:message[wsdl:part[fn:resolve-QName(xsd:string(@element),
. ) = fn:node-name($target/*:Body/*[1])] ] satisfies some $dopmsg
in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
[fn:local-name-from-QName(fn:resolve-QName(xsd:string(@message), .
)) = $dmesg/@name] satisfies $opBinding/@name = $dopmsg/../@name )
else fn:true() ) and ( if ($target/*:Header/wsa:Action) then ( some
$opmsg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
satisfies ( $target/*:Header/wsa:Action = ( if
($opmsg/@wsam:Action) then $opmsg/@wsam:Action else
fn:concat($opmsg/../../../@targetNamespace, if
(not(fn:ends-with($opmsg/../../../@targetNamespace,'/'))) then '/'
else '', $opmsg/../../@name, '/', if($opmsg/@name) then
$opmsg/@name else fn:concat($opmsg/../@name, 'Request' ) ) ) ) and
( $opBinding/@name = $opmsg/../@name ) ) else fn:true() )
]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/*:Header/wsrm:Sequence</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an WSDL doc-lit binding, and for which the
use of WS-ReliableMessaging was required, did not contain a
wsrm:Sequence header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0002b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0002b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R0003" id="R0003">R0003</a></span> If an endpoint requires or supports the
use of WS-ReliableMessaging, the corresponding <span class="statement-target">INSTANCE</span> MUST behave in accordance with
Section 3 of this Profile. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0003">RSP0003</a></span></p>
<div style="display: none;" id="RSP0003">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0003" id="RSP0003">RSP0003</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0003" id="RSP0003">RSP0003</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[@type = 'response' and
/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name =
'http://docs.oasis-open.org/ws-rx/wsrmp/200702/RMAssertion' and
(@mode = 'required' or @mode = 'supported')]
]/wsil:messageContents/*:Envelope
[*:Header[not(.//xenc:ReferenceList)]][*:Body/*:Fault]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not($target[*:Body/*:Fault[
fn:ends-with(*:Code/*:Subcode/*:Value, 'MustUnderstand') or
.//*:faultcode[fn:contains(string(node()), 'MustUnderstand')]] and
*:Header/*:NotUnderstood[fn:namespace-uri-for-prefix(fn:substring-before(@qname,
':'), .) = 'http://docs.oasis-open.org/ws-rx/wsrm/200702']
])</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Fault from an INSTANCE is reporting a NotUnderstood
fault about a wsrm element, while the use of RM was required
(RMAssertion).</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0003">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0003">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>Note that two RSP compliant web services implementations might
both support the use of WS-ReliableMessaging yet fail to agree on a
common set of features necessary to interact with one another. For
example, a client might require the use of the "InOrder" Delivery
Assurance, yet the service might not support this Delivery
Assurance.</p>
</div>
</div>
<h3 id="extensibility_points">3.2 Use of Extension Elements and
Attributes in Messages</h3>
<p>The protocol elements defined by WS-ReliableMessaging contain
extension points wherein implementations MAY add child elements
and/or attributes.</p>
<div class="refinement">
<h4 id="Ignore_Unknown_Extension_Elements">3.2.1 Ignore Unknown
Extension Elements</h4>
<div class="rationale">
<p>To ensure the ability to safely extend the protocol, it is
necessary that adding an extension does not create the risk of
impacting interoperability with non-extended implementations.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0001" id="R0001">R0001</a></span> A <span class="statement-target">RECEIVER</span> MUST NOT generate a fault as a
consequence of receiving a message (e.g. wsrm:CreateSequence) that
contains extension elements and/or attributes that it does not
recognize, unless that extension is a SOAP Header with a
mustUndestand="1" attribute. Any exceptions to this rule are
clearly identified in requirements below or the specifications
underlying the profile.<span class="testable-type">TESTABLE_SCENARIO_DEPENDENT</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0001">RSP0001</a></span></p>
<div style="display: none;" id="RSP0001">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0001" id="RSP0001">RSP0001</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1: the actual test target is the observable artifact under
test. NOTE2: given partial coverage, probably better to test for
the negative case: predicate=true means failure. Inthe error
message (or warning message): mention what to look for NOTE3: need
to finalize the expected fault-message correlation. NOTE4: test env
alignment: use same unrecognizable extension.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (only some extension cases, and some messages types to
be tested, and also can't sort out the real cause of the
Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>for a soap:Envelope (not just wsrm:CreateSequence) with a
special extension that is known to be NOT understood</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>there is a Fault in response to the message with
extension.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=warning, false=undetermined</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Align with unrecognizable extension expected in the TA.
Generate a wsrm:CreateSequence message that makes use of the
unrecognizable extension. Require response for anonymous URI.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0001" id="RSP0001">RSP0001</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[<br />

some $elt in .//* satisfies<br />
string(fn:namespace-uri($elt)) =
'http://dummy.example.org/unknown/nmspace'<br />
]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target/*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
not($myresponse//*:Body/*:Fault)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Fault was generated in response to a message that
contains elements with an unrecognized extension - here, a
predefined namespace URI.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0001">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0001">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>While the extensibility points of the profiled specifications
can be used, per R0001 they MUST be ignored if they are not
understood. However if a SENDER wishes to ensure that the RECEIVER
understands and will comply with any such extensions, they need to
include a SOAP header, marked with <code>mustUnderstand="1"</code>
, in the request message that requires adherence to the semantics
of those extensions.</p>
</div>
</div>
<h3 id="SOAPVersion">3.3 SOAP Version Considerations</h3>
<p>In general, it is not expected that the service descriptions for
applications that use WS-ReliableMessaging will include bindings of
the WS-RM protocol itself. This being the case, there is some
uncertainty about which version of SOAP should be used to carry
Sequence Lifecycle Messages.</p>
<div class="refinement">
<h4 id="SOAP_Version_Selection_for_Sequence_Lifecycle_Messages">
3.3.1 SOAP Version Selection for Sequence Lifecycle Messages</h4>
<div class="rationale">
<p>For messages that flow from the RMS to the RMD, the version(s)
of SOAP used for Sequence Lifecycle Messages are constrained to the
version(s) of SOAP that are supported by the target endpoint (i.e.
the endpoint to which the client is attempting to reliably
communicate). For example, if a client is attempting to communicate
reliably to an endpoint who's service description indicates that it
only supports SOAP 1.1, the RMS should only send Sequence Lifecycle
Messages using SOAP 1.1. Sequence Lifecycle Response Messages
(CreateSequenceResponse, TerminateSequenceResponse, and
CloseSequenceResponse) should use the version of SOAP used by their
corresponding request message (CreateSequence, TerminateSequence,
and CloseSequence respectively); this applies to WS-RM fault
messages as well. For messages that flow from the RMD to the RMS
(SequenceAck messages with an empty body, unsolicited CloseSequence
messages, and unsolicited TerminateSequence messages) this profile
adheres to and expands upon WS-RM's statement that "The SOAP
version used for the CreateSequence message SHOULD be used for all
subsequent messages in or for that Sequence, sent by either the RM
Source or the RM Destination".</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0900" id="R0900">R0900</a></span> Unless otherwise specified (e.g. through
some WSDL or WS-Policy designator), the <span class="statement-target">RMD</span> MUST send Sequence Lifecycle Messages
destined to the CreateSequence/AcksTo EPR with the same SOAP
version that was used in the CreateSequence message.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0900">RSP0900</a></span></p>
<div style="display: none;" id="RSP0900">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0900" id="RSP0900">RSP0900</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>When passing around EPRs (that do not have embedded WSDL) it is
not clear which version of SOAP should be used when talking to that
EPR. This requirement tries to answer this question at least with
respect to RM Acks / AcksTo EPR by requiring the RMD to use the
same SOAP version that was used in the originating CS message. This
means that the RMD needs to save this information, where before
this was not required</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope with a SeqAck Header</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] has the same SeqID value and SOAP Envelope
namespace as the previous message that contains a CreateSequence or
CreateSequenceResponse.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=warning, false=passed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run a reliable request/response application message exchange.
Create a sequence using a CreateSequence that includes an Offer
element. This will ensure that the messages carrying the Acks in
both directions are using the correct SOAP namespace.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0900" id="RSP0900">RSP0900</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This test assertion takes as prerequisite RSP8001, a "base TA"
that does match any particular Rxxxx requirement, but matches
fundamental requirements from RSP: namely that an Envelope is
either under SOAP 1.2 or SOAP 1.1 namespace.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[(*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier =
preceding::*:Envelope/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier)
or<br />
(*:Body/wsrm:CloseSequenceResponse/wsrm:Identifier =
preceding::*:Envelope/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier)
or<br />
(*:Body/wsrm:TerminateSequenceResponse/wsrm:Identifier =
preceding::*:Envelope/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier)
or<br />
(*:Body/wsrm:CreateSequenceResponse)]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP8001</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $csr in
/wsil:testLog/wsil:messageLog//*:Envelope<br />
[*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier =
$target/*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier
or<br />
(*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier =
$target/*:Body/wsrm:*/wsrm:Identifier)]<br />
satisfies<br />
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence]
satisfies
<div style="margin-left: 2em">(($cs/../../@conversation =
$csr/../../@conversation) or<br />
($csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or<br />
not (@RelationshipType)] = $cs/*:Header/wsa:MessageID)) and<br />
fn:namespace-uri($target) = fn:namespace-uri($cs)</div>
</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Some RM Lifecycle message related to a requested sequence
(CreateSequence) was sent to the AcksTo EPR with a SOAP version
different from the version used for the CreateSequence
message.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0900">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0900">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R0901" id="R0901">R0901</a></span> Unless otherwise specified (e.g. through
some WSDL or WS-Policy designator), the <span class="statement-target">RMS</span> of an Offered Sequence MUST send
Sequence Lifecycle Messages destined to the
CreateSequence/Offer/Endpoint EPR with the same SOAP version that
was used in the CreateSequence message.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0901">RSP0901</a></span></p>
<div style="display: none;" id="RSP0901">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0901" id="RSP0901">RSP0901</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>The possible lifecycle messages covered by this requirement
are: CloseSequence and TerminateSequence. Similar to R0900, its not
clear what version of SOAP should be used when sending messages to
the CS/Offer/Endpoint EPR. This requirement would require an RMD to
save the SOAP version of the CS and use that same version of any
Close or Terminate Sequence messages sent to the CS/Offer/Endpoint
EPR</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good(should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A CloseSequence or TerminateSequence message</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>For any message that contains a CloseSequence or
TerminateSequence element in the Body, extract the SeqID value and
find (in a previous message) a CreateSequence, or
CreateSequenceResponse, that references this SeqID. The namespace
of the SOAP Envelope elements of these messages MUST be the
same</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run a reliable request/response application message exchange.
Create a sequence using a CreateSequence that includes an Offer
element. To ensure the CloseSequence message is tested we could
make sure there's a gap in the request sequence then have the RMS
send a Close. This should cause the service to close the response
sequence before it terminates it. Question: is there a RSP
requirement that covers the non-Offered case? Seems like there
should be but I can't find it</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0901" id="RSP0901">RSP0901</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This test assertion takes as prerequisite RSP8001, a "base TA"
that does match any particular Rxxxx requirement, but matches
fundamental requirements from RSP: namely that an Envelope is
either under SOAP 1.2 or SOAP 1.1 namespace.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[(*:Header/wsrm:AckRequested/wsrm:Identifier =
preceding::*:Envelope/*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier)
or<br />
(*:Body/wsrm:CloseSequence/wsrm:Identifier =
preceding::*:Envelope/*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier)
or<br />
(*:Body/wsrm:TerminateSequence/wsrm:Identifier =
preceding::*:Envelope/*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier)
]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP8001</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $cs in
preceding::*:Envelope<br />
[*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier =
$target/*:Header/wsrm:AckRequested/wsrm:Identifier or<br />
(*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier =
$target/*:Body/wsrm:*/wsrm:Identifier)]<br />
satisfies<br />
fn:namespace-uri($target) = fn:namespace-uri($cs)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Some RM Lifecycle message related to an offered sequence
(CreateSequence) was sent to the CreateSequence/Offer/Endpoint EPR
with a SOAP version different from the version used for the
CreateSequence message.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0901">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0901">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="targetCreateSequence">3.4 Targeting Sequence Lifecycle
Messages</h3>
<p>WS-ReliableMessaging is silent on where certain Sequence
Lifecycle Messages (such as CreateSequence) should be sent.</p>
<div class="refinement">
<h4 id="CreateSequence_Target">3.4.1 CreateSequence Target</h4>
<div class="rationale">
<p>The WS-RM specification is silent on exactly where an RMS should
send a CreateSequence message to establish a Sequence. This is true
for the case of a client-side RMS creating a Sequence to carry
request messages as well as the case of a server-side RMS creating
a Sequence to carry response messages. This is an interoperability
issue because, unless the respective RMS and RMD implementations
agree on the expected target for CreateSequence messages, the
intended recipient may not configure the necessary infrastructure
(WS-RM message handlers, etc.) and the CreateSequence message may
either cause a fault or be ignored.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0800" id="R0800">R0800</a></span> Baring some out of band agreement, an
<span class="statement-target">ENVELOPE</span> carrying a
CreateSequence message MUST be addressed to the same destination as
one of the Sequence Traffic Message for that Sequence.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0800">RSP0800</a></span></p>
<div style="display: none;" id="RSP0800">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0800" id="RSP0800">RSP0800</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0800" id="RSP0800">RSP0800</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/wsrm:CreateSequence][ some $cs in . satisfies some $mycsr
in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier =
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope/*:Header/wsrm:Sequence/wsrm:Identifier]
satisfies<br />
($mycsr/../../@conversation = $cs/../../@conversation) or<br />
($mycsr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $mycsr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/wsrm:CreateSequenceResponse]<br />
[(./../../@conversation = $target/../../@conversation) or<br />
(*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $target/*:Header/wsa:MessageID)] satisfies
some $env in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsrm:Sequence/wsrm:Identifier
= $mycsr/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier]
satisfies<br />
($env/*:Header/wsa:To = $target/*:Header/wsa:To)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>None of the messages sent in a reliable sequence, has been sent
to the same destination endpoint as the CreateSequence message (at
least one should be).</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0800">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0800">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>This requirement applies equally to cases in which the first
Sequence Traffic Message is addressed to a URI (as may happen when
the target endpoint is retrieved from a WSDL document) or to an EPR
(as may happen when the target endpoint is the wsa:ReplyTo address
of the corresponding request message).</p>
</div>
</div>
<div class="refinement">
<h4 id="Use_of_the_Offer_Element">3.4.2 Use of the Offer
Element</h4>
<div class="rationale">
<p>The use of the Offer element within a CreateSequence message is
an optional feature of WS-ReliableMessaging. Using Offer avoids the
exchange of CreateSequence and CreateSequenceResponse messages to
establish a new sequence for response messages. However, WS-RM does
not define a mechanism by which an RMS can determine if an Offer is
desired by the RMD. This creates a potential interoperability issue
in cases where an RMS that either doesn't wish to use or cannot
support the use of Offer attempts to create a Sequence with an RMD
that requires the use of Offer. To ensure interoperability, the
Offer feature must be optional for both the initiator of the
Sequence (the RMS) as well as the RMD.</p>
<p>Conversely, when an RMS includes an Offer within a CreateSeqence
and the RMD rejects that Offer (e.g. if it only has input-only
operations and concludes it has no need for the offered Sequence),
if the RMD indicates this choice by faulting the CreateSequence the
RMS has no programmatic means of determining that the fault was due
to the presence of an Offer. To ensure interoperability in these
cases, the RMD, rather than faulting the CreateSequence, must
instead simply not accept the offered Sequence by not including an
Accept element in the CreateSequenceResponse.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0010" id="R0010">R0010</a></span> An <span class="statement-target">RMD</span> MUST NOT fault a CreateSequence due
to the absence of the Offer element.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0010">RSP0010</a></span></p>
<div style="display: none;" id="RSP0010">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0010" id="RSP0010">RSP0010</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>No fault is sent back by the CS receiver.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=warning, false=undetermined</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Warning: apparent failure. Verify if the Fault has not other
causes.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0010" id="RSP0010">RSP0010</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[<br />

*:Body/wsrm:CreateSequence[not(wsrm:Offer)]]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target/*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
not($myresponse//*:Body/*:Fault)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Warning: A wsrm:CreateSequence message was faulted. Please
verify to make sure it was not faulted because of the absence of an
Offer element.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0010">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0010">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R0011" id="R0011">R0011</a></span> An <span class="statement-target">RMD</span> MUST NOT fault a CreateSequence due
to the presence of the Offer element.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0011">RSP0011</a></span></p>
<div style="display: none;" id="RSP0011">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0011" id="RSP0011">RSP0011</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>No fault is sent back by the CS receiver.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=warning, false=undetermined</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Warning: apparent failure. Verify if the Fault has not other
causes.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0011" id="RSP0011">RSP0011</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsrm:Offer]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[not (@RelationshipType) or (
@RelationshipType = 'http://www.w3.org/2005/08/addressing/reply' )
] = $target/*:Header/wsa:MessageID)<br />
]/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
not($myresponse//*:Body/*:Fault)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Warning: A wsrm:CreateSequence message was faulted. Please
verify to make sure it was not faulted because of the presence of
an Offer element.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0011">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0011">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="sequence_IDs">3.5 Sequence Identifiers</h3>
<p>Under certain conditions it is possible for the
<code>CreateSequence</code> or <code>CreateSequenceResponse</code>
messages to be lost or delayed. Depending upon the timing of the
attempts to resend such messages, it is possible to receive
duplicate <code>CreateSequence</code> or
<code>CreateSequenceResponse</code> messages (in fact, it is
possible to receive duplicate messages even without retries). This
creates the potential for <code>CreateSequence</code> and
<code>CreateSequenceResponse</code> messages that contain duplicate
Sequence Identifiers. Furthermore there are situations in which one
party (RMS or RMD) may erroneously send a
<code>CreateSequence</code> or <code>CreateSequenceResponse</code>
message with a duplicate Sequence Identifier. Due to the crucial
role of Sequence Identifiers in the WS-RM protocol, the handling of
duplicate Sequence Identifiers needs to be further refined to
prevent interoperability problems.</p>
<div class="refinement">
<h4 id="Duplicate_Identifier_in_CreateSequenceResponse">3.5.1
Duplicate Identifier in CreateSequenceResponse</h4>
<div class="rationale">
<p>Regardless of the causative circumstances, the existence of two,
non-terminated Sequences with the same Identifier makes it
difficult for the RMS to correctly function, therefore the RMS
should take steps to prevent this condition.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0700" id="R0700">R0700</a></span> The <span class="statement-target">RMS</span> MUST generate a fault when it
receives a <code>CreateSequenceResponse</code> that contains a
Sequence Identifier that is the same as the Identifier of a
non-terminated Sequence.<span class="testable-type">NOT_TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#COM0700">COM0700</a></span></p>
<div style="display: none;" id="COM0700">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="COM0700" id="COM0700">COM0700</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>not testable since generated faults may not be visible or if
testable will never fail</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="COM0700" id="COM0700">COM0700</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td></td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryCOM0700">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryCOM0700">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>Note that this requirement does not differentiate between
duplicate Identifiers created by "the same" RMD or "different"
RMDs; the simple fact that the RMS already has an active Sequence
with the same Identifier is enough to trigger this requirement.</p>
</div>
</div>
<h3 id="termination">3.6 Sequence Termination</h3>
<p>Termination of sequences must be done in a way to ensure that
both the RMS and RMD share a common understanding of the final
status of the sequence. The Profile places the following
requirements on termination procedures:</p>
<div class="refinement">
<h4 id="Sequence_Termination_from_the_Destination">3.6.1 Sequence
Termination from the Destination</h4>
<div class="rationale">
<p>An RMS may need to get a final sequence acknowledgment, for
supporting a particular delivery assurance. This is only possible
after the sequence is closed and before it is terminated. When the
termination is decided by the RMD, the RMS must also be made aware
of this closure so that it can request a final acknowledgement.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0200" id="R0200">R0200</a></span> In the case where an <span class="statement-target">RMD</span> decides to discontinue a sequence, it
MUST close the Sequence and MUST attempt to send a
wsrm:CloseSequence message to the AcksTo EPR.<span class="testable-type">NOT_TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#COM0200">COM0200</a></span></p>
<div style="display: none;" id="COM0200">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="COM0200" id="COM0200">COM0200</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>untestable without ESP, hard to simulate an rmd autonomous
decision to discontinue a sequence hard to impossible.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="COM0200" id="COM0200">COM0200</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td></td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryCOM0200">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryCOM0200">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Last_Message_Number">3.6.2 Last Message Number</h4>
<div class="rationale">
<p>Among other benefits, the use of Sequence Message Numbers makes
an RMD aware of gaps - messages it has not received - in a
sequence. For this awareness to apply to messages missing from the
end of a sequence the RMD must be aware of the highest message
number sent.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0210" id="R0210">R0210</a></span> Any <span class="statement-target">ENVELOPE</span> from an RMS containing either a
wsrm:CloseSequence or a wsrm:TerminateSequence element MUST also
contain a wsrm:LastMsgNumber element if the Sequence in question
contains at least one Sequence Traffic Message.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0210">RSP0210</a></span></p>
<div style="display: none;" id="RSP0210">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0210" id="RSP0210">RSP0210</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE (either CS or TS)</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For a soap:Envelope with either a wsrm:CloseSequence or a
wsrm:TerminateSequence element in the soap:Body</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>the Envelope also contains wsrm:LastMsgNumber: proposed XPath=
se:Body/wsrm:*/wsrm:LastMsgNumber</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Generate either a wsrm:CloseSequence message, or a
wsrm:TerminateSequence</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0210" id="RSP0210">RSP0210</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>The soap:envelope in the message also contains a
wsrm:LastMsgNumber element if it has a wsrm:CloseSequence or a
wsrm:TerminateSequence element.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope[ *:Body/wsrm:CloseSequence or
*:Body/wsrm:TerminateSequence] [.//*:Body//wsrm:Identifier =
preceding::*:Envelope/*:Header/wsrm:Sequence/wsrm:Identifier]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
*:Body/wsrm:*/wsrm:LastMsgNumber</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Warning: The soap:envelope in a wsrm:CloseSequence or a
wsrm:TerminateSequence message for a non-empty RM sequence does not
contain a wsrm:LastMsgNumber element. Please verify that the
message was sent by the sequence destination (RMD) as the
LastMsgNumber element must be present otherwise</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">{SOAP message}</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0210">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0210">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>There is a corner case for sequences in which no messages have
been sent (i.e. empty sequences). In these cases it is permissable
to omit wsrm:LastMsgNumber since there is no valid value for this
element.</p>
</div>
</div>
<div class="refinement">
<h4 id="Sequence_Lifecycle_Independence">3.6.3 Sequence Lifecycle
Independence</h4>
<div class="rationale">
<p>WS-ReliableMessaging is unclear about the relationship, if any,
between the lifecycles of a Sequence and its corresponding Offered
Sequence. Considering that such a relationship is not necessary for
the proper functioning of the WS-RM protocol and that the existence
of a such a relationship would create unnecessary and undesirable
interdependencies between the RMS and the RMD, this profile makes
the clarifying requirement that no such relationship exists.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0220" id="R0220">R0220</a></span> An <span class="statement-target">RM-NODE</span> (RMD or RMS) MUST NOT assume that
the termination (or closure) of a Sequence implicitly terminates
(or closes) any other Sequence.<span class="testable-type">NOT_TESTED</span></p>
</div>
<h3 id="xmit_seq_faults">3.7 Sequence Faults</h3>
<p>This Profile adds the following requirement to the handling of
faults that are generated as the result of processing WS-RM
Sequence Lifecycle messages.</p>
<div class="refinement">
<h4 id="WS-ReliableMessaging_Faults">3.7.1 WS-ReliableMessaging
Faults</h4>
<div class="rationale">
<p>The use of WS-ReliableMessaging for faults that are themselves
related to the WS-RM protocol is undefined and unlikely to be
interoperable. Accordingly this profile prohibits the assignment of
WS-RM fault messages to a WS-RM Sequence.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0620" id="R0620">R0620</a></span> An <span class="statement-target">ENVELOPE</span> that has
wsrm:SequenceTerminated, wsrm:UnknownSequence,
wsrm:InvalidAcknowledgement, wsrm:MessageNumberRollover,
wsrm:CreateSequenceRefused, wsrm:SequenceClosed, or
wsrm:WSRMRequired as the value of either the SOAP 1.2
/S:Fault/S:Code/S:Subcode/S:Value element or the
/wsrm:SequenceFault/wsrm:FaultCode element MUST NOT contain a
wsrm:Sequence header block.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0620a">RSP0620a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0620b">RSP0620b</a></span></p>
<div style="display: none;" id="RSP0620a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0620a" id="RSP0620a">RSP0620a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>For SOAP11</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope in which any of the following appear: a.
wsrm:SequenceTerminated b. wsrm:UnknownSequence c.
wsrm:InvalidAcknowledgment d. wsrm:MessageNumberRollover e.
wsrm:CreateSequenceRefused f. wsrm:SequenceClosed g.
wsrm:WSRMRequired</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] does not contain a wsrm:Sequence header.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>TBD &#8211; a scenario that causes either a
wsrm:SequenceTerminated or wsrm:UnknownSequence fault.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0620a" id="RSP0620a">RSP0620a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/*:Fault] [some $fc in *:Header/*:SequenceFault/*:FaultCode
satisfies (fn:namespace-uri-for-prefix(fn:substring-before($fc,':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsrm/200702') or (
fn:substring-after($fc,':' ) eq 'SequenceTerminated' or
fn:substring-after($fc,':' ) eq 'UnknownSequence' or
fn:substring-after($fc,':' ) eq 'InvalidAcknowledgment' or
fn:substring-after($fc,':' ) eq 'CreateSequenceRefused' or
fn:substring-after($fc,':' ) eq 'MessageNumberRollover' or
fn:substring-after($fc,':' ) eq 'SequenceClosed' or
fn:substring-after($fc,':' ) eq 'WSRMRequired' )]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not(./*:Header ) or
./*:Header[not (wsrm:Sequence) ]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP11 wsrm error message contains a wsrm:Sequence
header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0620a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0620a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP0620b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0620b" id="RSP0620b">RSP0620b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>For SOAP12</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope in which any of the following appear: a.
wsrm:SequenceTerminated b. wsrm:UnknownSequence c.
wsrm:InvalidAcknowledgment d. wsrm:MessageNumberRollover e.
wsrm:CreateSequenceRefused f. wsrm:SequenceClosed g.
wsrm:WSRMRequired</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] does not contain a wsrm:Sequence header.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>TBD &#8211; a scenario that causes either a
wsrm:SequenceTerminated or wsrm:UnknownSequence fault.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0620b" id="RSP0620b">RSP0620b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/*:Fault] [some $fc in *:Body/*:Fault//*:Value satisfies
(fn:namespace-uri-for-prefix(fn:substring-before($fc,':' ) , . ) =
'http://docs.oasis-open.org/ws-rx/wsrm/200702') or (
fn:substring-after($fc,':' ) eq 'SequenceTerminated' or
fn:substring-after($fc,':' ) eq 'UnknownSequence' or
fn:substring-after($fc,':' ) eq 'InvalidAcknowledgment' or
fn:substring-after($fc,':' ) eq 'MessageNumberRollover' or
fn:substring-after($fc,':' ) eq 'CreateSequenceRefused' or
fn:substring-after($fc,':' ) eq 'SequenceClosed' or
fn:substring-after($fc,':' ) eq 'WSRMRequired' )]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not(./*:Header ) or
./*:Header[not (wsrm:Sequence) ]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP12 wsrm error message contains a wsrm:Sequence
header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0620b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0620b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="sequence_assignment">3.8 Sequence Assignment</h3>
<p>WS-ReliableMessaging is silent on the mechanism for assigning
messages (either request messages or response messages) to a
particular Sequence. While this flexibility is beneficial from a
general web services specification perspective, it creates some
interoperability issues.</p>
<div class="refinement">
<h4 id="Reliable_Response_Messages">3.8.1 Reliable Response
Messages</h4>
<div class="rationale">
<p>Given a scenario in which a consumer and a provider engage in a
series of reliable request/response exchanges, it is important for
the consumer and provider to have a consistent use of reliable
messaging for response messages. From a reliable messaging
perspective, all responses messages (both faults or non-faulting
replies) are to be treated the same - meaning, either reliable
messaging is enaged for both types of responses or it is turned off
for both types of responses.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0600" id="R0600">R0600</a></span> An INSTANCE MUST NOT differentiate between
faulting responses and non-faulting responses when determining
whether to use WS-ReliableMessaging for a response
message.<span class="testable-type">NOT_TESTED</span></p>
</div>
<div class="refinement">
<h4 id="Scope_of_an_RM_Node">3.8.2 Scope of an RM Node</h4>
<div class="rationale">
<p>WS-ReliableMessaging does not define the scope of an RM node
other that to say that the scope is not restricted. For example,
with respect to R0600 above, an Offered Sequence should be used to
carry the response to any message sent over the Sequence
corresponding to the CreateSequence request that included the
Offer. However, it should not be assumed that the Sequence Traffic
Messages carried over the Offered Sequence must be addressed to a
particular response endpoint.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0610" id="R0610">R0610</a></span> The scope of an RM Node is an
implementation choice that MUST NOT be constrained by the remote
<span class="statement-target">RM-NODE</span>. For example, the RMD
MUST NOT constrain the values used by the RMS in the wsa:ReplyTo
EPRs used by the RMS to be the same for all request messages
(Sequence and Lifecycle messages).<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0610">RSP0610</a></span></p>
<div style="display: none;" id="RSP0610">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0610" id="RSP0610">RSP0610</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0610" id="RSP0610">RSP0610</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[@type = 'request' and .//*:Header/wsrm:Sequence]<br />
[some $req1 in . satisfies $req1/preceding::wsil:message[@type =
'request' and (.//*:Header/wsrm:Sequence/wsrm:Identifier =
$req1//*:Header/wsrm:Sequence/wsrm:Identifier) and ( (
not(.//*:Header/wsa:ReplyTo) and $req1//*:Header/wsa:ReplyTo and
not(fn:contains(xsd:string($req1//*:Header/wsa:ReplyTo[1]/wsa:Address),
'anonymous'))) or ( not($req1//*:Header/wsa:ReplyTo) and
.//*:Header/wsa:ReplyTo and
not(fn:contains(xsd:string(.//*:Header/wsa:ReplyTo[1]/wsa:Address),
'anonymous'))) or ( $req1//*:Header/wsa:ReplyTo and
.//*:Header/wsa:ReplyTo and (
not(.//*:Header/wsa:ReplyTo/wsa:Address =
$req1//*:Header/wsa:ReplyTo/wsa:Address) or
not(.//*:Header/wsa:ReplyTo/wsa:ReferenceParameters =
$req1//*:Header/wsa:ReplyTo/wsa:ReferenceParameters) )) ) ]
]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation = $target/@conversation)
or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target//*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
not($myresponse//*:Body/*:Fault)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Warning: A request message sent reliably (RM) with a ReplyTo
value different from a ReplyTo in preceding request message sent
reliably (RM) over the same sequence, was faulted. Please verify
this is not because there were two different ReplyTo values for the
same sequence, as this is allowed.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0610">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0610">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>Within this context the phrase "scope of an RM node" is defined
as "the set of all EPRs that address a given RM node".</p>
</div>
</div>
<h3 id="retransmission">3.9 Retransmission of Messages</h3>
<p>WS-ReliableMessaging protocol requires retransmission of
messages. The Profile places the following restrictions and
refinements on such retransmissions:</p>
<div class="refinement">
<h4 id="Retransmission_of_Unacknowledged_Messages">3.9.1
Retransmission of Unacknowledged Messages</h4>
<div class="rationale">
<p>To ensure reliable delivery of messages within a Sequence, it is
necessary for the RMS to retransmit unacknowledged messages and for
the RMD to accept them.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0101" id="R0101">R0101</a></span> An <span class="statement-target">RMS</span> MUST continue to retransmit
unacknowledged messages until the Sequence is closed or
terminated.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0101">RSP0101</a></span></p>
<div style="display: none;" id="RSP0101">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0101" id="RSP0101">RSP0101</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1:The TA should only apply when there is evidence of
message resending. NOTE2: "continuation of resending" is hard to
evaluate.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE(CS or CSR)</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For either a CloseSequence message or a CloseSequenceResponse
message sent by RMS, and if there is evidence of resending for a
message sent before this CloseSequence[Response], over this
sequence.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The same message is NOT resent after the
CloseSequence[Response] was sent.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>The RM resending parameters are set in a way that a message
capture log can reflect the actual resending over time. Sequence
must be closed by RMD or RMD, before the resending schedule
expires.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0101" id="RSP0101">RSP0101</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope<br />
[*:Body/wsrm:CloseSequence or *:Body/wsrm:TerminateSequence]<br />
[some $seqid in *:Body//wsrm:Identifier satisfies<br />
some $env1 in
./preceding::*:Envelope[*:Header/wsrm:Sequence/wsrm:Identifier =
$seqid] satisfies<br />
<div style="margin-left: 2em">
$env1/preceding::*:Envelope[*:Header/wsrm:Sequence/wsrm:Identifier
= $seqid and *:Header/wsrm:Sequence/wsrm:MessageNumber =
$env1/*:Header/wsrm:Sequence/wsrm:MessageNumber ]</div>
]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not (<br />
some $seqid in ./*:Body//wsrm:Identifier satisfies<br />
(some $env1 in
./preceding::*:Envelope[*:Header/wsrm:Sequence/wsrm:Identifier =
$seqid ] satisfies
<div style="margin-left: 2em">
(./following::*:Envelope[*:Header/wsrm:Sequence/wsrm:Identifier =
$seqid and<br />
*:Header/wsrm:Sequence/wsrm:MessageNumber =
$env1/*:Header/wsrm:Sequence/wsrm:MessageNumber ]))</div>
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A CloseSequence message or a TerminateSequence message was sent
by RMS for a sequence that contains messages that have been resent.
But the resending has not stopped after these terminating messages
have been logged.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0101">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0101">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R0102" id="R0102">R0102</a></span> An <span class="statement-target">RMD</span> MUST accept unacknowledged messages
until the Sequence is closed or terminated.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0102">RSP0102</a></span></p>
<div style="display: none;" id="RSP0102">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0102" id="RSP0102">RSP0102</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1: a message should be intercepted, causing a gap in the
Ack ranges. Regardless of how long the delay before resending , the
message must finally be acknowledged if sequence not closed.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE(with RM header)</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For a message that is a resend, in a RM sequence that is not
closed or terminated yet.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The message is not faulted by the RMD, AND the next
acknowledgement shows it has been acknowledged.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td>MIM to block messages, to cause significant delay in
resending.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0102" id="RSP0102">RSP0102</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Header/wsrm:Sequence =
preceding::*:Envelope/*:Header/wsrm:Sequence]<br />
[some $tgenv in . satisfies
<div style="margin-left: 2em">not( some $clseq in
$tgenv/preceding::*:Envelope[*:Body/wsrm:CloseSequence or
*:Body/wsrm:TerminateSequence ] satisfies<br />
$clseq/*:Body//wsrm:Identifier =
$tgenv/*:Header/wsrm:Sequence/wsrm:Identifier )</div>
]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $env in
following::*:Envelope[*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier
= $target/*:Header/wsrm:Sequence/wsrm:Identifier] satisfies<br />
some $ackrange in
$env/*:Header/wsrm:SequenceAcknowledgement/wsrm:AcknowledgementRange
satisfies
<div style="margin-left: 2em">($ackrange/@Lower le
$target/*:Header/wsrm:Sequence/wsrm:MessageNumber and<br />
$ackrange/@Upper ge
$target/*:Header/wsrm:Sequence/wsrm:MessageNumber)<br />
) and<br />
not (/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[not (@RelationshipType) or (
@RelationshipType = 'http://www.w3.org/2005/08/addressing/reply' )
] = $target/*:Header/wsa:MessageID)]<br />
/wsil:messageContents/*:Envelope/*:Body/*:Fault )</div>
</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Warning: One of these two conditions occurred: (a) A resent
message (reliable messaging) was not acknowledged before the
closing/termination of the RM sequence, or (b) the resent message
was faulted. In both cases, this could be a sign that the receiving
RMD did not accept the resent message: to investigate further.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0102">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0102">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>Note: there are cases where it may be obvious that
retransmitting a message is unlikey to result in an outcome that is
any different from the previous, failed transmission(s). For
example, in the case of HTTP, a 401 status code may indicate that
access to an endpoint has been refused for the credentials that
accompanied the request. Unless some action is taken to grant
access to those credentials, retransmitting the request is likely
to result in the same error and may cause negative side-effects
such as the locking of an account due to "excessive failed login
attempts".</p>
</div>
</div>
<div class="refinement">
<h4 id="Retransmission_of_Sequence_Lifecycle_Messages">3.9.2
Retransmission of Sequence Lifecycle Messages</h4>
<div class="rationale">
<p>WS-ReliableMessaging Section 2.1 defines the messages that
affect the created/closing/closed/terminating state of a Sequence
as "Sequence Lifecycle Messages". WS-RM is silent on what a SENDER
(RMS or RMD) is expected to do when it either fails to send one of
the messages or does not receive the corresponding response message
(e.g. an RMS sends a CreateSequence message but does not receive a
CreateSequenceResponse message).</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0110" id="R0110">R0110</a></span> When a <span class="statement-target">SENDER</span> fails to successfully send a
Sequence Lifecycle Message or it does not receive the corresponding
response message (if one exists), it is RECOMMENDED that the SENDER
attempt to resend the message. The frequency and number of these
retries are implementation dependent.<span class="testable-type">NOT_TESTED</span></p>
</div>
<div class="refinement">
<h4 id="Message_Identity">3.9.3 Message Identity</h4>
<div class="rationale">
<p>In cases where <code>wsa:MessageID</code> is being used,
retransmission must not alter its value, because other headers
(possibly occuring in other messages - such as
<code>wsa:RelatesTo</code> ) may rely on it for message
correlation.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0120" id="R0120">R0120</a></span> For any two <span class="statement-target">ENVELOPE</span>S that contain WS-RM Sequence
headers in which the value of their wsrm:Identifier and
wsrm:MessageNumber elements are equal, it MUST be true that neither
of the envelopes contains a wsa:MessageID or that both messages
contain a wsa:MessageID and the value of the wsa:MessageID elements
are equal.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0120">RSP0120</a></span></p>
<div style="display: none;" id="RSP0120">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0120" id="RSP0120">RSP0120</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE (with RM header)</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For any envelope with RM header, for which there exists at
least one preceeding envelope in the log with RM header featuring
same wsrm:Identifier and wsrm:MessageNumber elements,</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>either the target envelope has no wsa:MessageID and every
sibling envelope does not have one, or the target envelope has
wsa:MessageID and every sibling envelope has the same.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default: true=pass, false=fail)</td>
</tr>
<tr>
<td>Test Control:</td>
<td>MIM config: Generate message resending - e.g. by blocking Acks,
or blocking the regular messages.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0120" id="RSP0120">RSP0120</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[<br />

*:Header/wsrm:Sequence =
preceding::*:Envelope/*:Header/wsrm:Sequence]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $curenv in .
satisfies<br />
every $prevenv in preceding::*:Envelope[*:Header/wsrm:Sequence =
$curenv/*:Header/wsrm:Sequence] satisfies<br />
((not($prevenv/*:Header/wsa:MessageID) and
not($curenv/*:Header/wsa:MessageID))<br />
or<br />
$prevenv/*:Header/wsa:MessageID = $curenv/*:Header/wsa:MessageID
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A message has been resent (by an RMS), yet it had an
wsa:MessageId different from the previous sending, or the
wsa:MessageId header was present in one but not in the other.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0120">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0120">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="piggyback_acks">3.10 Piggybacking</h3>
<p>WS-ReliableMessaging allows for the addition of some
WS-RM-defined headers to messages that are targeted to the same
endpoint to which those headers are to be sent; a concept it refers
to as "piggybacking". There are a number of interoperability issues
with the practice of piggybacking.</p>
<div class="refinement">
<h4 id="Endpoint_Comparison_for_Piggybacked_SequenceAcknowledgment_Headers">
3.10.1 Endpoint Comparison for Piggybacked SequenceAcknowledgment
Headers</h4>
<div class="rationale">
<p>Because there is no standard mechanism for comparing EPRs, it is
possible for different implementations to have dissimilar
assumptions about which messages are and are not valid carriers for
piggybacked SequenceAcknowledgement headers. For example, an
implementation of the RMS may assume that the ReferenceParameters
(if any) of the EPRs will be compared as part of the determination
of whether a message is targeted to "the same" endpoint as the
AcksTo endpoint. Meanwhile an implementation of the RMD may assume
that a simple comparison of the Address IRIs is sufficient for
making this determination. This creates the possibility for
misdirected, dropped, and otherwise lost acknowledgements to the
detriment and possible malfunctioning of the WS-RM protocol.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0500" id="R0500">R0500</a></span> An <span class="statement-target">RMD</span> MUST NOT piggyback a
wsrm:SequenceAcknowledgement Header onto another message in cases
where the destination property of the carrier message contains a
wsa:Address IRI that differs (based on a simple string comparison)
from the wsa:Address IRI of the wsm:AcksTo EPR corresponding to the
wsrm:SequenceAcknowledgement.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0500">RSP0500</a></span></p>
<div style="display: none;" id="RSP0500">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0500" id="RSP0500">RSP0500</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0500" id="RSP0500">RSP0500</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR. Ack is sent back over a message with
non-empty Body, and with wsa:To header. Then the AcksTo address
value for this sequence must be same as the wsa:To address.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[<br />
*:Header[wsrm:SequenceAcknowledgement and
not(*:Header/wsse:Security//xenc:ReferenceList) and wsa:To]
and<br />
*:Body[node() and not(*:Fault) and not(wsrm:*)]] [ some $tgt in .
satisfies some $csr in
/wsil:testLog/wsil:messageLog/wsil:message//*:Envelope[*:Body/wsrm:CreateSequenceResponse][$tgt/*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> mycreateseq</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="mycreateseq">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
(*:Body/wsrm:CreateSequence and (: --- case CS/CSR not encrypted
--- :) (some $cs in . satisfies (some $csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequenceResponse]
satisfies
($target/*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier =
$csr/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier and
($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID))))) ]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsa:To =
$mycreateseq/*:Body/wsrm:CreateSequence/wsrm:AcksTo/wsa:Address</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A wsrm:SequenceAcknowledgement piggybacked on a message (with
non-empty body) was sent to a destination (wsa:To) that has an
address different from the wsrm:AcksTo value associated with this
RM sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0500">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0500">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R0501" id="R0501">R0501</a></span> In cases where the AcksTo EPR of a
Sequence has an Address value equal to the WS-Addressing 1.0
Anonymous URI, the <span class="statement-target">RMD</span> MUST
also limit piggybacking as described in section 3.9 of the
WS-ReliableMessaging specification.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0501">RSP0501</a></span></p>
<div style="display: none;" id="RSP0501">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0501" id="RSP0501">RSP0501</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>Section 3.9 of WS-RM says that, when AcksTo is anonymous, the
only way to transmit acknowledgments is over the back-channel
created by an STM that is within the sequence to which the ack
applies. The text in WS-RM applies to all acknowledgements. This
requirement highlights piggybacked acknowledgments as a special
case of this general rule. Crafting an assertion that checks for
violation of this requirement should be fairly straightforward.
However, to have any meaningful coverage, we need test scenarios
that create an environment capable of stimulating the incorrect
behavior. Essentially we need scenarios in which a single
client/RMS creates two or more sequences with a single server/RMS
using anonymous AcksTos in all the sequences and sends a either a
series of one-way message or a series of request-response messages.
To keep things simple, this later variation should not include
reliability for the response messages</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial (piggybacking difficult to stimulate).</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope in which: a. One or more SequenceAcknowledgment
headers appear. b. The Body is not empty. c. The value of wsa:To is
http://www.w3.org/2005/08/addressing/anonymous or in which wsa:To
is absent. d. Transmitted in the body of an HTTP Response.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The value of each /wsrm:SequenceAcknowledgment/wsrm:Identifier
element in the [target] matches the value of the
/wsrm:Sequence/wsrm:Identifier in the message contained in the
corresponding HTTP Request.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td>Scenario: x.x.x
Reliable_One_Way_Requests_Anon_AcksTo_Multiple_Sequences The client
creates two sequences to the service in the identical way; the
CreateSequence message contains an anonymous AcksTo and there is no
Offer. The service supports a one-way message. The client reliably
sends a number of messages to the service, alternating the sequence
for each message. Scenario: x.x.x
Reliable_Requests_Unreliable_Response_Anon_AcksTo_Multiple_Sequences
The client creates two sequences to the service in the identical
way; the CreateSequence message contains an anonymous AcksTo and
there is no Offer. The service is configured to support
reliable-request/non-reliable response. The client reliably sends a
number of messages to the service, alternating the sequence for
each message.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0501" id="RSP0501">RSP0501</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Header/wsrm:SequenceAcknowledgement and<br />
(some $tgt in . satisfies some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsrm:AcksTo/wsa:Address
= 'http://www.w3.org/2005/08/addressing/anonymous'] satisfies (some
$csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequenceResponse]
satisfies
($tgt/*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier =
$csr/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier and
($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)))) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myRequestMsg</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myRequestMsg">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[@type = 'request' and<br />
(@conversation = $target/../../@conversation or<br />
.//*:Header/wsa:MessageID =
$target//wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)]) ]</cotarget>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<prerequisite xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not
($myRequestMsg/wsil:messageContents/*:Envelope/*:Body/wsmc:MakeConnection
)</prerequisite>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">($target/../../@type =
'response') and ((every $seqack in
$target/*:Header/wsrm:SequenceAcknowledgement satisfies<br />
($seqack/wsrm:Identifier =
$myRequestMsg//*:Envelope/*:Header/wsrm:Sequence/wsrm:Identifier))
or ($target/*:Body/wsrm:TerminateSequenceResponse/wsrm:Identifier =
$myRequestMsg//*:Envelope/*:Body/wsrm:TerminateSequence/wsrm:Identifier)
or ($target/*:Body/wsrm:CloseSequenceResponse/wsrm:Identifier =
$myRequestMsg//*:Envelope/*:Body/wsrm:CloseSequence/wsrm:Identifier))
and<br />
($target/*:Header/wsa:To =
'http://www.w3.org/2005/08/addressing/anonymous' or<br />
not($target/*:Header/wsa:To) )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A sequence acknowledgement message related to an RM Sequence
defined with an AcksTo element set to wsa:AnonymousURI, was either
sent back over an HTTP request, or was sent as a response to an
HTTP request that did not carry a message sent reliably over the
same RM Sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0501">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0501">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>These requirements establish a minimum baseline for an RMD to
correctly piggyback SequenceAcknowledgement headers. Both endpoints
should expect that at minimum, an RMD can compare address IRIs
based on a simple string comparison algorithm, as indicated in the
<a href="http://www.ietf.org/rfc/rfc3987.txt" class="offsite">RFC
3987</a> section 5.3.1, in order to make the decision to piggyback
or not. Individual RMD implementations may choose to consider
and/or compare additional elements of the EndpointReference (e.g.
the value of any ReferenceParameters elements).</p>
</div>
</div>
<div class="refinement">
<h4 id="Treatment_of_ReferenceParameters_in_AcksTo_EPRs">3.10.2
Treatment of ReferenceParameters in AcksTo EPRs</h4>
<div class="rationale">
<p>There exists an interoperability problem for Sequences in which
the AcksTo EPR contains ReferenceParameters. According to the
processing rules defined by <a href="http://www.w3.org/TR/2006/REC-ws-addr-soap-20060509" class="offsite">Web Services Addressing 1.0 - SOAP Binding</a> , the RMS
should expect that any acknowledgements for the Sequence will be
accompanied by the contents of the
wsrm:AcksTo/wsa:ReferenceParameters promoted as headers in the
message carrying that acknowledgement. However, in the case of
piggybacked acknowledgments, the carrier message's [destination]
EPR may contain Reference Parameters that conflict in some way with
the wsrm:AcksTo/ReferenceParameters.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0510" id="R0510">R0510</a></span> If the algorithm used by the <span class="statement-target">RMD</span> to determine if a
SequenceAcknowledgment can be piggybacked onto another message does
not include a comparison of the value of the ReferenceParameters
element (when present), then the RMD MUST NOT piggyback
SequenceAcknowledgement headers for Sequences in which the AcksTo
EPR contains ReferenceParameters.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0510">RSP0510</a></span></p>
<div style="display: none;" id="RSP0510">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0510" id="RSP0510">RSP0510</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>As the explanatory text describes, this requirement is about
enforcing the following invariant: for Sequences in which the
AcksTo EPR contains ReferenceParameters, any message containing
SequenceAcknowledgement header(s) for such Sequences will also
contain the AcksTo/wsa:ReferenceParameters in its SOAP headers. It
is possible to create a test assertion for this requirement by
correlating SequenceAcknowlement headers against the CreateSequence
message for the Sequence to which they apply and checking for the
presence of reflected reference parameter elements. As with the
test for R0501, the problem lies in the test coverage. Without
specific knowledge of an implementation, it is difficult to guess
what might trigger it to piggyback acknowledgements. The best that
can be done is to run test scenarios that create Sequences in which
the AcksTo EPR contains reference parameters and see if there are
any cases in which the SequenceAcknowledgment is not accompanied by
the reflected reference parameter headers.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial (piggybacking difficult to stimulate).</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope in which: a. One or more SequenceAcknowledgment
headers appear. b. The Body is a not empty. c. The Sequence
identified by /wsrm:SequenceAcknowledgment/wsrm:Identifier was
created by a CreateSequence message in which
/wsrm:CreateSequence/wsrm:AcksTo/wsa:ReferenceParameters was not
empty.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The value of each child element of
/wsrm:CreateSequence/wsrm:AcksTo/wsa:ReferenceParameters must
appear as a SOAP Header in the [target] and must be annotated with
the wsa:IsReferenceParameter attribute. No other SOAP Headers
besides these should be so annotated.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td>(additional scenarios) Scenario: x.x.x
Reliable_Request_Response_AcksTo_RefParm The client creates a
sequence to the service with a CreateSequence message that contains
a non-anonymous AcksTo with ReferenceParameters. The CreateSequence
may or may not contain an Offer. The service supports reliable
requests and either reliable or non-reliable responses. The client
reliably sends a number of messages to the service. The
/wsa:ReplyTo/wsa:Address for all these request should be identical
to the /wsrm:CreateSequence/wsrm:AcksTo/wsa:Address but the
/wsa:ReplyTo/wsa:ReferenceParameters should alternate between a set
that is identical to
/wsrm:CreateSequence/wsrm:AcksTo/wsa:ReferenceParameters and a set
that is different.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0510" id="RSP0510">RSP0510</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[<br />
*:Header[wsrm:SequenceAcknowledgement and
not(*:Header/wsse:Security//xenc:ReferenceList)] and<br />
*:Body[node() and not(*:Fault) and not(wsrm:*)]] [ some $tgt in .
satisfies some $csr in
/wsil:testLog/wsil:messageLog/wsil:message//*:Envelope[*:Body/wsrm:CreateSequenceResponse][$tgt/*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> mycreateseq</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="mycreateseq">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
(*:Body/wsrm:CreateSequence and (: --- case CS/CSR not encrypted
--- :) (some $cs in . satisfies (some $csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequenceResponse]
satisfies
($target/*:Header/wsrm:SequenceAcknowledgement/wsrm:Identifier =
$csr/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier and
($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID))))) ]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
not($mycreateseq/*:Body/wsrm:CreateSequence/wsrm:AcksTo/wsa:ReferenceParameters[*])</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Warning: a SequenceAcknowledgement message is piggybacked,
while relating to a sequence with wsrm:CreateSequence/wsrm:AcksTo
value containing reference parameters. This is only allowed if the
RMD is able to compare the value of the ReferenceParameters
elements in order to determine if the piggybacking is
appropriate.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0510">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0510">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>This requirement ensures any RMS implementation that includes
ReferenceParameters in its AckTo EPRs of the following invariant:
regardless of whether or not the acknowledgments for such Sequences
are piggybacked, any message containing the SequenceAcknowledgement
header(s) for such Sequences will also contain the
AcksTo/wsa:ReferenceParameters in its SOAP headers. Note, this
requirement applies equally to Sequences for which
AcksTo/wsa:Address is anonymous and Sequences for which
AcksTo/wsa:Address is not anonymous.</p>
</div>
</div>
<div class="refinement">
<h4 id="Preventing_Piggybacked_Acknowledgements">3.10.3 Preventing
Piggybacked Acknowledgements</h4>
<div class="rationale">
<p>In situations where an RMD exercises the opportunity to
piggyback most or all of the wsrm:SequenceAcknowledgement headers
for a particular Sequence to an RMS which does not support the
processing of piggybacked acknowledgments, it is likely that the
operation of the WS-RM protocol will be severely impacted. This
situation can be avoided if the RMS takes steps to ensure that the
AcksTo EPRs for any Sequence's it creates are sufficiently unique
as to cause the RMD to rule out the possibility of piggybacking
acknowledgments for these Sequences.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0520" id="R0520">R0520</a></span> An <span class="statement-target">RMS</span> that does not support the processing
of piggybacked SequenceAcknowledgement headers MUST differentiate
the AcksTo EPRs for any Sequence's it creates from other
EPRs.<span class="testable-type">NOT_TESTABLE</span></p>
<div class="explanation">
<p>The term "differentiate" in the above requirement refers to the
process of altering the information in the EPR in such a way as to
cause the RMD to rule out the possibility of piggybacking
acknowledgments for these Sequences while preserving the RMDs
ability to connect to the proper transport endpoint. For example,
suppose a particular instance of a web services stack maintains a
generic, asynchronous callback facility at
http://b2b.foo.com/async/AsyncResponseService. In general, all the
EPRs minted by this instance for the purpose of servicing callbacks
will have this URI as the value of their wsa:Address element.
However, if this web services stack does not support the processing
piggybacked acknowledgements, the use of this value in the AcksTo
EPR creates the potential for the problem described above. The RMS
implementation of this web services stack could fulfill this
requirement by specifying
http://b2b.foo.com/async/AsyncResponseService?p={<em>unique
value</em> } as the address of the AcksTo EPR for any sequences it
creates. Since each sequence has a "different" AcksTo EPR (as
defined by R0500) from all the other services listening for
callbacks, no RSP 1.0 compliant RMD will piggyback acknowledgements
for these sequences, though each RMD (in the case of SOAP/HTTP)
will correctly connect to http://b2b.foo.com and POST to
/async/AsyncResponseService.</p>
</div>
</div>
<div class="refinement">
<h4 id="Conflicting_Requirements_for_wsa_Action">3.10.4 Conflicting
Requirements for wsa:Action</h4>
<div class="rationale">
<p>Points (2) and (3) of Section 3.3 of the WS-ReliableMessaging
state that:</p>
<dl>
<dd>2. When an Endpoint generates an Acknowledgement Message that
has no element content in the SOAP body, then the value of the
wsa:Action IRI MUST be:
http://docs.oasis-open.org/ws-rx/wsrm/200702/SequenceAcknowledgement</dd>
<dd>3. When an Endpoint generates an Acknowledgement Request that
has no element content in the SOAP body, then the value of the
wsa:Action IRI MUST be:
http://docs.oasis-open.org/ws-rx/wsrm/200702/AckRequested</dd>
</dl>
However, this text does not take into account the possibility of
piggybacking either of the above RM headers on messages with empty
SOAP Bodys that contain wsa:Action values necessary to the proper
processing of those messages. Such Envelopes could be the result of
a WSDL that contains a doc-literal description where the value of
the parts attribute of soap:body is an empty string. To clarify the
expected behavior of WS-RM nodes under these circumstances, this
profile makes the following requirement:</div>
<p class="statement"><span class="statement-id"><a name="R0530" id="R0530">R0530</a></span> In cases where the SequenceAcknowledgement
or AckRequested header is piggybacked, then the wsa:Action value of
the <span class="statement-target">ENVELOPE</span> MUST be as
defined by Section 3.3 of the WS-ReliableMessaging specification
if, and only if, the wsa:Action value has not been agreed upon by
some other mechanism (e.g. WSDL).<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0530a">RSP0530a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0530b">RSP0530b</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0530c">RSP0530c</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0530d">RSP0530d</a></span></p>
<div style="display: none;" id="RSP0530a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0530a" id="RSP0530a">RSP0530a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>The trick to testing this requirement is to define an response
operation with an empty body and a non-empty wsa:Action header and
create a situation in which this response is likely to carry a
piggybacked acknowledgement. Case 1: a wsa:Action is defined in the
WSDL for an empty response. Case 2: not so -- default in 3.3
apples.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope which: a. Corresponds to the wsdl:output
message of our test scenario (i.e. is the response to the
wsdl:input message in the test scenario). b. Has one or more
SequenceAcknowledgment headers.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The value of the wsa:Action header is as defined by wsam:Action
attribute of the wsdl:output message in the test scenario</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td>(additional scenarios) Scenario: x.x.x
Reliable_Request_Empty_Response Create a WSDL with a portType that
defines a single request-response operation. The wsdl:output of
this operation should have an empty message and a non-empty
wsam:Action attribute. A client implementation of this WSDL
reliably sends the request messages and either reliably or
non-reliably receives the response messages. So two cases are
looked at: considering an empty out message with SeqAck
piggybacked: (1) if non-empty wsam:Action in WSDL for the out
message, then a wsa:Action with same value should be in header, (2)
if no wsam:Action in WSDL for the out message, then a wsa:Action
with default 'SeqAck' value should be in.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0530a" id="RSP0530a">RSP0530a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case (a): Ack is sent back over a response message that
RelatesTo a request message in a 2-way WSDL operation.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[<br />
*:Header[wsrm:SequenceAcknowledgement and
not(//xenc:ReferenceList)] and<br />
*:Body[ not(*:Fault) and not(wsrm:*)]/* and<br />
( *:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope/*:Header/wsa:MessageID)<br />

]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBind</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBind">
//wsil:descriptionFile/wsdl:definitions/wsdl:binding/wsdl:operation<br />

[<br />
some $opb in . satisfies<br />
<br />
some $req in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
*:Header/wsa:ReplyTo or ./../../@type = 'request' ] satisfies<br />
($target/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $req/*:Header/wsa:MessageID)<br />
and (<br />
$opb/@name = local-name-from-QName(node-name($req/*:Body/*[1]))
or<br />
(some $pop in
//wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation[@name
= $opb/@name] satisfies some $dmsg in
$pop/../../wsdl:message[fn:resolve-QName(xsd:string(wsdl:part[1]/@element),
.) = fn:node-name($req/*:Body/*[1])] satisfies<br />
fn:ends-with($pop/wsdl:input/@message, $dmsg/@name) ) )
][1]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
fn:ends-with($target/*:Header/wsa:Action,
fn:concat($myOpBind[1]/@name, 'Response')) or (some $ptop in
//wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation[@name
= $myOpBind/@name] satisfies $target/*:Header/wsa:Action =
$ptop/*:output/@name)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A wsrm:SequenceAcknowledgement sent as response to a request
message mapping to a WSDL two-way operation, does not conform to
Section 3.3 of the WS-ReliableMessaging specification: it does not
have the wsa:Action conforming to the output/@name attribute (if
any) of the port definition or does not have the default value of
operation name concatenated with 'Response'.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0530a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0530a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP0530b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0530b" id="RSP0530b">RSP0530b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>The trick to testing this requirement is to define an response
operation with an empty body and a non-empty wsa:Action header and
create a situation in which this response is likely to carry a
piggybacked acknowledgement. Case 1: a wsa:Action is defined in the
WSDL for an empty response. Case 2: not so -- default in 3.3
apples.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope which: a. Corresponds to the wsdl:output
message of our test scenario (i.e. is the response to the
wsdl:input message in the test scenario). b. Has one or more
SequenceAcknowledgment headers.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The value of the wsa:Action header is as defined by wsam:Action
attribute of the wsdl:output message in the test scenario</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>(additional scenarios) Scenario: x.x.x
Reliable_Request_Empty_Response Create a WSDL with a portType that
defines a single request-response operation. The wsdl:output of
this operation should have an empty message and a non-empty
wsam:Action attribute. A client implementation of this WSDL
reliably sends the request messages and either reliably or
non-reliably receives the response messages. So two cases are
looked at: considering an empty out message with SeqAck
piggybacked: (1) if non-empty wsam:Action in WSDL for the out
message, then a wsa:Action with same value should be in header, (2)
if no wsam:Action in WSDL for the out message, then a wsa:Action
with default 'SeqAck' value should be in.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0530b" id="RSP0530b">RSP0530b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case (b): Ack is piggybacked over a (non-empty) request
message, i.e. no RelatesTo element.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[<br />
*:Header[wsrm:SequenceAcknowledgement and
not(//xenc:ReferenceList)] and<br />
*:Body[element() and not(wsmc:MakeConnection) and not(*:Fault) and
not(wsrm:*)] and<br />
not(*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)])<br />
]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBind</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBind">
//wsil:descriptionFile/wsdl:definitions/wsdl:binding/wsdl:operation<br />

[<br />
some $opb in . satisfies<br />
(<br />
$opb/@name = local-name-from-QName(node-name($target/*:Body/*[1]))
or<br />
(some $pop in
//wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation[@name
= $opb/@name] satisfies<br />
some $dmsg in
$pop/../../wsdl:message[fn:resolve-QName(xsd:string(wsdl:part[1]/@element),
.) = fn:node-name($target/*:Body/*[1])] satisfies<br />
fn:ends-with($pop/wsdl:input/@message, $dmsg/@name))<br />
) ][1]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
fn:ends-with($target/*:Header/wsa:Action, $myOpBind[1]/@name) or
(some $ptop in
//wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation[@name
= $myOpBind/@name] satisfies $target/*:Header/wsa:Action =
$ptop/*:input/@name)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A wsrm:SequenceAcknowledgement piggybacked over a request
message does not conform to Section 3.3 of the WS-ReliableMessaging
specification: it does not have the wsa:Action conforming to the
inpput/@name attribute (if any) of the port definition or does not
have the default value of operation name.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0530b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0530b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP0530c">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0530c" id="RSP0530c">RSP0530c</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>The trick to testing this requirement is to define an response
operation with an empty body and a non-empty wsa:Action header and
create a situation in which this response is likely to carry a
piggybacked acknowledgement. Case 1: a wsa:Action is defined in the
WSDL for an empty response. Case 2: not so -- default in 3.3
apples.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope which: a. Corresponds to the wsdl:output
message of our test scenario (i.e. is the response to the
wsdl:input message in the test scenario). b. Has one or more
SequenceAcknowledgment headers.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The value of the wsa:Action header is as defined by wsam:Action
attribute of the wsdl:output message in the test scenario</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>(additional scenarios) Scenario: x.x.x
Reliable_Request_Empty_Response Create a WSDL with a portType that
defines a single request-response operation. The wsdl:output of
this operation should have an empty message and a non-empty
wsam:Action attribute. A client implementation of this WSDL
reliably sends the request messages and either reliably or
non-reliably receives the response messages. So two cases are
looked at: considering an empty out message with SeqAck
piggybacked: (1) if non-empty wsam:Action in WSDL for the out
message, then a wsa:Action with same value should be in header, (2)
if no wsam:Action in WSDL for the out message, then a wsa:Action
with default 'SeqAck' value should be in.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0530c" id="RSP0530c">RSP0530c</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case (c): Ack is over an empty request message that is not a
Response, i.e. "not piggybacked": no RelatesTo element.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[<br />
*:Header/wsrm:SequenceAcknowledgement and<br />
not(*:Body/* ) and<br />
not(*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)])<br />
]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/SequenceAcknowledgement'
or ($target/*:Header/wsrm:AckRequested and
$target/*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/AckRequested'
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A wsrm:SequenceAcknowledgement sent over a message with an
empty s:Body and that is not a response message, does not have its
wsa:Action URI value set to the predefined:
"http://docs.oasis-open.org/ws-rx/wsrm/200702/SequenceAcknowledgement"</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0530c">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0530c">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP0530d">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0530d" id="RSP0530d">RSP0530d</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope with: a. MakeConnection: b. Has one or more
SequenceAcknowledgment headers.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The value of the wsa:Action header is the MC URI.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0530d" id="RSP0530d">RSP0530d</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case (b): Ack is piggybacked over a (non-empty) request
message, i.e. no RelatesTo element.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[<br />
*:Header/wsrm:SequenceAcknowledgement and<br />
*:Body/wsmc:MakeConnection ]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection'</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A wsrm:SequenceAcknowledgement piggybacked over an
MakeConnection message does not have the wsa:Action set to
http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0530d">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0530d">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Use_of_the_mustUnderstand_Attribute">3.10.5 Use of the
mustUnderstand Attribute</h4>
<div class="rationale">
<p>Since they are not allowed to interfere with the processing of
messages, piggybacked SequenceAcknowledgement and AckRequested SOAP
header blocks must not have the mustUnderstand attribute set to a
value of true. However, when the SequenceAcknowledgement and
AckRequested SOAP header blocks are sent on messages with an empty
SOAP body element and a wsa:Action SOAP header block with a
corresponding value of
http://docs.oasis-open.org/ws-rx/wsrm/200702/SequenceAcknowledgement
or http://docs.oasis-open.org/ws-rx/wsrm/200702/AckRequested (i.e.
not piggybacked), implementations are advised to set the
mustUnderstand attribute on the SequenceAcknowledgement and
AckRequested SOAP header blocks to a value of true. This ensures
that these headers are not ignored and avoids the resulting
unnecessary retransmissions.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R0540" id="R0540">R0540</a></span> <span class="statement-target">SENDER</span>s MUST NOT set the value of
mustUnderstand attribute on AckRequested and
SequenceAcknowledgement SOAP header blocks to true ("1") when those
headers are piggy-backed on outgoing MESSAGEs.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP0540">RSP0540</a></span></p>
<div style="display: none;" id="RSP0540">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP0540" id="RSP0540">RSP0540</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good(should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>An ENVELOPE containing AckRequested or
SequenceAcknowledgement</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>For any ENVELOPE containing AckRequested or
SequenceAcknowledgement, and that is piggybacked (Body not empty),
then such headers not have mustUnderstand attribute set to true
('1').</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP0540" id="RSP0540">RSP0540</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
(*:Header/wsrm:AckRequested or
*:Header/wsrm:SequenceAcknowledgement) and
not(*:Header/wsse:Security//xenc:ReferenceList ) and
*:Body[element() and not(.//*:EncryptedData) ]]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not
(*:Header/wsrm:AckRequested/attribute::*:mustUnderstand = '1') and
not (*:Header/wsrm:AckRequested/attribute::*:mustUnderstand =
'true') and not
(*:Header/wsrm:SequenceAcknowledgement/attribute::*:mustUnderstand
= '1') and not
(*:Header/wsrm:SequenceAcknowledgement/attribute::*:mustUnderstand
= 'true')</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Some message containing AckRequested or SequenceAcknowledgement
has mustUnderstand attribute set to true ('1'), while these headers
were piggybacked on another message.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP0540">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP0540">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h2 id="wssc">4. Secure Conversation</h2>
<p>The Profile includes the use of WS-SecureConversation to request
and issue security tokens and to broker trust relationships.</p>
<p>This section of the Profile incorporates the following
specifications by reference, and defines extensibility points
within them:</p>
<ul>
<li><a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html" class="offsite">WS-SecureConversation 1.4</a><br />
Extensibility points:
<ul>
<li><span id="E0011" class="statement-id">E0011</span> -
SecurityContextToken element and attribute extensions - The
SecurityContextToken element may be extended via additional
elements or attributes to indicate the use of supplemental
semantics or options that apply to the security context identified
by the token.</li>
</ul>
</li>
</ul>
<p>These extensibility points are listed, along with any
extensibility points from other sections of this Profile, in
<a href="#points">Appendix B</a></p>
<p>All requirements in Section 4 apply only when WS-Security is
used to secure a message. All requirements in Sections 4.1 through
4.5 apply only when WS-SecureConversation is used to secure a
message.</p>
<h3 id="ws-sc-support">4.1 WS-SecureConversation Support</h3>
<div class="refinement">
<h4 id="Requiring_WS-SecureConversation">4.1.1 Requiring
WS-SecureConversation</h4>
<div class="rationale">
<p>As noted in <a href="#conformance" class="offsite">Section 2</a>
, support for WS-SecureConversation by a specific service is
optional. However, a service may require the use of
WS-SecureConversation, in which case, for successful interaction
with that service, a client will need to support it.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1002" id="R1002">R1002</a></span> If an endpoint requires the use of
WS-SecureConversation, any <span class="statement-target">ENVELOPE</span> sent to that endpoint MUST
conform to Section 4 of this Profile. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1002a">RSP1002a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1002b">RSP1002b</a></span></p>
<div style="display: none;" id="RSP1002a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1002a" id="RSP1002a">RSP1002a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1002a" id="RSP1002a">RSP1002a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[/wsil:testLog/wsil:descriptionFiles//wsil:feature[@name
=
'http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/SecureConversationToken'
and @mode = 'required']] [@type =
'request']/wsil:messageContents/*:Envelope [*:Body[not(.//*:Fault)
and not(.//wsrm:* ) and not(.//*:EncryptedData) ]]
[*:Header[not(wsrm:AckRequested) and
not(wsrm:SequenceAcknowledgement) and not(.//xenc:ReferenceList)]]
[ some $myenv in . satisfies some $message in
//wsdl:definitions/wsdl:message satisfies
($message/wsdl:part[1]/@type) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding
[.//*[@style = 'rpc']]/wsdl:operation[@name =
fn:local-name-from-QName(node-name($target/*:Body/*[1]))]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/*:Header//wssc:SecurityContextToken</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an WSDL rpc-lit binding, and for which the
use of a SecurityContextToken was required, did not contain a
wssc:SecurityContextToken header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1002a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1002a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP1002b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1002b" id="RSP1002b">RSP1002b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1002b" id="RSP1002b">RSP1002b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[/wsil:testLog/wsil:descriptionFiles//wsil:feature[@name
=
'http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/SecureConversationToken'
and @mode = 'required']] [@type =
'request']/wsil:messageContents/*:Envelope [*:Body[not(.//*:Fault)
and not(.//wsrm:* ) and not(.//*:EncryptedData) ]]
[*:Header[not(wsrm:AckRequested) and
not(wsrm:SequenceAcknowledgement) and not(.//xenc:ReferenceList)]]
[some $myenv in . satisfies ( every $message in
//wsdl:definitions/wsdl:message satisfies (
(not($message/wsdl:part[1]/@type) ) and ( $myenv/*:Body/*[1] or
$myenv/*:Header/wsa:Action )) ) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding/wsdl:operation
[ some $opBinding in . satisfies (if ($target/*:Body/*[1] ) then
(some $dmesg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:message[wsdl:part[fn:resolve-QName(xsd:string(@element),
. ) = fn:node-name($target/*:Body/*[1])] ] satisfies some $dopmsg
in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
[fn:local-name-from-QName(fn:resolve-QName(xsd:string(@message), .
)) = $dmesg/@name] satisfies $opBinding/@name = $dopmsg/../@name )
else fn:true() ) and ( if ($target/*:Header/wsa:Action) then ( some
$opmsg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
satisfies ($target/*:Header/wsa:Action = ( if ($opmsg/@wsam:Action)
then $opmsg/@wsam:Action else
fn:concat($opmsg/../../../@targetNamespace, if
(not(fn:ends-with($opmsg/../../../@targetNamespace,'/'))) then '/'
else '', $opmsg/../../@name, '/', if($opmsg/@name) then
$opmsg/@name else fn:concat($opmsg/../@name, 'Request' ) ) ) ) and
( $opBinding/@name = $opmsg/../@name ) ) else fn:true() )
]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/*:Header//wssc:SecurityContextToken</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an WSDL doc-lit binding, and for which the
use of a SecurityContextToken was required, did not contain a
wssc:SecurityContextToken header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1002b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1002b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1003" id="R1003">R1003</a></span> If an endpoint requires or supports the
use of WS-SecureConversation, the corresponding <span class="statement-target">INSTANCE</span> MUST behave in accordance with
Section 4 of this Profile. <span class="testable-type">NOT_TESTABLE</span></p>
<div class="explanation">
<p>Note that two RSP compliant web services implementations might
both support the use of WS-SecureConversation yet fail to agree on
a common set of features necessary to interact with one another.
For example, a service might require the use of a particular cipher
suite that a client is not equipped to support.</p>
</div>
</div>
<h3 id="ws-sc-optionality">4.2 Optionality of Operations</h3>
<p>WS-SecureConversation (WS-SC) describes a set of bindings of
WS-Trust for amending, renewing, and canceling security contexts.
WS-SC does not define whether support for these bindings is
mandatory or optional, for either clients or services. This creates
the potential for interoperability problems due to differing
expectations about such support. The following requirements clarify
the optionality of the SCT Amend, Renew, and Cancel bindings.</p>
<div class="refinement">
<h4 id="Support_for_Amending_Contexts">4.2.1 Support for Amending
Contexts</h4>
<div class="rationale">
<p>As of the date of this Profile, there are no known
implementations of WS-SC that support the SCT Amend binding.
CONSUMERS are advised to avoid its use unless they are certain that
the target INSTANCE supports it.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1004" id="R1004">R1004</a></span> A <span class="statement-target">CONSUMER</span> SHOULD NOT send an ENVELOPE
containing a <code>wst:RequestSecurityToken</code> in the SOAP Body
and an action URI of
<code>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Amend</code>.
<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1004">RSP1004</a></span></p>
<div style="display: none;" id="RSP1004">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1004" id="RSP1004">RSP1004</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This assertion checks for the use of the WS-SC Amend binding
and logs a warning.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wst:RequestSecurityToken
or *:Body/xenc:EncryptedData]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not
($target/*:Header/wsa:Action='http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Amend')</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>preferred</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The request uses the SCT Amend binding. Verify that the service
supports this binding.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1004">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1004">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Support_for_Renewing_Contexts">4.2.2 Support for Renewing
Contexts</h4>
<div class="rationale">
<p>Support for the SCT Renew binding is elective for both CONSUMERs
and INSTANCEs.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1005" id="R1005">R1005</a></span> An <span class="statement-target">INSTANCE</span> that acts as a WS-SC security
token service MAY process ENVELOPEs containing a
<code>wst:RequestSecurityToken</code> in the SOAP Body and an
action URI of
<code>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew</code>
as per <a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html#_Toc212627285" class="offsite">Section 5 of WS-SecureConversation</a>.
<span class="testable-type">NOT_TESTABLE</span></p>
<p class="statement"><span class="statement-id"><a name="R1006" id="R1006">R1006</a></span> An <span class="statement-target">INSTANCE</span> that acts as a WS-SC security
token service but does not process ENVELOPEs containing a
<code>wst:RequestSecurityToken</code> in the SOAP Body and an
action URI of
<code>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew</code>
as per <a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html#_Toc212627285" class="offsite">Section 5 of WS-SecureConversation</a> MUST
generate a fault with a [Subcode] value of
"<code>wsa:ActionNotSupported</code>" (as per <a href="http://www.w3.org/TR/2006/REC-ws-addr-soap-20060509/#actionfault" class="offsite">Section 6.4.4 of WS-Addressing 1.0 SOAP
Binding</a>) upon receiving a MESSAGE containing such an ENVELOPE.
<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1006a">RSP1006a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1006b">RSP1006b</a></span></p>
<div style="display: none;" id="RSP1006a">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1006a" id="RSP1006a">RSP1006a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This assertion examines the response to an SCT/Renew request
and, if that response is not a fault, makes sure that it meets the
basic criteria of a "proper" response (as defined by WS-SC).</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsa:Action='http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew']
[(*:Body/wst:RequestSecurityToken or
*:Body/xenc:EncryptedData)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target/*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<prerequisite xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not
($myresponse/*:Body/*:Fault)</prerequisite>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">($myresponse/*:Header/wsa:Action
= 'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/SCT/Renew'
and
$myresponse/*:Body//wst:RequestSecurityTokenResponse)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The service responded to a request to renew a security context
with something other than the correct response.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1006a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1006a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP1006b">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1006b" id="RSP1006b">RSP1006b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This assertion examines the response to an SCT/Renew request
and, if that response is fault, makes sure that it is a
wsa:ActionNotSupported fault. Because there are many reasons for a
fault to be generated, this assertion only logs a warning in case
the fault had some other cause than the services inability to
support SCT/Renew.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsa:Action='http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew']
[(*:Body/wst:RequestSecurityToken or
*:Body/xenc:EncryptedData)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target/*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<prerequisite xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$myresponse/*:Body/*:Fault</prerequisite>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<!-- assume either a SOAP 1.1 or a SOAP 1.2 body (tested for by RSP8001) -->
( if ($myresponse/soap11:Body)<br />
then ( fn:ends-with($myresponse/soap11:Body/soap11:Fault/faultcode,
'ActionNotSupported') ) else (
fn:ends-with($myresponse/soap12:Body/soap12:Fault/soap12:Code/soap12:Value,
'Sender') and
fn:ends-with($target/soap12:Body/soap12:Fault/soap12:Code/soap12:Subcode/soap12:Value,
'ActionNotSupported') ) )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A request to renew a security context received a fault response
other than "wsa:ActionNotSupported". This could be due to some
problem with the request, some problem with the service, or it
could be due to incorrect error reporting behavior on the part of
the service. If the service is attempting to indicate that it does
not support the WS-SC Renew operation via some other fault than the
wsa:ActionNotSupported fault, it is non-conformant with R1006 of
RSP 1.0.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1006b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1006b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Support_for_Canceling_Contexts">4.2.3 Support for Canceling
Contexts</h4>
<div class="rationale">
<p>Support for the SCT Cancel binding is mandatory for INSTANCEs
and elective for CONSUMERs.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1007" id="R1007">R1007</a></span> An <span class="statement-target">INSTANCE</span> that acts as a WS-SC security
token service MUST process ENVELOPEs containing a
<code>wst:RequestSecurityToken</code> in the SOAP Body and an
action URI of
<code>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel</code>
as per <a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html#_Toc212627286" class="offsite">Section 6 of WS-SecureConversation</a>.
<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1007a">RSP1007a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1007b">RSP1007b</a></span></p>
<div style="display: none;" id="RSP1007a">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1007a" id="RSP1007a">RSP1007a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This assertion examines the response to an SCT/Cancel request
and checks for the wsa:ActionNotSupported fault response. Such a
fault unambiguously indicates that the SCT/Cancel binding is NOT
supported by the service, which violates R1007. This assertion
assumes that the client is trasmitting the SCT/Cancel request to
the appropriate endpoint i.e. that the service is acting as a
security token service.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsa:Action='http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel']
[(*:Body/wst:RequestSecurityToken or
*:Body/xenc:EncryptedData)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target/*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<!-- assume either a SOAP 1.1 or a SOAP 1.2 body (tested for by RSP8001) -->
(not (if ($myresponse/soap11:Body)<br />
then ( fn:ends-with($myresponse/soap11:Body/soap11:Fault/faultcode,
'ActionNotSupported') ) else (
fn:ends-with($myresponse/soap12:Body/soap12:Fault/soap12:Code/soap12:Value,
'Sender') and
fn:ends-with($myresponse/soap12:Body/soap12:Fault/soap12:Code/soap12:Subcode/soap12:Value,
'ActionNotSupported') ) ) )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A request to cancel a security context received a
wsa:ActionNotSupported fault response, which indicates that the
SCT/Cancel binding is not supported by the service. This indicates
that the service does not conform to R1007 of RSP 1.0.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1007a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1007a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP1007b">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1007b" id="RSP1007b">RSP1007b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This assertion examines the response to an SCT/Cancel request
and checks for the appropriate, WS-SC-defined response. The lack of
such a response might indicate that the service does not support
the SCT/Cancel binding, which would violate R1007. This assertion
assumes that the client is trasmitting the SCT/Cancel request to
the appropriate endpoint i.e. that the service is acting as a
security token service. It also relies on RSP1007a as a
prerequisite. This avoids double-reporting the behavior that
RSP1007a checks for.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsa:Action='http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel']
[(*:Body/wst:RequestSecurityToken or
*:Body/xenc:EncryptedData)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myresponse</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myresponse">
/wsil:testLog/wsil:messageLog/wsil:message[<br />
(@type = 'response' and @conversation =
$target/../../@conversation) or<br />
(.//*:Envelope/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =<br />
$target/*:Header/wsa:MessageID)<br />
]<br />
/wsil:messageContents/*:Envelope</cotarget>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP1007a</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">($myresponse/*:Header/wsa:Action
=
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/SCT/Cancel'
and $myresponse/*:Body//wst:RequestedTokenCancelled)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A request to cancel a security context did not receive the
appropriate response. This might indicate that the service does not
support the SCT/Cancel binding, which would violate R1007 of RSP
1.0. Check the response to determine if it is the result of some
problem other than the services inability to support the SCT/Cancel
binding.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1007b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1007b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1008" id="R1008">R1008</a></span> When a <span class="statement-target">CONSUMER</span> concludes its use of a security
context it SHOULD transmit an ENVELOPE containing a
<code>wst:RequestSecurityToken</code> in the SOAP Body and an
action URI of
<code>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel</code>
to the WS-SC security token service that issued the SCT for that
context. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1008">RSP1008</a></span></p>
<div style="display: none;" id="RSP1008">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1008" id="RSP1008">RSP1008</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>This assertion checks for the presence of an SCT request and
checks for the corresponding SCT/Cancel. The lack of an SCT/Cancel
indicates either that the log file did not capture all of the
messages in the interaction between the client and server, or that
the client simply neglected to send a SCT/Cancel request. The
latter indicates a issue with R1008, which states that clients
SHOULD cancel their security contexts.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body//wst:RequestSecurityTokenResponse
and *:Header/wsa:Action =
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/SCT']</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wst:RequestSecurityToken
and
*:Header/wsa:Action='http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel']
[*:Body//wst:RequestSecurityToken/wst:CancelTarget/wsse:SecurityTokenReference/wsse:Reference/@URI
=
$target/*:Body//wst:RequestSecurityTokenResponse/wst:RequestedSecurityToken/wssc:SecurityContextToken/wssc:Identifier]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>preferred</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A client requested and obtained a security context that it
never subsequently canceled. Verify that the log contains a
complete record of the clients interaction with the service and
that the cancel request was not missed. If the log is complete and
there are no missing messages, the fact that the client did not
cancel the security context both increases the risk of that
security context being compromised and consumes additional
resources on the service.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1008">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1008">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="unsupported_tokens">4.3 Unsupported Context Tokens</h3>
<div class="refinement">
<h4 id="Unrecognized_Extensions_in_a_Security_Context_Token">4.3.1
Unrecognized Extensions in a Security Context Token</h4>
<div class="rationale">
<p>During the establishment of a security context, it is possible
for a participant to obtain an SCT that, for some reason, it
chooses not to accept. One such possible reason is the presence of
unrecognized extensions which, by definition, may indicate unknown
and possibly harmful semantics. If the RECEIVER chooses to accept
such an SCT, however, it must preserve this unrecognized content or
nodes that understand and depend on this content may break.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1000" id="R1000">R1000</a></span> A <span class="statement-target">RECEIVER</span> MAY not accept an SCT due to
unrecognized extensions in exception to R0001.<span class="testable-type">NOT_TESTED</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1000">RSP1000</a></span></p>
<div style="display: none;" id="RSP1000">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1000" id="RSP1000">RSP1000</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1: We are not sure how to stimulate this fault. we might be
able to send a particular token that we do not expect any service
to (willingly) support. or we could send all of the type of well
known tokens and report those that are not supported by a
particular implementation report this specific fault. can test only
those tokens we make up or know about (cannot test all potential
custom tokens)</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE (Fault)</td>
</tr>
<tr>
<td>Test Target:</td>
<td>fault returned instead of response to unknown RST, (correlation
done with wsa)</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>Exists a Fault message that correlates, with faultcode=stated
in requirement</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td>Test Control:</td>
<td>generate (or MIM intercept and corrupt) RST that can't be
supported.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1000" id="RSP1000">RSP1000</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td></td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1000">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1000">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1001" id="R1001">R1001</a></span> If a <span class="statement-target">RECEIVER</span> obtains an SCT containing
content it does not recognize, the RECEIVER MUST preserve this
unrecognized content in all subsequent use of the
token.<span class="testable-type">TESTABLE_SCENARIO_DEPENDENT</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP1001">RSP1001</a></span></p>
<div style="display: none;" id="RSP1001">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1001" id="RSP1001">RSP1001</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>This is a scenario-dependent TA: it only triggers on
"non-recognized" content of a certain kind: element with a
namespace = http://dummy.example.org/unknown/nmspace</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with an SCT that has been obtained from a
previous RSTR message, where the SCT did first appear with an
unrecognizable content</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The used SCT still has the same unrecognizable content.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>scenario to provide context.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1001" id="RSP1001">RSP1001</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[ some $sct in *:Header//wssc:SecurityContextToken satisfies<br />
some $sct0 in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope//wst:RequestSecurityTokenResponse//wssc:SecurityContextToken
satisfies<br />
$sct0/wssc:Identifier = $sct/wssc:Identifier<br />
and<br />
(some $elt in $sct0//* satisfies<br />
string(fn:namespace-uri($elt)) =
'http://dummy.example.org/unknown/nmspace')<br />
]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $elt in
$target/*:Header//wssc:SecurityContextToken//* satisfies<br />
string(fn:namespace-uri($elt)) =
'http://dummy.example.org/unknown/nmspace'</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An Envelope with an SCT that originally contained an
unrecognizable content (with unrecognizable namespace:
http://dummy.example.org/unknown/nmspace') has been stripped from
this unrecognizable content when reused.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1001">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1001">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>R1001 goes beyond R0001 (which does not require preservation of
unrecognized content) to bring forward requirements from the
WS-SecureConversation specification. R1000 has precedence over
R1001 since an INSTANCE which faulted due to unrecognized content
would not subsequently use the relevant token.</p>
</div>
</div>
<h3 id="proof_of_possession">4.4 Demonstrating Proof of
Possession</h3>
<p>The following requirements describe how, for ENVELOPEs carrying
a wst:RequestSecurityToken, the SOAP Body and crucial headers,
specified in Section 4.5 and Section 6, must be signed.</p>
<div class="refinement">
<h4 id="Amending_Contexts">4.4.1 Amending Contexts</h4>
<p class="statement"><span class="statement-id"><a name="R1100" id="R1100">R1100</a></span> An <span class="statement-target">ENVELOPE</span> containing a
wst:RequestSecurityToken in the SOAP Body and an action URI of
http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Amend,
MUST also contain a wsse:Security header with a ds:Signature child
element that covers the SOAP Body and crucial headers as specified
in Sections 4.5 and 6.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP1100">RSP1100</a></span></p>
<div style="display: none;" id="RSP1100">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1100" id="RSP1100">RSP1100</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1: the predicate is weaker than the profile req, hence
true=undetermined, but false= a sure failure.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE (with wst:RST)</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with RST and action URI=....</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>It has Security header that references SOAP body.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=undetermined, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Text env: must implement RMS-&gt;scenario to generate the TA
context</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1100" id="RSP1100">RSP1100</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body//wst:RequestSecurityToken and<br />
*:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Amend']</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $dsig in
$target/*:Header/wsse:Security//ds:Signature satisfies<br />
($dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/@wsu:Id])<br />
or (
<div style="margin-left: 2em">
($dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/*:Header/@wsu:Id] or<br />
(every $cruxp in $target/*:Header/wsrm:* | $target/*:Header/wsa:*
satisfies<br />
some $ref in $dsig//ds:Reference satisfies<br />
fn:substring-after($ref/@URI, '#') = $cruxp/@wsu:Id))</div>
and (
<div style="margin-left: 2em">
$dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/*:Body/@wsu:Id] or<br />
(every $cruxp in $target/*:Body/* satisfies<br />
some $ref in $dsig//ds:Reference satisfies<br />
fn:substring-after($ref/@URI, '#') = $cruxp/@wsu:Id ))</div>
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An ENVELOPE containing a wst:RequestSecurityToken for amending
a Security Context, does not contain a Signature element in a wsse
header that references both the SOAP body (using @wsu:Id) and
crucial wsrm or wsa headers.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1100">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1100">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1101" id="R1101">R1101</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R1100 MUST be created using the key associated with the security
context that is being amended.<span class="testable-type">NOT_TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#COM1101">COM1101</a></span></p>
<div style="display: none;" id="COM1101">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="COM1101" id="COM1101">COM1101</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>untestable due to key comparison issue. Same for R1111,
R1121.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="COM1101" id="COM1101">COM1101</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td></td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryCOM1101">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryCOM1101">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Renewing_Contexts">4.4.2 Renewing Contexts</h4>
<p class="statement"><span class="statement-id"><a name="R1110" id="R1110">R1110</a></span> An <span class="statement-target">ENVELOPE</span> containing a
wst:RequestSecurityToken in the SOAP Body and an action URI of
http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew,
MUST also contain a wsse:Security header with a ds:Signature child
element that covers the SOAP Body and crucial headers as specified
in Sections 4.5 and 6.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP1110">RSP1110</a></span></p>
<div style="display: none;" id="RSP1110">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1110" id="RSP1110">RSP1110</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1: the predicate is weaker than the profile req, hence
true=undetermined, but false= a sure failure.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with RST and action URI=....</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>It has Security header that references SOAP body.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=undetermined, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Text env: must implement RMS-&gt;scenario to generate the TA
context</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1110" id="RSP1110">RSP1110</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body//wst:RequestSecurityToken and *:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew']</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $dsig in
$target/*:Header/wsse:Security//ds:Signature satisfies<br />
($dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/@wsu:Id])<br />
or (
<div style="margin-left: 2em">
($dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/*:Header/@wsu:Id] or (every $cruxp in
$target/*:Header/wsrm:* | $target/*:Header/wsa:* satisfies<br />
some $ref in $dsig//ds:Reference satisfies<br />
fn:substring-after($ref/@URI, '#') = $cruxp/@wsu:Id))</div>
and (
<div style="margin-left: 2em">
$dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/*:Body/@wsu:Id] or<br />
(every $cruxp in $target/*:Body/* satisfies<br />
some $ref in $dsig//ds:Reference satisfies<br />
fn:substring-after($ref/@URI, '#') = $cruxp/@wsu:Id ))</div>
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=warning, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An ENVELOPE containing a wst:RequestSecurityToken for renewing
a Security Context, does not contain a Signature element in a wsse
header that references both the SOAP body (using @wsu:Id) and
crucial wsrm or wsa headers.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1110">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1110">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1111" id="R1111">R1111</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R1110 MUST be created using the key associated with the security
context that is being renewed.<span class="testable-type">NOT_TESTABLE</span></p>
</div>
<div class="refinement">
<h4 id="Cancelling_Contexts">4.4.3 Cancelling Contexts</h4>
<p class="statement"><span class="statement-id"><a name="R1120" id="R1120">R1120</a></span> An <span class="statement-target">ENVELOPE</span> containing a
wst:RequestSecurityToken in the SOAP Body and an action URI of
http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel,
MUST also contain a wsse:Security header with a ds:Signature child
element that covers the SOAP Body and crucial headers as specified
in Sections 4.5 and 6.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP1120">RSP1120</a></span></p>
<div style="display: none;" id="RSP1120">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1120" id="RSP1120">RSP1120</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1: the predicate is weaker than the profile req, hence
true=undetermined, but false= a sure failure.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with RST and action URI=....</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>It has Security header that references SOAP body.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=undetermined, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Text env: must implement RMS-&gt;scenario to generate the TA
context</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1120" id="RSP1120">RSP1120</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body//wst:RequestSecurityToken and *:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Cancel']</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $dsig in
$target/*:Header/wsse:Security//ds:Signature satisfies<br />
($dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/@wsu:Id])<br />
or (
<div style="margin-left: 2em">
($dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/*:Header/@wsu:Id] or<br />
(every $cruxp in $target/*:Header/wsrm:* | $target/*:Header/wsa:*
satisfies<br />
some $ref in $dsig//ds:Reference satisfies<br />
fn:substring-after($ref/@URI, '#') = $cruxp/@wsu:Id))</div>
and (
<div style="margin-left: 2em">
$dsig//ds:Reference[fn:substring-after(@URI, '#') eq
$target/*:Body/@wsu:Id] or<br />
(every $cruxp in $target/*:Body/* satisfies<br />
some $ref in $dsig//ds:Reference satisfies<br />
fn:substring-after($ref/@URI, '#') = $cruxp/@wsu:Id ))</div>
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=warning, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An ENVELOPE containing a wst:RequestSecurityToken for canceling
a Security Context, does not contain a Signature element in a wsse
header that references both the SOAP body (using @wsu:Id) and
crucial wsrm or wsa headers.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1120">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1120">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1121" id="R1121">R1121</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R1120 MUST be created using the key associated with the security
context that is being canceled.<span class="testable-type">NOT_TESTABLE</span></p>
</div>
<h3 id="claims_reauthentication">4.5 Claims Re-Authentication</h3>
<div class="refinement">
<h4 id="Re-Authenticating_Claims">4.5.1 Re-Authenticating
Claims</h4>
<div class="rationale">
<p>As per section 5 of the WS-SecureConversation specification, the
request to renew a security context must include the
re-authentication of the context's original claims. It is
recommended, but not required, that the claims re-authentication be
done in the same manner as the original token issuance request.
This creates the potential for some implementations of
WS-SecureConversation to attempt claims re-authentication in a
manner different than the original token issuance request, to the
obvious detriment of both interoperability and security.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1200" id="R1200">R1200</a></span> When a <span class="statement-target">SENDER</span> makes a request to renew a
security context, it MUST re-authenticate the original claims in
the same way as in the original token issuance request.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1200">RSP1200</a></span></p>
<div style="display: none;" id="RSP1200">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1200" id="RSP1200">RSP1200</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with RST/SCT/renew action URI</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>It correlates with RSTR/SCT that correlates with original RST
and renew that has auth mechanism</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=warning, false=warning</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1200" id="RSP1200">RSP1200</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[./*:Body//wst:RequestSecurityToken
and ./*:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT/Renew']</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOriginalRSTR</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOriginalRSTR">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body//wst:RequestSecurityTokenResponse
and *:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/SCT']
[*:Body//wst:RequestSecurityTokenResponse/wst:RequestedSecurityToken/wssc:SecurityContextToken/wssc:Identifier
=
$target/*:Body//wst:RequestSecurityToken/wst:RenewTarget/wsse:SecurityTokenReference/wsse:Reference/@URI
]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body//wst:RequestSecurityToken
and *:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT']
[(../../@conversation = $myOriginalRSTR/../../@conversation) or
($myOriginalRSTR/*:Header/wsa:RelatesTo[not (@RelationshipType) or
( @RelationshipType = 'http://www.w3.org/2005/08/addressing/reply'
)] = ./*:Header/wsa:MessageID)
]/*:Header/wsse:Security/ds:Signature/ds:KeyInfo//wsse:Reference/@URI
=
$target/*:Header/wsse:Security/ds:Signature/ds:KeyInfo//wsse:Reference/@URI</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A renew security context message did not correlate with an
original RST token issuance request that used the same
authentication mechanism - i.e. here a Signature with KeyInfo that
refer to same certificate ID.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1200">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1200">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="ref_sct">4.6 Referencing Security Context Tokens</h3>
<div class="refinement">
<h4 id="Associating_a_Security_Context">4.6.1 Associating a
Security Context</h4>
<div class="rationale">
<p>Section 8 of WS-SecureConversation states that references to an
SCT from within a <code>wsse:Security</code> header, a
<code>wst:RequestSecurityToken</code> element, or a
<code>wst:RequestSecurityTokenReponse</code> element may be either
message dependent or message independent. However, references to
SCTs from outside a <code>wsse:Security</code> header (or an RST,
or an RSTR) must be message independent. In order to improve
interoperability, this profile includes the following
requirement:</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1300" id="R1300">R1300</a></span> A <span class="statement-target">RECEIVER</span> MUST support both message
dependent and message independent references to a
wssc:SecurityContextToken from within a wsse:Security header, a
wst:RequestSecurityToken element, or a
wst:RequestSecurityTokenReponse element.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1300">RSP1300</a></span></p>
<div style="display: none;" id="RSP1300">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1300" id="RSP1300">RSP1300</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>NOTE1:Type=Feature Usage. NOTE2: investigate ways at improving
the context. NOTE3: coverage is good, but possiblemany false
negatives</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with wssc:Security or RST or RSTR and with SCT
refs</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>In the envelope, there exists wssc:STR/ref [@URI does not start
with "#"]</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=warning</td>
</tr>
<tr>
<td>Test Control:</td>
<td>scenario to provide context.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1300" id="RSP1300">RSP1300</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security//wssc:SecurityContextToken
or .//wst:RequestSecurityTokenReponse//wssc:SecurityContextToken or
.//wst:RequestSecurityToken//wssc:SecurityContextToken][.//wsse:SecurityTokenReference/wsse:Reference/@URI]
[some $tgt in . satisfies some $resp in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope
satisfies ($resp/../../@conversation = $tgt/../../@conversation) or
($resp/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $tgt/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not(
wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[(./../../@conversation
= $target/../../@conversation) or
(*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] =
$target/*:Header/wsa:MessageID)][*:Body/*:Fault] )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An Envelope with wssc:Security or RST or RSTR and with
SecurityContextToken that have either message dependent or
independent message references, has been Faulted. User should
verify that it is not faulted because of the receiver not
supporting some type of message reference (either message dependent
or independent message reference)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1300">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1300">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Derived_Token_References_to_Security_Contexts">4.6.2
Derived Token References to Security Contexts</h4>
<div class="rationale">
<p>Section 7 of the WS-SecureConversation specification describes a
mechanism for using keys derived from a shared secret for signing
and encrypting the messages associated with a security context. The
<code>wssc:DerivedKeyToken</code> element is used to express these
derived keys. WS-SC states that the
<code>/wssc:DerivedKeyToken/wsse:SecurityTokenReference</code>
element SHOULD be used to reference the
<code>wssc:SecurityContextToken</code> of the security context
who's shared secret was used to derive the key. This creates an
interoperability issue because it leaves open the possibility for a
derived key to either lack any relationship between the shared
secret or for this relationship to be expressed by some mechanism
other than a wsse:SecurityTokenReference.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1310" id="R1310">R1310</a></span> When an <span class="statement-target">ENVELOPE</span> contains a wssc:DerivedKeyToken,
the wsse:SecurityTokenReference element MUST be used to reference
the wssc:SecurityContextToken of the security context from which
they key is derived.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP1310">RSP1310</a></span></p>
<div style="display: none;" id="RSP1310">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1310" id="RSP1310">RSP1310</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with wsc:DKT</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>there exists DKT/STR and there exists a message with
(SCT/identifier=STR/Refrence@URI)</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1310" id="RSP1310">RSP1310</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security//wssc:DerivedKeyToken/wsse:SecurityTokenReference]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">(some $rstr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope
satisfies $rstr/*:Header/wsa:Action eq
'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/SCT' ) and
$target/*:Header/wsse:Security//wssc:DerivedKeyToken/wsse:SecurityTokenReference/wsse:Reference/@URI</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=warning, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>In case of warning: the test is inconclusive as the related
RequestSecurityTokenResponse content could not be accessed. In case
of failure: an Envelope with wsc:DerivedKeyToken does not refer
(with wsse:SecurityTokenReference) to a wssc:SecurityContextToken
returned in a RequestSecurityTokenResponse message, or the related
RequestSecurityTokenResponse message is missing.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1310">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1310">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>To properly and interoperably process derived keys it is
necessary to relate the key to the shared secret from which it is
derived. There are no alternatives to using
wsse:SecurityTokenReference's that are consistent with
WS-Security.</p>
</div>
</div>
<h3 id="wsa_headers">4.7 Addressing Headers</h3>
<div class="refinement">
<h4 id="Protecting_Addressing_Headers">4.7.1 Protecting Addressing
Headers</h4>
<div class="rationale">
<p>Since the semantics of the WS-SecureConversation protocol are
dependent upon the value of various WS-Addressing headers, ensuring
the proper functioning of WS-SecureConversation requires protecting
the integrity of these headers. These requirements are not specific
to the use of WS-SecureConversation. They also apply whenever
WS-Security is being used in conjunction with WS-Addressing.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R1400" id="R1400">R1400</a></span> When present in an <span class="statement-target">ENVELOPE</span> in which the SOAP Body in that
ENVELOPE is signed, each of the following SOAP header blocks MUST
be included in a signature: <code>wsa:To</code>,
<code>wsa:From</code>, <code>wsa:ReplyTo</code>,
<code>wsa:Action</code>, <code>wsa:FaultTo</code>,
<code>wsa:MessageId</code>, <code>wsa:RelatesTo</code>.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1400">RSP1400</a></span></p>
<div style="display: none;" id="RSP1400">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1400" id="RSP1400">RSP1400</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with a signed body and some wsa headers.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1400" id="RSP1400">RSP1400</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
some $tgt in . satisfies some $ref in
*:Header/wsse:Security//ds:Signature//ds:Reference satisfies
(fn:substring-after($ref/@URI, '#') = $tgt/*:Body/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $tgt/@wsu:Id )]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') =
$target/*:Header/@wsu:Id or fn:substring-after($ref/@URI, '#') =
$target/@wsu:Id ) or ( every $wsah in $target/*:Header/wsa:*
satisfies some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$wsah/@wsu:Id))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The SOAP Body of a message is signed but some ws-addressing
header is not.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1400">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1400">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1401" id="R1401">R1401</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature(s) referred to in
R1400 MUST be coupled cryptographically (e.g. share a common
signature) with the message body.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1401">RSP1401</a></span></p>
<div style="display: none;" id="RSP1401">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1401" id="RSP1401">RSP1401</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault. a SOAP11 fault that has in its
detail element wsrm identifier that refers to a known Secured
Seq</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1401" id="RSP1401">RSP1401</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security
and *:Header/wsa:*]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP1400</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) or
( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$target/*:Body/@wsu:Id and (every $wsah in $target/*:Header/wsa:*
satisfies some $ref2 in $ref/../ds:Reference satisfies (
fn:substring-after($ref2/@URI, '#') = $wsah/@wsu:Id)) )
)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Some ws-addressing header is not signed with the same signature
as the Body of the message (based on @wsu:Id references).</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1401">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1401">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1402" id="R1402">R1402</a></span> When present in an <span class="statement-target">ENVELOPE</span> in which the SOAP Body in that
ENVELOPE is signed, SOAP Header blocks with the
wsa:isReferenceParameter attribute MUST be included in a signature
for their designated SOAP role.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1402">RSP1402</a></span></p>
<div style="display: none;" id="RSP1402">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1402" id="RSP1402">RSP1402</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with a signed body and some wsa headers.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1402" id="RSP1402">RSP1402</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/*/@wsa:IsReferenceParameter][
some $tgt in . satisfies some $ref in
*:Header/wsse:Security//ds:Signature//ds:Reference satisfies
(fn:substring-after($ref/@URI, '#') = $tgt/*:Body/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $tgt/@wsu:Id )]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') =
$target/*:Header/@wsu:Id or fn:substring-after($ref/@URI, '#') =
$target/@wsu:Id ) or ( every $rfp in
$target/*:Header/*[@wsa:IsReferenceParameter] satisfies some $ref
in $target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$rfp/@wsu:Id))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The SOAP Body of a message is signed but some ws-addressing
reference parameter header block is not.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1402">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1402">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R1403" id="R1403">R1403</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature(s) referred to in
R1402 MUST be coupled cryptographically (e.g. share a common
signature) with the message body.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP1403">RSP1403</a></span></p>
<div style="display: none;" id="RSP1403">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP1403" id="RSP1403">RSP1403</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault. a SOAP11 fault that has in its
detail element wsrm identifier that refers to a known Secured
Seq</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP1403" id="RSP1403">RSP1403</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security
and *:Header/*/@wsa:IsReferenceParameter]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP1402</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) or
( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$target/*:Body/@wsu:Id and (every $rfp in
$target/*:Header/*[@wsa:IsReferenceParameter] satisfies some $ref2
in $ref/../ds:Reference satisfies ( fn:substring-after($ref2/@URI,
'#') = $rfp/@wsu:Id)) ) )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Some ws-addressing reference parameter header block is not
signed with same signature as the SOAP Body of the message (based
on @wsu:Id references).</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP1403">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP1403">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h2 id="makeconnection">5. MakeConnection</h2>
<p>The Profile includes the use of WS-MakeConnection to transfer
messages using a transport-specific back-channel.</p>
<p>This section of the Profile incorporates the following
specifications by reference, and defines extensibility points
within them:</p>
<ul>
<li><a href="http://docs.oasis-open.org/ws-rx/wsmc/200702/wsmc-1.1-spec-os.html" class="offsite">Web Services Make Connection 1.1</a><br />
Extensibility points:
<ul>
<li><span id="E0012" class="statement-id">E0012</span> -
MakeConnection element and attribute extensions - The
MakeConnection element may be extended via additional elements or
attributes to indicate the use of supplemental semantics or options
that apply to the request.</li>
<li><span id="E0013" class="statement-id">E0013</span> - Attribute
extensions to the MakeConnection Address - The
/wsmc:MakeConnection/wsmc:Address element may be extended via
additional attributes to indicate the use of supplemental semantics
or options that apply to this instance of the MakeConnection
Anonymous URI</li>
<li><span id="E0014" class="statement-id">E0014</span> -
MessagePending element and attribute extensions - The
MessagePending header element may be extended via additional
elements or attributes to convey supplemental semantics or options
that apply to the indication of pending messages.</li>
</ul>
</li>
<li><a href="http://www.w3.org/TR/soap12-part2/#singlereqrespmep" class="offsite">SOAP Version 1.2 Part 2: Adjunct (Second Edition),
Section 6.2 SOAP Request-Response Message Exchange Pattern</a></li>
<li><a href="http://www.w3.org/TR/wsdl#_porttypes" class="offsite">Web Services Description Language (WSDL) 1.1, Section 2.4
Port Types</a></li>
</ul>
<p>These extensibility points are listed, along with any
extensibility points from other sections of this Profile, in
<a href="#points">Appendix B</a></p>
The requirements and supporting text in this section make use of
the following terms:
<ul>
<li><strong>non-addressable client</strong> - a client deployed on
a host that cannot accept incoming connections from the services to
which it transmits requests. Examples include clients that are
deployed on hosts behind a firewall or network address translation
(NAT).</li>
<li><strong>addressable client</strong> - a client deployed on a
host that is capable of accepting incoming connections from the
services to which it transmits requests.</li>
</ul>
<h3 id="ws-mc-support">5.1 WS-MakeConnection Support</h3>
<div class="refinement">
<h4 id="Requiring_WS-MakeConnection">5.1.1 Requiring
WS-MakeConnection</h4>
<div class="rationale">
<p>As noted in <a href="#conformance" class="offsite">Section 2</a>
, support for WS-MakeConnection by a specific service is optional.
However, a service may require the use of WS-MakeConnection, in
which case, for successful interaction with that service, a client
will need to support it.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2011" id="R2011">R2011</a></span> If an endpoint requires the use of
WS-MakeConnection, any response EPRs in an <span class="statement-target">ENVELOPE</span> transmitted to this endpoint
MUST use either an instance of the MakeConnection Anonymous URI,
the WS-Addressing anonymous URI
(<code>http://www.w3.org/2005/08/addressing/anonymous</code>), or
the WS-Addressing none URI
(<code>http://www.w3.org/2005/08/addressing/none</code>) in their
<code>wsa:Address</code> element. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2011a">RSP2011a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2011b">RSP2011b</a></span></p>
<div style="display: none;" id="RSP2011a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2011a" id="RSP2011a">RSP2011a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2011a" id="RSP2011a">RSP2011a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name
= 'http://docs.oasis-open.org/ws-rx/wsmc/200702/MCSupported' and
@mode = 'required']] [@type =
'request']/wsil:messageContents/*:Envelope [*:Body[not(.//*:Fault)
and not(.//*:EncryptedData) ]]
[*:Header[not(.//xenc:ReferenceList)]] [ some $myenv in . satisfies
some $message in //wsdl:definitions/wsdl:message satisfies
($message/wsdl:part[1]/@type) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding
[.//*[@style = 'rpc']]/wsdl:operation[@name =
fn:local-name-from-QName(node-name($target/*:Body/*[1]))]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header[
(not(wsa:ReplyTo) or (
fn:contains(xsd:string(wsa:ReplyTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') or
xsd:string(wsa:ReplyTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/anonymous' or
xsd:string(wsa:ReplyTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/none' )) and
(not(wsa:FaultTo) or (
fn:contains(xsd:string(wsa:FaultTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') or
xsd:string(wsa:FaultTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/anonymous' or
xsd:string(wsa:FaultTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/none' )) ]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an WSDL rpc-lit binding, and for which the
use of MakeConnection was required, did not contain an appropriate
wsa:ReplyTo or wsa:FaultTo value (either anonymous URI or a wsa
"none" URI)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2011a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2011a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP2011b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2011b" id="RSP2011b">RSP2011b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2011b" id="RSP2011b">RSP2011b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name
= 'http://docs.oasis-open.org/ws-rx/wsmc/200702/MCSupported' and
@mode = 'required']] [@type =
'request']/wsil:messageContents/*:Envelope [*:Body[not(.//*:Fault)
and not(.//wsrm:* ) and not(.//wsmc:*) and not(.//*:EncryptedData)
]] [*:Header[not(.//xenc:ReferenceList)]] [some $myenv in .
satisfies ( every $message in //wsdl:definitions/wsdl:message
satisfies ( (not($message/wsdl:part[1]/@type) ) and (
$myenv/*:Body/*[1] or $myenv/*:Header/wsa:Action )) ) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding/wsdl:operation
[ some $opBinding in . satisfies (if ($target/*:Body/*[1] ) then
(some $dmesg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:message[wsdl:part[fn:resolve-QName(xsd:string(@element),
. ) = fn:node-name($target/*:Body/*[1])] ] satisfies some $dopmsg
in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
[fn:local-name-from-QName(fn:resolve-QName(xsd:string(@message), .
)) = $dmesg/@name] satisfies $opBinding/@name = $dopmsg/../@name )
else fn:true() ) and ( if ($target/*:Header/wsa:Action) then ( some
$opmsg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
satisfies ($target/*:Header/wsa:Action = ( if ($opmsg/@wsam:Action)
then $opmsg/@wsam:Action else
fn:concat($opmsg/../../../@targetNamespace, if
(not(fn:ends-with($opmsg/../../../@targetNamespace,'/'))) then '/'
else '', $opmsg/../../@name, '/', if($opmsg/@name) then
$opmsg/@name else fn:concat($opmsg/../@name, 'Request' ) ) ) ) and
( $opBinding/@name = $opmsg/../@name ) ) else fn:true() )
]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header[
(not(wsa:ReplyTo) or (
fn:contains(xsd:string(wsa:ReplyTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') or
xsd:string(wsa:ReplyTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/anonymous' or
xsd:string(wsa:ReplyTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/none' )) and
(not(wsa:FaultTo) or (
fn:contains(xsd:string(wsa:FaultTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') or
xsd:string(wsa:FaultTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/anonymous' or
xsd:string(wsa:FaultTo[1]/wsa:Address) =
'http://www.w3.org/2005/08/addressing/none' )) ]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an WSDL doc-lit binding, and for which the
use of MakeConnection was required, did not contain an appropriate
wsa:ReplyTo or wsa:FaultTo value (either anonymous URI or a wsa
"none" URI)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2011b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2011b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Honoring_EPRs_with_the_MakeConnection_Anonymous_URI">5.1.2
Honoring EPRs with the MakeConnection Anonymous URI</h4>
<p class="statement"><span class="statement-id"><a name="R2012" id="R2012">R2012</a></span> If an endpoint supports the use of
WS-MakeConnection, the <span class="statement-target">INSTANCE</span> corresponding to that endpoint
MUST NOT generate a fault due to the use of the
<code>wsmc:MakeConnection</code> message. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2012">RSP2012</a></span></p>
<div style="display: none;" id="RSP2012">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2012" id="RSP2012">RSP2012</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2012" id="RSP2012">RSP2012</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[@type = 'response' and
contains(xsd:string(wsil:httpHeaders/wsil:requestLine), '500') and
/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name =
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MCSupported' and
(@mode = 'required' or @mode = 'supported')] and (some $resp1 in .
satisfies /wsil:testLog/wsil:messageLog/wsil:message[@type =
'request' and @conversation =
$resp1/@conversation]/wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection]
) ]/wsil:messageContents/*:Envelope
[*:Header[not(.//xenc:ReferenceList)]]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not(*:Body/*:Fault[
(fn:ends-with(*:Code, 'Sender') and
fn:ends-with(*:Code/*:Subcode/*:Value, 'ActionNotSupported')) or
.//*:faultcode[fn:contains(string(node()), 'ActionNotSupported')]
])</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope with an HTTP 500 error code in response to a
MakeConnection, in a context where the use of MC is required
(MCSupported), contains a Fault with 'ActionNotSupported' code
value.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2012">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2012">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2013" id="R2013">R2013</a></span> If an endpoint supports the use of
WS-MakeConnection, the <span class="statement-target">INSTANCE</span> corresponding to that endpoint
MUST NOT generate a fault due to the use of a MakeConnection
Anonymous URI in the <code>wsa:Address</code> element on any
response EPRs in a request message. <span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2013">RSP2013</a></span></p>
<div style="display: none;" id="RSP2013">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2013" id="RSP2013">RSP2013</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial:</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2013" id="RSP2013">RSP2013</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[@type = 'response' and
/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name =
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MCSupported' and
(@mode = 'required' or @mode = 'supported')] and (some $resp1 in .
satisfies /wsil:testLog/wsil:messageLog/wsil:message[@type =
'request' and @conversation =
$resp1/@conversation]/wsil:messageContents/*:Envelope[fn:contains(xsd:string(*:Header/wsa:ReplyTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') ] )
]/wsil:messageContents/*:Envelope
[*:Header[not(.//xenc:ReferenceList)]]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not(*:Body/*:Fault[
(fn:ends-with(*:Code, 'Sender') and
fn:ends-with(*:Code/*:Subcode/*:Value, 'InvalidAddressingHeader'))
or .//*:faultcode[fn:contains(string(node()),
'InvalidAddressingHeader')] ])</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope in response to a request with ReplyTo address
set to MakeConnection anonymous URI, in a context where the use of
MC is required (MCSupported) contains a Fault with
'InvalidAddressingHeader' code value.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2013">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2013">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2014" id="R2014">R2014</a></span> If an endpoint requires the use of
WS-MakeConnection, any <span class="statement-target">MESSAGE</span> transmitted from this endpoint
MUST be transmitted over a connection that is associated with
either an instance of the WS-MakeConnection Anonymous URI or the
WS-Addressing anonymous URI
(<code>http://www.w3.org/2005/08/addressing/anonymous</code>).
<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2014a">RSP2014a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2014b">RSP2014b</a></span></p>
<div style="display: none;" id="RSP2014a">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2014a" id="RSP2014a">RSP2014a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>If an endpoint using a doc-lit binding requires the use of
WS-MakeConnection, any MESSAGE transmitted from this endpoint MUST
be transmitted over a connection that is associated with either an
instance of the WS-MakeConnection Anonymous URI or the
WS-Addressing anonymous URI
(http://www.w3.org/2005/08/addressing/anonymous).</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope
[*:Body[not (*:Fault) and not(.//*:EncryptedData) and
not(.//wsrm:*) and not(.//wssc:*)] and *:Header[not(wsa:Action ) or
(
not(fn:starts-with(wsa:Action,'http://docs.oasis-open.org/ws-sx/ws-trust'))
and
not(fn:starts-with(wsa:Action,'http://docs.oasis-open.org/ws-rx/wsrm'))
) ] and /wsil:testLog/wsil:descriptionFiles/wsil:feature[@name =
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MCSupported' and
(@mode = 'required')] and *:Header/wsa:RelatesTo[@RelationshipType
= 'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] and (some $respenv in . satisfies some $req in
/wsil:testLog/wsil:messageLog/wsil:message satisfies
$req/wsil:messageContents/*:Envelope/*:Header/wsa:MessageID =
$respenv/*:Header/wsa:RelatesTo [@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] and
$req/wsil:messageContents/*:Envelope/*:Header[fn:contains(wsa:ReplyTo[1]/wsa:Address
, 'http://www.w3.org/2005/08/addressing/anonymous') or
not(wsa:ReplyTo)] ) ] [ some $myenv in . satisfies ( every $message
in //wsdl:definitions/wsdl:message satisfies (
(not($message/wsdl:part[1]/@type) ) and ( $myenv/*:Body/*[1] or
$myenv/*:Header/wsa:Action )) ) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding/wsdl:operation
[ some $opBinding in . satisfies (if ($target/*:Body/*[1] ) then
(some $dmesg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:message[wsdl:part[fn:resolve-QName(xsd:string(@element),
. ) = fn:node-name($target/*:Body/*[1])] ] satisfies some $dopmsg
in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:output
[fn:local-name-from-QName(fn:resolve-QName(xsd:string(@message), .
)) = $dmesg/@name] satisfies $opBinding/@name = $dopmsg/../@name )
else fn:true() ) and ( if ($target/*:Header/wsa:Action) then ( some
$opmsg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:output
satisfies ($target/*:Header/wsa:Action = ( if ($opmsg/@wsam:Action)
then $opmsg/@wsam:Action else
fn:concat($opmsg/../../../@targetNamespace, if
(not(fn:ends-with($opmsg/../../../@targetNamespace,'/'))) then '/'
else '', $opmsg/../../@name, '/', if($opmsg/@name) then
$opmsg/@name else fn:concat($opmsg/../@name, 'Response' ) ) ) ) and
( $opBinding/@name = $opmsg/../@name ) ) else fn:true() )
]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">$target/../../@type =
'response'</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>In a context where the use of MC is required (MCSupported), a
response message in a WSDL doc/lit request-response exchange was
sent over an HTTP request.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2014a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2014a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP2014b">
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2014b" id="RSP2014b">RSP2014b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>If an endpoint using a rpc-lit binding requires the use of
WS-MakeConnection, any MESSAGE transmitted from this endpoint MUST
be transmitted over a connection that is associated with either an
instance of the WS-MakeConnection Anonymous URI or the
WS-Addressing anonymous URI
(http://www.w3.org/2005/08/addressing/anonymous).</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope
[*:Body[not (*:Fault) ] and
/wsil:testLog/wsil:descriptionFiles/wsil:feature[@name =
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MCSupported' and
(@mode = 'required')] and *:Header/wsa:RelatesTo[@RelationshipType
= 'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] and (some $respenv in . satisfies some $req in
/wsil:testLog/wsil:messageLog/wsil:message satisfies
$req/wsil:messageContents/*:Envelope/*:Header/wsa:MessageID =
$respenv/*:Header/wsa:RelatesTo [@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] and
$req/wsil:messageContents/*:Envelope/*:Header[fn:contains(wsa:ReplyTo[1]/wsa:Address,
'http://www.w3.org/2005/08/addressing/anonymous') or
not(wsa:ReplyTo)] ) ] [ some $myenv in . satisfies some $message in
//wsdl:definitions/wsdl:message satisfies
($message/wsdl:part[1]/@type) ]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding[.//*[@style
= 'rpc']]/ wsdl:operation [fn:string-join((@name, 'Response' ),'' )
=
fn:local-name-from-QName(node-name($target/*:Body/*[1]))]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">$target/../../@type =
'response'</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>In a context where the use of MC is required (MCSupported), a
response message in a WSDL rpc/lit request-response exchange was
sent over an HTTP request.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">Complete message.</diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2014b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2014b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div class="explanation">
<p>The association referred to in R2014 can be established by
either a request message that carries response EPRs that use
instances of the MakeConnection Anonymous URI, a request message
that carries response EPRs that use instances of the WS-Addressing
Anonymous URI, or a <code>wsmc:MakeConnection</code> message.</p>
</div>
</div>
<h3 id="guidance_makeconnection">5.2 Guidance On the Use of
MakeConnection</h3>
<p>This section describes how, when wsmc:MakeConnection is used,
WSDL input and output messages correspond to SOAP envelopes
containing a request or a response sent over HTTP.</p>
<div class="refinement">
<h4 id="Action_Values">5.2.1 Action Values</h4>
<div class="rationale">
<p>The WS-MakeConnection specification, while not formally
requiring the use of WS-Addressing headers, neglects to mention
what the wsa:Action and soapAction URIs should be - when
needed.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2030" id="R2030">R2030</a></span> If an <span class="statement-target">ENVELOPE</span> contains a wsmc:MakeConnection
element as the child of the SOAP Body, the <code>wsa:Action</code>
header, if present, MUST contain the value
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection".<span class="testable-type">
TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2030">RSP2030</a></span></p>
<div style="display: none;" id="RSP2030">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2030" id="RSP2030">RSP2030</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with s:Body/MC and wsa:Action header</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>wsa:Action value is
http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2030" id="RSP2030">RSP2030</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope<br />
[*:Body/wsmc:MakeConnection and *:Header/wsa:Action]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">fn:contains(*:Header/wsa:Action,
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection')</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An Envelope with soap:Body/wsmc:MakeConnection and wsa:Action
header, does not have
http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection in
wsa:Action.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2030">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2030">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2031" id="R2031">R2031</a></span> If a <span class="statement-target">MESSAGE</span> contains a SOAP 1.1 envelope with
the wsmc:MakeConnection element as the child of the Body, the HTTP
<code>SOAPAction</code> header, if present and not equal to the
value of "" (empty string), MUST contain the value
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection".<span class="testable-type">
TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2031">RSP2031</a></span></p>
<div style="display: none;" id="RSP2031">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2031" id="RSP2031">RSP2031</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>If a MESSAGE contains a SOAP 1.1 envelope with the
wsmc:MakeConnection element as the child of the Body, the HTTP
SOAPAction header, if present and not equal to the value of ""
(empty string), MUST contain the value
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>MESSAGE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For a Message with sopa11:Body/MC and HTTP SOAPAction
header</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>either SOAPAction value isempty string, or
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection"</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2031" id="RSP2031">RSP2031</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[wsil:messageContents/soap11:Envelope/soap11:Body/wsmc:MakeConnection
and<br />
(some $ky in wsil:httpHeaders/wsil:httpHeader/@key satisfies
fn:lower-case($ky) = 'soapaction' )]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<div style="margin-left: 2em">
(wsil:httpHeaders/wsil:httpHeader[fn:lower-case(@key) =
'soapaction']/@value =
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection'<br />
or<br />
wsil:httpHeaders/wsil:httpHeader[fn:lower-case(@key) =
'soapaction']/@value = '' )</div>
and<br />
<div style="margin-left: 2em">
(wsil:httpHeaders/wsil:httpHeader[fn:lower-case(@key) =
'soapaction']/@quoted = 'true' or<br />
not (wsil:httpHeaders/wsil:httpHeader[fn:lower-case(@key) =
'soapaction']/@quoted ))</div>
</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A message containing wsmc:MakeConnection has a non-empty
SOAPAction header value different from
'http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection' or
this HTTP header is not quoted.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2031">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2031">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2032" id="R2032">R2032</a></span> If a <span class="statement-target">MESSAGE</span> contains a SOAP 1.2 envelope with
the wsmc:MakeConnection element as the child of the Body, the
<code>action</code> parameter of the HTTP <code>Content-Type</code>
header, if present, MUST contain the value
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection".<span class="testable-type">
TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2032">RSP2032</a></span></p>
<div style="display: none;" id="RSP2032">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2032" id="RSP2032">RSP2032</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>If a MESSAGE contains a SOAP 1.2 envelope with the
wsmc:MakeConnection element as the child of the Body, the action
parameter of the HTTP Content-Type header, if present, MUST contain
the value
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection"</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>MESSAGE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Message with sopa12:Body/MC and action parameter of the
HTTP Content-Type header</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>action parameter ="http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection"</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2032" id="RSP2032">RSP2032</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">//wsil:message<br />
[wsil:messageContents/soap12:Envelope/soap12:Body/wsmc:MakeConnection
and<br />
(wsil:httpHeaders/wsil:contentTypeHeader/wsil:parameter/@key =
'action' )]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
wsil:httpHeaders/wsil:contentTypeHeader/wsil:parameter[@key =
'action']/@value ="http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection"</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>In a SOAP 1.2 MESSAGE with the wsmc:MakeConnection element, the
action parameter of the HTTP Content-Type header does not contain
the value
"http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection".</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2032">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2032">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Binding_to_HTTP">5.2.2 Binding to HTTP</h4>
<div class="rationale">
<p>Consider the case of a non-addressable client <em>NA</em>
invoking an addressable service <em>B</em> that supports a WSDL
request-response operation. A possible request-response exchange
involving wsmc:MakeConnection might take the following form:</p>
<ol type="">
<li>Through some mechanism, <em>NA</em> is provided the EPR for
<em>B</em> .</li>
<li><em>NA</em> sends a SOAP request message (contained in the
entity body of an HTTP request) to <em>B</em> . The SOAP request
message corresponds to and is described by the input message in the
WSDL request-response operation supported by <em>B</em> .</li>
<li>If <em>B</em> chooses not to send the application response on
the current back channel, then <em>B</em> sends an HTTP response
(via the HTTP back channel) with a status code of "202 Accepted".
No SOAP envelope is included as part of this HTTP response.</li>
<li><em>NA</em> sends a MakeConnection request message (in the
entity body of an HTTP request) to <em>B</em> using the same
MakeConnection anonymous URI identifying <em>NA</em> as in the
wsa:ReplyTo addressing property contained in the SOAP envelope of
the original request message.</li>
<li><em>B</em> sends a SOAP response message (contained in the
entity body of an HTTP response) via the HTTP back channel. The
SOAP response message corresponds to and is described by the output
message in the WSDL request-response operation supported by
<em>B</em> . If the HTTP response in step 5 does not contain a SOAP
envelope, and if there is no failure, then the HTTP response must
not contain an entity body and the status code must be 202.</li>
</ol>
<p>Note: If the HTTP response from step 5 above does not contain a
response message corresponding to the output message in the WSDL
request-response operation, <em>NA</em> repeats step 3 above until
a response message corresponding to the output message in the WSDL
request-response operation is retrieved from <em>B</em> , as
described in step 4.</p>
<p>Now consider the case of an addressable client <em>A</em>
invoking a non-addressable service <em>NB</em> . Another possible
message exchange involving wsmc:MakeConnection might take the
following form:</p>
<ol type="">
<li>Through some mechanism, <em>A</em> is provided an EPR for
<em>NB</em> - this EPR uses an instance of a MakeConnection
anonymous URI that identifies <em>NB</em> , and <em>NB</em> is
provided the EPR for <em>A</em> .</li>
<li><em>NB</em> sends a MakeConnection request message (contained
in the entity body of an HTTP request) to <em>A</em> using the same
MakeConnection anonymous URI identifying <em>NB</em> as in the EPR
for <em>NB</em> .</li>
<li><em>A</em> sends a SOAP request message (contained in the
entity body of the HTTP response) via the back channel. This SOAP
request message corresponds to and is described by the input
message in the WSDL operation supported by <em>NB</em> .</li>
<li>In the case of a request-response operation, <em>NB</em> sends
a SOAP response message (contained in the entity body of a new HTTP
request) to <em>A</em> . This SOAP response message corresponds to
and is described by the output message in the WSDL request-response
operation supported by <em>NB</em> .</li>
<li><em>A</em> sends an HTTP response via the back channel with a
status code of 202 Accepted. No SOAP envelope is included as part
of the HTTP response.</li>
</ol>
<p>Note: In step 3 above, if <em>NB</em> encounters an
infrastructure level fault resulting from the processing the SOAP
request message (that corresponds to and is described by the input
message in the WSDL operation supported by <em>NB</em> ),
<em>NB</em> will send the fault to <em>A</em> via a separate HTTP
request. Notice, this fault message replaces the output message in
the WSDL request-response operation, if any, supported by
<em>NB</em> .</p>
<p>A non-addressable endpoint may use wsmc:MakeConnection in a SOAP
envelope to obtain any pending messages from an endpoint.</p>
<p>The MakeConnection specification does not mandate how long an
MCReceiver needs to wait for an outgoing message to be generated -
this is left as an implementation choice. For example, in some
environments if there is no message ready to be sent back to the
MCSender then returning an HTTP 202 immediately might be
appropriate, while in some other cases waiting a certain period of
time might improve performance with respect to network traffic.
Either case could occur.</p>
<p>When the SOAP request-response MEP is in use and the client is
non-addressable the general rules for binding SOAP envelopes to
HTTP requests messages (as described by the Basic Profile) apply.
SOAP envelopes, that are described by the input message of the WSDL
operations supported by a service, are bound to HTTP request
messages. SOAP envelopes, that are described by the output message
of the WSDL operations supported by a service, are bound to HTTP
response messages. For non-addressable services the situation is
reversed; the SOAP envelopes, that are described by the input
message of the WSDL operations supported by the service, are bound
to HTTP response messages and SOAP envelopes, that are described by
the output message of the WSDL operations supported by the service,
are bound to HTTP request messages.</p>
<p>The following requirements extend the requirements defined in
Basic Profile:</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2004" id="R2004">R2004</a></span> When the wsa:ReplyTo addressing property
of a request message (SOAP envelope included in the HTTP entity
body of the HTTP request) described by the input message of a WSDL
request-response operation is set to a MakeConnection anonymous
URI, the corresponding response <span class="statement-target">MESSAGE</span> (SOAP envelope included in the
HTTP entity body of the HTTP response) described by the WSDL output
message of the same WSDL request-response operation MUST be sent as
an HTTP response to either the HTTP request that carried the WSDL
input message, or to the HTTP request that carried a
wsmc:MakeConnection message with the correct MakeConnection
anonymous URI.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP2004a">RSP2004a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2004b">RSP2004b</a></span></p>
<div style="display: none;" id="RSP2004a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2004a" id="RSP2004a">RSP2004a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>When the wsa:ReplyTo addressing property of a request message
(SOAP envelope included in the HTTP entity body of the HTTP
request) described by the input message of a WSDL request-response
operation is set to a MakeConnection anonymous URI, the
corresponding response MESSAGE (SOAP envelope included in the HTTP
entity body of the HTTP response) described by the WSDL output
message of the same WSDL request-response operation MUST be sent as
an HTTP response to either the HTTP request that carried the WSDL
input message, or to the HTTP request that carried a
wsmc:MakeConnection message with the correct MakeConnection
anonymous URI.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>MESSAGE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>response message to a MakeConnection that has an MC anon
ReplyTo</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td>related request-response WSDL op</td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>response message is sent on same HTTP connection (response), or
is sent on another HTTP response of a MakeConnection request with
same MC URI in wsmc:Address.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2004a" id="RSP2004a">RSP2004a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[.//*:Envelope[*:Header/wsa:RelatesTo and
not(*:Header/wsse:Security//xenc:ReferenceList) and<br />
not(*:Body/*:Fault) and not(*:Body/wsrm:*)]] [<br />
some $resp1 in . satisfies<br />
some $req1 in
/wsil:testLog/wsil:messageLog/wsil:message[.//*:Header/wsa:MessageID
= $resp1//wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)]] satisfies<br />
<div style="margin-left: 2em">(
$req1/wsil:messageContents/*:Envelope[not(*:Body/wsmc:MakeConnection)
and fn:contains(xsd:string(./*:Header/wsa:ReplyTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') ]
and<br />
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding[.//*[@style
= 'rpc']]/wsdl:operation[wsdl:input and wsdl:output][@name =
fn:local-name-from-QName(node-name($req1//*:Body/*[1]))])</div>
]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myRequestMsg</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myRequestMsg">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[.//*:Header/wsa:MessageID =
$target//wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] and not
(./wsil:messageContents/*:Envelope/*:Body/wsmc:MakeConnection
)]</cotarget>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
//wsil:descriptionFile/wsdl:definitions/wsdl:binding
<div style="margin-left: 2em">[.//*[@style =
'rpc']]/wsdl:operation[wsdl:input and wsdl:output][@name =
fn:local-name-from-QName(node-name($myRequestMsg//*:Body/*[1]))][1]</div>
</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/@type = 'response' and
($myRequestMsg/@conversation = $target/@conversation or<br />
(some $req2 in /wsil:testLog/wsil:messageLog/wsil:message[@type =
'request' and @conversation = $target/@conversation] satisfies
<div style="margin-left: 2em">(
$req2/wsil:messageContents/*:Envelope/*:Body/wsmc:MakeConnection/wsmc:Address
=
$myRequestMsg/wsil:messageContents/*:Envelope/*:Header/wsa:ReplyTo/wsa:Address
)</div>
))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A response message that binds to an rpc-literal WSDL
request-response binding, and relates to a request message sent
over HTTP request, is not sent over same HTTP connection
(response), and is not sent on an HTTP response to a MakeConnection
request with same MC URI in wsmc:Address.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2004a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2004a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP2004b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2004b" id="RSP2004b">RSP2004b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>When the wsa:ReplyTo addressing property of a request message
(SOAP envelope included in the HTTP entity body of the HTTP
request) described by the input message of a WSDL request-response
operation is set to a MakeConnection anonymous URI, the
corresponding response MESSAGE (SOAP envelope included in the HTTP
entity body of the HTTP response) described by the WSDL output
message of the same WSDL request-response operation MUST be sent as
an HTTP response to either the HTTP request that carried the WSDL
input message, or to the HTTP request that carried a
wsmc:MakeConnection message with the correct MakeConnection
anonymous URI.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>MESSAGE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>response message to a MakeConnection that has an MC anon
ReplyTo</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td>related request-response WSDL op</td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>response message is sent on same HTTP connection (response), or
is sent on another HTTP response of a MakeConnection request with
same MC URI in wsmc:Address.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2004b" id="RSP2004b">RSP2004b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[.//*:Envelope[*:Header/wsa:RelatesTo and
not(*:Header/wsse:Security//xenc:ReferenceList) and<br />
not(*:Body/*:Fault) and not(*:Body/wsrm:*)]] [<br />
some $resp1 in . satisfies<br />
some $req1 in
/wsil:testLog/wsil:messageLog/wsil:message[.//*:Header/wsa:MessageID
= $resp1//wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)]] satisfies
<div style="margin-left: 2em">(
$req1/wsil:messageContents/*:Envelope[not(*:Body/wsmc:MakeConnection)
and fn:contains(xsd:string(./*:Header/wsa:ReplyTo[1]/wsa:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=') ]
and<br />
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:message[fn:resolve-QName(xsd:string(wsdl:part[1]/@element),
. ) = fn:node-name($req1//*:Envelope/*:Body/*[1])])</div>
]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myRequestMsg</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myRequestMsg">
/wsil:testLog/wsil:messageLog/wsil:message<br />
[.//*:Header/wsa:MessageID =
$target//wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] and<br />
not (./wsil:messageContents/*:Envelope/*:Body/wsmc:MakeConnection
)]</cotarget>
</td>
</tr>
<tr>
<td><b>co-Target:</b> myOpBinding</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="myOpBinding">
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:binding
[not(.//*[@style = 'rpc'])]/wsdl:operation<br />
[wsdl:input and wsdl:output]<br />
[<br />
some $opBinding in . satisfies<br />
some $dmesg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:message[wsdl:part[fn:resolve-QName(xsd:string(@element),
. ) = fn:node-name($myRequestMsg//*:Envelope/*:Body/*[1])] ]
satisfies
<div style="margin-left: 2em">some $dopmsg in
/wsil:testLog/wsil:descriptionFiles/wsil:descriptionFile/wsdl:definitions/wsdl:portType/wsdl:operation/wsdl:input
[fn:local-name-from-QName(fn:resolve-QName(xsd:string(@message), .
)) = $dmesg/@name] satisfies<br />
$opBinding/@name = $dopmsg/../@name</div>
][1]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/@type = 'response' and
($myRequestMsg/@conversation = $target/@conversation or<br />
(some $req2 in /wsil:testLog/wsil:messageLog/wsil:message[@type =
'request' and @conversation = $target/@conversation] satisfies
<div style="margin-left: 2em">(
$req2/wsil:messageContents/*:Envelope/*:Body/wsmc:MakeConnection/wsmc:Address
=
$myRequestMsg/wsil:messageContents/*:Envelope/*:Header/wsa:ReplyTo/wsa:Address
)</div>
))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A response message that binds to an doc-literal WSDL
request-response binding, and relates to a request message sent
over HTTP request, is not sent over same HTTP connection
(response), and is not sent on an HTTP response to a MakeConnection
request with same MC URI in wsmc:Address.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2004b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2004b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2005" id="R2005">R2005</a></span> Any <span class="statement-target">MESSAGE</span> resulting from the processing of
a SOAP envelope included in the HTTP entity body of the HTTP
response, if transmitted, MUST be sent via a new HTTP
request.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2005">RSP2005</a></span></p>
<div style="display: none;" id="RSP2005">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2005" id="RSP2005">RSP2005</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>for a soap:Envelope sent as a response (wsa:RelatesTo) to
another Envelope sent over an HTTP response</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The target Envelope is sent over an HTTP Request</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2005" id="RSP2005">RSP2005</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[<br />

some $reqm in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope
satisfies<br />
$reqm/*:Header/wsa:MessageID =
./*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)]<br />
and $reqm/../../@type = 'response' ]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/../../@type =
'request'</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A soap:Envelope is sent as a response (wsa:RelatesTo) to
another Envelope sent over an HTTP response. Such an envelope was
not sent over an HTTP Request.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2005">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2005">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="Transmission_of_MakeConnection_Faults">5.2.3 Transmission
of MakeConnection Faults</h4>
<div class="rationale">
<p>Section 3.2 of the WS-MakeConnection specification states that
there is no reply to the MakeConnection message and therefore
section 3.4 ("Formulating a Reply Message") of the WS-Addressing
specification is not used. This requires some clarification with
respect to Fault processing. The MakeConnection message is, by
definition, a one-way message. Therefore, if during the processing
of the MakeConnection message a Fault is generated that is related
to the processing of MakeConnection message itself, that Fault
message is to be treated like any other Fault related to a one-way
message; that is, if the Fault message is transmitted then it will
follow the rules defined by section 3.4 of the WS-Addressing
specification. Note that this is different from the use of the
MakeConnection protocol to transmit a Fault message - those
messages are not replies to the MakeConnection message and section
3.4 would not apply.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2050" id="R2050">R2050</a></span> If, when processing a MakeConnection
message, an <span class="statement-target">MC-RECEIVER</span>
generates a fault related to the MakeConnection message (e.g. a
wsmc:UnsupportedSelection or a wsmc:MissingSelection Fault) the
transmission of that Fault MUST adhere to the rules as defined by
section 3.4 of the WS-Addressing specification.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2050">RSP2050</a></span></p>
<div style="display: none;" id="RSP2050">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2050" id="RSP2050">RSP2050</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope in which any of the following appear: a.
wsmc:UnsupportedSelection b. wsmc:MissingSelection</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] has a wsa:RelatesTo that points to an MC with
wsa:MessageId, AND the wsa:To matches the wsa:FaultTo (or
wsa:ReplyTo if no faultTo).</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2050" id="RSP2050">RSP2050</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/*:Fault//*:Value[ (:
fn:namespace-uri-for-prefix(fn:substring-before(string(node()),':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsmc/200702' and :)
(fn:contains(string(node()), 'MissingSelection') or
fn:contains(string(node()), 'UnsupportedSelection'))] or<br />
*:Body/*:Fault//*:faultcode[ (:
fn:namespace-uri-for-prefix(fn:substring-before(string(node()),':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsmc/200702' and :)
(fn:contains(string(node()), 'MissingSelection') or
fn:contains(string(node()), 'UnsupportedSelection'))] ]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $mc in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection]
satisfies ($mc/*:Header/wsa:MessageID =
$target/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] (: and<br />
( not($target/*:Header/wsa:To) or ($target/*:Header/wsa:To =
$mc/*:Header/wsa:FaultTo/wsa:Address or
(not($mc/*:Header/wsa:FaultTo) and ($target/*:Header/wsa:To =
$mc/*:Header/wsa:ReplyTo/wsa:Address or
(not($mc/*:Header/wsa:ReplyTo) and
fn:contains($target/*:Header/wsa:To,
'http://www.w3.org/2005/08/addressing/anonymous') ) )))) :) ) or
(not($mc/*:Header/wsa:MessageID) and $mc/../../@conversation =
$target/../../@conversation and (not($target/*:Header/wsa:To) or
fn:contains($target/*:Header/wsa:To,
'http://www.w3.org/2005/08/addressing/anonymous')) )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A wsmc:UnsupportedSelection or wsmc:MissingSelection Fault
either does not relate to a MakeConnection message or has a wsa:To
content that does not match the wsa:FaultTo or wsa:ReplyTo in the
MC message if no FaultTo.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2050">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2050">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="makeconnection_addressing">5.3 MakeConnection
Addressing</h3>
<p>In section 3.1 of the WS-MakeConnection specification the WS-MC
Anonymous URI is defined to uniquely identity anonymous endpoints
and to signal the intention to use the MakeConnection protocol to
transfer messages between the endpoints. The WS-MakeConnection
protocol uses the receipt of the MakeConnection message at an
endpoint as the mechanism by which the back-channel of that
connection can be uniquely identified. Once identified, the MC
Receiver is then free to use that back-channel to send any pending
message targeted to the URI specified within the MakeConnection
message.</p>
<div class="refinement">
<h4 id="Addressing_Variants">5.3.1 Addressing Variants</h4>
<div class="rationale">
<p>The WS-MakeConnection specification defines two distinct ways
for the MC-Sender to indicate its messages of interest. One of
these mechanisms uses the wsmc:MakeConnection Anonymous URI, the
other uses a WS-RM Sequence ID. However, the WS-MakeConnection
specification doesn't define any way of advertising or agreeing
upon which variant of the MakeConnection protocol is supported or
required by an endpoint. This creates the potential for different,
incompatible implementations of WS-MakeConnection. To promote
interoperability this Profile refines the WS-MakeConnection
specification with additional requirements to mandate the use of a
single, consistent addressing variant. Since the URI variant of
WS-MakeConnection is a superset of the functionality of the
Sequence-ID variant, use of the URI variant is mandated by this
Profile.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2100" id="R2100">R2100</a></span> If an <span class="statement-target">ENVELOPE</span> contains a wsmc:MakeConnection
element as a child of the SOAP Body, the wsmc:MakeConnection
element MUST contain a wsmc:Address child element.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2100">RSP2100</a></span></p>
<div style="display: none;" id="RSP2100">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2100" id="RSP2100">RSP2100</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>There's an option in the MC spec that allows for the retrieval
of messages based on things other than the target URI &#8211;
however, RSP limits this by requiring that a search MUST, at least,
be based on the target URI (ie. the wsa:To URI).</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with s:Body/MC</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>there exists MC/wsmc:Address child element</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td>provide context and cause MC sending such as do a req/resp and
the response is lost. Flag=much more difficult study required to
force use of MC. Run some request/response tests and set the
wsa:ReplyTo of the request messages (from a non-addressable
endpoint) to an instance of the MC Anonymous URI Template</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2100" id="RSP2100">RSP2100</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
*:Body/wsmc:MakeConnection/wsmc:Address</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The MakeConenction element does not contain a wsmc:Address
child element.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2100">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2100">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2101" id="R2101">R2101</a></span> If an <span class="statement-target">ENVELOPE</span> contains a wsmc:MakeConnection
element as a child of the SOAP Body, the wsmc:MakeConnection
element MUST NOT contain a wsrm:Identifier child
element.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2101">RSP2101</a></span></p>
<div style="display: none;" id="RSP2101">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2101" id="RSP2101">RSP2101</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with s:Body/MC</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>there is no MC/wsrm:Identifier</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td>provide context and cause MC sending such as do a req/resp and
the response is lost. Flag=much more difficult study required to
force use of MC. Run some request/response tests and set the
wsa:ReplyTo of the request messages (from a non-addressable
endpoint) to an instance of the MC Anonymous URI Template</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2101" id="RSP2101">RSP2101</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">not
(*:Body/wsmc:MakeConnection/wsrm:Identifier)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td></td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2101">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2101">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2102" id="R2102">R2102</a></span> If a wsmc:MakeConnection request does not
contain a wsmc:Address child element (in violation of R2100), the
<span class="statement-target">MC-RECEIVER</span> MUST generate a
wsmc:MissingSelection fault.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2102">RSP2102</a></span></p>
<div style="display: none;" id="RSP2102">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2102" id="RSP2102">RSP2102</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>Counterpart of RSP2100 (in case of violation)</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with s:Body/MC and no wsmc:Address</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>there exists a Fault generated in response</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2102" id="RSP2102">RSP2102</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection and
not(*:Body/wsmc:MakeConnection/wsmc:Address)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $mcfault in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope
[*:Body/*:Fault//*:Value[ (:
fn:namespace-uri-for-prefix(fn:substring-before(string(node()),':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsmc/200702' and :)
fn:contains(string(node()), 'MissingSelection')] or<br />
*:Body/*:Fault//*:faultcode[ (:
fn:namespace-uri-for-prefix(fn:substring-before(string(node()),':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsmc/200702' and :)
fn:contains(string(node()), 'MissingSelection')] ] satisfies<br />
($target/*:Header/wsa:MessageID =
$mcfault/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] or (not($target/*:Header/wsa:MessageID) and
$mcfault/../../@conversation =
$target/../../@conversation))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A MakeConnection message without wsmc:Address did not cause the
generation of a wsmc:MissingSelection Fault associated with this MC
message.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2102">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2102">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2103" id="R2103">R2103</a></span> If a wsmc:MakeConnection request contains
a wsrm:Identifier element (in violation of R2101) the <span class="statement-target">MC-RECEIVER</span> MUST generate a
wsmc:UnsupportedSelection fault.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2103">RSP2103</a></span></p>
<div style="display: none;" id="RSP2103">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2103" id="RSP2103">RSP2103</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>Counterpart of RSP2101 (in case of violation)</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope with s:Body/MC and with wsrm:Identifier</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>there exists a Fault generated in response</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2103" id="RSP2103">RSP2103</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection//wsrm:Identifier]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $mcfault in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope
[*:Body/*:Fault//*:Value[ (:
fn:namespace-uri-for-prefix(fn:substring-before(string(node()),':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsmc/200702' and :)
fn:contains(string(node()), 'UnsupportedSelection')] or<br />
*:Body/*:Fault//*:faultcode[ (:
fn:namespace-uri-for-prefix(fn:substring-before(string(node()),':'
) , . ) = 'http://docs.oasis-open.org/ws-rx/wsmc/200702' and :)
fn:contains(string(node()), 'UnsupportedSelection')] ]
satisfies<br />
($target/*:Header/wsa:MessageID =
$mcfault/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] or (not($target/*:Header/wsa:MessageID) and
$mcfault/../../@conversation =
$target/../../@conversation))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A MakeConnection message with an wsrm:Identifier did not cause
the generation of a wsmc:UnsupportedSelection Fault associated with
this MC message.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2103">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2103">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="refinement">
<h4 id="MakeConnection_Anonymous_URI">5.3.2 MakeConnection
Anonymous URI</h4>
<div class="rationale">
<p>The following requirements describe how the MakeConnection
anonymous URI is used in the various addressing properties and
within RM protocol elements transmitted on SOAP messages.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2110" id="R2110">R2110</a></span> When present in a SOAP <span class="statement-target">ENVELOPE</span>, the
/wsmc:MakeConnection/wsmc:Address element MUST be set to a
MakeConnection anonymous URI that identifies the
MC-SENDER.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2110">RSP2110</a></span></p>
<div style="display: none;" id="RSP2110">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2110" id="RSP2110">RSP2110</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>While the MakeConnection specification allows for any URI to be
used in the mc:Address element, for the purposes of increasing
interoperability the RSP narrows its usage down to just the cases
of the MCAnonymous URI</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good (should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Any message that contains a MakeConnection element in the
Body</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] contains an mc:MakeConnection/mc:Address child
element whose value is an instance of the MC Anonymous URI template
(ie. starts with
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id='
).</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run some request/response tests and set the wsa:ReplyTo of the
request messages (from a non-addressable endpoint) to an instance
of the MC Anonymous URI Template.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2110" id="RSP2110">RSP2110</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
//wsil:messageContents/*:Envelope[*:Body/wsmc:MakeConnection/wsmc:Address]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
fn:contains(xsd:string(*:Body/wsmc:MakeConnection/wsmc:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=')</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The Envelope contains an wsmc:MakeConnection/wsmc:Address child
element whose value is not an instance of the MC Anonymous URI
template (ie. does not start with
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=' )</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2110">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2110">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2111" id="R2111">R2111</a></span> Once the MakeConnection protocol is
established through the exchange of an EPR that contains the
wsmc:MakeConnection Anonymous URI as its [address] property, the
<span class="statement-target">MC-RECEIVER</span> MUST make use of
the MakeConnection response channel to transfer messages targeted
to that EPR.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP2111">RSP2111</a></span></p>
<div style="display: none;" id="RSP2111">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2111" id="RSP2111">RSP2111</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>This is a test to make sure that messages targeted to the
MakeConnection Anonymous URI flow over an HTTP response flow (as
opposed to an HTTP request flow).</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good (should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A message with a wsa:To value set to an instance of the MC
Anonymous URI template (ie. starts with
"http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id="
).</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] is an HTTP response message.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run some request/response tests and set the wsa:ReplyTo of the
request messages (from a non-addressable endpoint) to an instance
of the MC Anonymous URI Template.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2111" id="RSP2111">RSP2111</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[fn:contains(xsd:string(.//*:Header/wsa:To[1]),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=')]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">@type = 'response'</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A message with a wsa:To value set to an instance of the MC
Anonymous URI template (ie. starts with
"http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=" ) is
not sent as an HTTP response.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2111">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2111">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2112" id="R2112">R2112</a></span> A <span class="statement-target">MESSAGE</span> sent to a non-addressable
endpoint MUST have the wsa:To addressing property set to an
instance of the MakeConnection anonymous URI that identifies that
endpoint, except in the following situation where this is
[permitted but] not required (a) the message (that is not a WS-RM
lifecycle message) is sent non-reliably over the back-channel of an
underlying protocol connection initiated by the non-addressable
endpoint.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2112">RSP2112</a></span></p>
<div style="display: none;" id="RSP2112">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2112" id="RSP2112">RSP2112</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>This requirement focuses on ensuring that when RM is being used
by an anonymous endpoint, that the MC Anonymous URI is used so that
the full features of RM can still continue to be used. So: IF MC
anon used in request, and same used i response/wsa:To then OK else
Fail. IF MC anon not used in request, but regular anon, THEN
fail.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good (should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Any Message sent on an HTTP response flow that contains a
wsrm:Sequence Header.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] has a wsa:To Header whose value is an instance of
the MC Anonymous URI (ie. starts with
"http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=").</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run some request/response tests and set the wsa:ReplyTo of the
request messages (from a non-addressable endpoint) to an instance
of the MC Anonymous URI Template.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2112" id="RSP2112">RSP2112</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message[@type = 'response' and
.//*:Header/wsrm:Sequence][some $resp1 in . satisfies some $req1 in
/wsil:testLog/wsil:messageLog/wsil:message[@type = 'request' and
(@conversation = $resp1/@conversation or .//*:Header/wsa:MessageID
= $resp1//wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)]) (: and .//*:Header/wsrm:Sequence :) ]
satisfies
((fn:contains(xsd:string($req1//*:Header/wsa:ReplyTo/wsa:Address),
'anonymous') or not($req1//*:Header/wsa:ReplyTo)) and
$req1/wsil:messageContents/*:Envelope/*:Body/wsmc:MakeConnection)
]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
fn:contains(xsd:string(.//*:Header/wsa:To[1]),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=')</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A Message sent on an HTTP response contains a wsrm:Sequence
Header, but the wsa:To Header is not an instance of the MC
Anonymous URI (ie. does not start with
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=')</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2112">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2112">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R2113" id="R2113">R2113</a></span> When referring to a non-addressable
endpoint, and if present in a SOAP <span class="statement-target">ENVELOPE</span>, the
/wsrm:CreateSequence/wsrm:Offer/wsrm:Endpoint element MUST be set
to an instance of the WS-MakeConnection anonymous URI.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2113">RSP2113</a></span></p>
<div style="display: none;" id="RSP2113">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2113" id="RSP2113">RSP2113</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>To ensure all of the RM features can be used, even when a
non-addressable endpoint is used, the RSP requires implementations
to use an instance of the MC Anonymous URI in the CS/Offer/Endpoint
EPR.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good (should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A CreateSequence message that contains an Offer element.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The [target] does not have a CreateSequence/Offer/wsa:Address
element with a value of wsa:Anonymous or wsa:None.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run some reliable request/response tests where the client is
non-addressable and make sure the CreateSequence contains an
Offer.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2113" id="RSP2113">RSP2113</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope<br />

[*:Body/wsrm:CreateSequence/wsrm:Offer and
<div style="margin-left: 2em">
(fn:contains(xsd:string(*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Endpoint/*:Address),
'anonymous') or<br />
fn:contains(xsd:string(*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Endpoint/*:Address),
'none'))</div>
]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
fn:contains(xsd:string(*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Endpoint/*:Address),
'http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=')</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The CreateSequence message is Offering a sequence and provides
an Endpoint address that does not indicate an addressable endpoint,
yet that is not an MC Anonymous URI.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2113">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2113">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="makeconnection_faulting">5.4 MakeConnection Fault
Behavior</h3>
<p>Section 4 of WS-MakeConnection describes how to map the
properties of the faults generated by WS-MakeConnection
implementations to SOAP 1.1 and 1.2 fault messages. Although the
description of the binding to SOAP 1.2 binds the [Detail] property
of a fault to the <code>/soap12:Fault/soap12:Detail</code> element,
there is no description of how to bind the [Detail] property to any
element of a SOAP 1.1 fault message.</p>
<div class="refinement">
<h4 id="[Detail]_Property_Mapping">5.4.1 [Detail] Property
Mapping</h4>
<div class="rationale">
<p>The following requirement describes how to bind the [Detail]
property of a fault to a SOAP 1.1 fault message.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R2200" id="R2200">R2200</a></span> An <span class="statement-target">MC-RECEIVER</span> that generates a SOAP 1.1
fault MUST include the value of the [Detail] property, if such a
value exists, as the first child of the /soap11:Fault/detail
element.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP2200">RSP2200</a></span></p>
<div style="display: none;" id="RSP2200">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP2200" id="RSP2200">RSP2200</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP2200" id="RSP2200">RSP2200</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>An MC-RECEIVER that generates a SOAP 1.1 fault MUST include the
value of the [Detail] property, if such a value exists, as the
first child of the /soap11:Fault/detail element.</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[soap11:Body/soap11:Fault]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/soap11:Body/soap11:Fault/*:detail or
not($target/soap11:Body//*:detail)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP 1.1 message containing a Fault element in its body, has
a default element that is not immediate child of
soap11:Body/soap11:Fault.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP2200">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP2200">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h2 id="sec_reliable_msg">6. Secure Reliable Messaging</h2>
<p>This section of the Profile contains requirements that address
the composition of reliable and secure messaging.</p>
<p>This section of the Profile incorporates the following
specifications by reference:</p>
<ul>
<li><a href="http://docs.oasis-open.org/ws-rx/wsrm/200702/wsrm-1.2-spec-os.html" class="offsite">Web Services Reliable Messaging 1.2</a></li>
<li><a href="http://docs.oasis-open.org/ws-rx/wsmc/200702/wsmc-1.1-spec-os.html" class="offsite">Web Services Make Connection 1.1</a></li>
<li><a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html" class="offsite">WS-SecureConversation 1.4</a></li>
<li><a href="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.3/os/ws-securitypolicy-1.3-spec-os.html" class="offsite">WS-SecurityPolicy 1.3</a></li>
</ul>
<p>These extensibility points are listed, along with any
extensibility points from other sections of this Profile, in
<a href="#points">Appendix B</a></p>
<h3 id="secure-sequence-creation">6.1 Initiating a Secure
Sequence</h3>
<div class="refinement">
<h4 id="Secure_Context_Identification">6.1.1 Secure Context
Identification</h4>
<div class="rationale">
<p>Section 5.2.2.1 of the WS-ReliableMessaging specification states
that "During the CreateSequence exchange, the RM Source SHOULD
explicitly identify the security context that will be used to
protect the Sequence". This leaves open the possibility for RMS
implementations that, for some reason, attempt to use WS-SC to
secure their Sequences in some manner that does not explicitly
identify the security context that will be used to protect the
Sequence (e.g. by some out of band understanding of an inferred
security context). This possibility creates an obvious operational
and interoperability issues since (a) point-to-point, out-of-band
configuration creates unscalable operational overhead and (b) not
all WS-RM implementations may be capable of supporting such
understandings.</p>
</div>
<div class="explanation">
<p>Within Section 6, the phrase "secure Sequence" is defined as "a
Sequence beginning with an exchange in which the
wsrm:CreateSequence element has been extended with a
wsse:SecurityTokenReference element." This profile does not cover
the out-of-band understandings mentioned just above.</p>
</div>
</div>
<div class="refinement">
<h4 id="Security_Token_References">6.1.2 Security Token
References</h4>
<div class="rationale">
<p>When initiating a secure Sequence, an RMS must ensure that the
RMD both understands and will conform to the requirements listed
above.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R3010" id="R3010">R3010</a></span> If an <span class="statement-target">ENVELOPE</span> contains a wsrm:CreateSequence
element as a child of the SOAP Body, and the proposed Sequence is
to be secured, the ENVELOPE MUST also include the
wsrm:UsesSequenceSTR element as a SOAP header block.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3010">RSP3010</a></span></p>
<div style="display: none;" id="RSP3010">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3010" id="RSP3010">RSP3010</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>For an Envelope that contains a wsrm:CreateSequence element
that has security token ref</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>Envelope includes the UsesSequenceSTR header</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td>scenario provide the expected "context" (manipulate content of
CreateSequence)</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3010" id="RSP3010">RSP3010</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
./*:Header/wsrm:UsesSequenceSTR</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>An Envelope that contains a wsrm:CreateSequence element that
has a security token reference (wsse:SecurityTokenReference) does
not include the UsesSequenceSTR header.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3010">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3010">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="signature_coverage">6.2 Signature Coverage</h3>
<p>In a secure Sequence there exists both security and
interoperability issues around the inclusion of SOAP message
elements within signatures.</p>
<div class="refinement">
<h4 id="Single_Signature_for_Sequence_Header_and_SOAP_Body">6.2.1
Single Signature for Sequence Header and SOAP Body</h4>
<div class="rationale">
<p>As discussed in Section 5.1.1 of WS-ReliableMessaging, any
mechanism which allows an attacker to alter the information in a
Sequence Traffic Message or break the linkage between a
wsrm:Sequence header block and its assigned message, represents a
threat to the WS-RM protocol.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R3100" id="R3100">R3100</a></span> When present in an <span class="statement-target">ENVELOPE</span> in a secure Sequence, the
wsrm:Sequence header block MUST be included in a
signature.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3100a">RSP3100a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3100b">RSP3100b</a></span></p>
<div style="display: none;" id="RSP3100a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3100a" id="RSP3100a">RSP3100a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>The signature elt contains a key ref that points to
CreateSequence (the CS defining a Secured RM Sequence), and either
(a) the sig signs directly the Body, or (b) signs another sig
element with same key ref, that itself references the Body.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>In an Envelope that belong to a secured RM seq. (has a related
qualifying CS that contains UsesSequenceSTR)</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>(negative case) there is a sig element that signs the seq
Header that does not also reference the Body OR there is no element
that signs the body</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=fail, false=undetermined</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3100a" id="RSP3100a">RSP3100a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security
and *:Header/wsrm:Sequence and
not(*:Header/wsse:Security//xenc:ReferenceList)][ some $tgt in .
satisfies some $csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[$tgt/*:Header/wsrm:Sequence/wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies (fn:substring-after($ref/@URI, '#') =
$target/*:Header/wsrm:Sequence/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/*:Header/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>In an Envelope that belong to a secured RM sequence the
wsrm:Sequence element is not signed. (Case with wsrm:CSR
non-encrypted)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3100a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3100a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3100b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3100b" id="RSP3100b">RSP3100b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>The signature elt contains a key ref that points to
CreateSequence (the CS defining a Secured RM Sequence), and either
(a) the sig signs directly the Body, or (b) signs another sig
element with same key ref, that itself references the Body.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Partial</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>In an Envelope that belong to a secured RM seq. (has a related
qualifying CS that contains UsesSequenceSTR)</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>(negative case) there is a sig element that signs the seq
Header that does not also reference the Body OR there is no element
that signs the body</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=fail, false=undetermined</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3100b" id="RSP3100b">RSP3100b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsrm:Sequence
and not(*:Header/wsse:Security//xenc:ReferenceList)] [ some $tgt in
. satisfies (some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or *:Header//xenc:ReferenceList))]
satisfies ($cs/*:Header/wsa:To = $tgt/*:Header/wsa:To and
not(/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence[not(wsse:SecurityTokenReference)]
and not(*:Header/wsse:Security//xenc:ReferenceList) ])))]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies (fn:substring-after($ref/@URI, '#') =
$target/*:Header/wsrm:Sequence/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/*:Header/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id)</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>In an Envelope that belong to a secured RM sequence the
wsrm:Sequence element is not signed. (Case with wsrm:CSR
encrypted)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3100b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3100b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3101" id="R3101">R3101</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3100 MUST be coupled cryptographically (e.g. share a common
signature) with the message body.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3101a">RSP3101a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3101b">RSP3101b</a></span></p>
<div style="display: none;" id="RSP3101a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3101a" id="RSP3101a">RSP3101a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3101a" id="RSP3101a">RSP3101a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security
and *:Header/wsrm:Sequence]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP3100a</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) or
( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$target/*:Body/@wsu:Id and (some $ref2 in $ref/../ds:Reference
satisfies ( fn:substring-after($ref2/@URI, '#') =
$target/*:Header/@wsu:Id or fn:substring-after($ref2/@URI, '#') =
$target/*:Header/wsrm:Sequence/@wsu:Id )) ))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:Sequence element is not signed with the same signature
as the Body signature, based on existing @wsu:Id references.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3101a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3101a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3101b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3101b" id="RSP3101b">RSP3101b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=pass, false=fail</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3101b" id="RSP3101b">RSP3101b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security
and *:Header/wsrm:Sequence]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP3100b</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) or
( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$target/*:Body/@wsu:Id and (some $ref2 in $ref/../ds:Reference
satisfies ( fn:substring-after($ref2/@URI, '#') =
$target/*:Header/@wsu:Id or fn:substring-after($ref2/@URI, '#') =
$target/*:Header/wsrm:Sequence/@wsu:Id )) ))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:Sequence element is not signed with the same signature
as the Body signature, based on existing @wsu:Id references.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3101b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3101b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3102" id="R3102">R3102</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3100 MUST be created using the key(s) associated with the security
context that protects the applicable Sequence.<span class="testable-type">NOT_TESTABLE</span></p>
</div>
<div class="refinement">
<h4 id="Signed_Elements">6.2.2 Signed Elements</h4>
<div class="rationale">
<p>As discussed in Section 5.1.1 of WS-ReliableMessaging, any
mechanism which allows an attacker to alter the information in a
Sequence Lifecycle Message, Acknowledgement Messages,
Acknowledgement Request, or Sequence-related fault represents a
threat to the WS-RM protocol.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R3110" id="R3110">R3110</a></span> If a wsrm:CreateSequence,
wsrm:CreateSequenceResponse, wsrm:CloseSequence,
wsrm:CloseSequenceResponse, wsrm:TerminateSequence, or
wsrm:TerminateSequenceResponse element appears in the body of an
<span class="statement-target">ENVELOPE</span> in a secure
Sequence, that body MUST be included in a signature.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3110a">RSP3110a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3110b">RSP3110b</a></span></p>
<div style="display: none;" id="RSP3110a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3110a" id="RSP3110a">RSP3110a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3110a" id="RSP3110a">RSP3110a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CloseSequence
or *:Body/wsrm:TerminateSequence or
*:Body/wsrm:CreateSequenceResponse or
*:Body/wsrm:TerminateSequenceResponse or
*:Body/wsrm:CloseSequenceResponse] [ some $tgt in . satisfies some
$csr in
/wsil:testLog/wsil:messageLog/wsil:message//*:Envelope[*:Body/wsrm:CreateSequenceResponse][$tgt/*:Body//wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsse:Security[
some $ref in .//ds:Signature//ds:Reference satisfies
(fn:substring-after($ref/@URI, '#') = $target/*:Body/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The Body of an RM Sequence LifeCycle message that relates to a
secure RM sequence is not included in a Signature. (Case
non-encrypted CS/CSR)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3110a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3110a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3110b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3110b" id="RSP3110b">RSP3110b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td></td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3110b" id="RSP3110b">RSP3110b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CloseSequence
or *:Body/wsrm:TerminateSequence or
*:Body/wsrm:CreateSequenceResponse or
*:Body/wsrm:TerminateSequenceResponse or
*:Body/wsrm:CloseSequenceResponse] [ some $tgt in . satisfies (some
$cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or *:Header//xenc:ReferenceList))]
satisfies
not(/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence[not(wsse:SecurityTokenReference)]
and not(*:Header/wsse:Security//xenc:ReferenceList) ]))]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsse:Security[
some $ref in .//ds:Signature//ds:Reference satisfies
(fn:substring-after($ref/@URI, '#') = $target/*:Body/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The Body of an RM Sequence LifeCycle message that relates to a
secure RM sequence is not included in a Signature. (Case encrypted
CS/CSR)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3110b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3110b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3111" id="R3111">R3111</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3110 MUST be created using the key(s) associated with the security
context, that protects the applicable Sequence.<span class="testable-type">NOT_TESTABLE</span></p>
<p class="statement"><span class="statement-id"><a name="R3114" id="R3114">R3114</a></span> If a wsrm:AckRequested, or
wsrm:SequenceAcknowledgement element appears in the header of an
<span class="statement-target">ENVELOPE</span> and that element
refers to a secure Sequence, that element MUST be included in a
signature.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3114a">RSP3114a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3114b">RSP3114b</a></span></p>
<div style="display: none;" id="RSP3114a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3114a" id="RSP3114a">RSP3114a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3114a" id="RSP3114a">RSP3114a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[(*:Header/wsrm:AckRequested
or *:Header/wsrm:SequenceAcknowledgement) and
not(*:Header/wsse:Security//xenc:ReferenceList)][ some $tgt in .
satisfies some $csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequenceResponse][$tgt/*:Header//wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP3110a</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
(not($target/*:Header/wsrm:AckRequested) or (some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') =
$target/*:Header/wsrm:AckRequested/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/*:Header/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )) and
(not($target/*:Header/wsrm:SequenceAcknowledgement) or (some $ref
in $target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') =
$target/*:Header/wsrm:SequenceAcknowledgement/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/*:Header/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:AckRequested header that relates to a secure RM
sequence is not included in a Signature. (Case with wsrm:CSR
non-encrypted)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3114a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3114a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3114b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3114b" id="RSP3114b">RSP3114b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td></td>
</tr>
<tr>
<td>Test Target:</td>
<td></td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3114b" id="RSP3114b">RSP3114b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[(*:Header/wsrm:AckRequested
or *:Header/wsrm:SequenceAcknowledgement) and
not(*:Header/wsse:Security//xenc:ReferenceList) ] [ some $tgt in .
satisfies (some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or *:Header//xenc:ReferenceList))]
satisfies (($cs/*:Header/wsa:To = $tgt/*:Header/wsa:To or
not($tgt/*:Header/wsrm:AckRequested)) and
not(/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence[not(wsse:SecurityTokenReference)]
and not(*:Header/wsse:Security//xenc:ReferenceList) ])))]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP3110b</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsse:Security[
some $ref in .//ds:Signature//ds:Reference satisfies
((fn:substring-after($ref/@URI, '#') =
$target/*:Header/wsrm:AckRequested/@wsu:Id or
not($target/*:Header/wsrm:AckRequested )) and
(fn:substring-after($ref/@URI, '#') =
$target/*:Header/wsrm:SequenceAcknowledgement/@wsu:Id or
not($target/*:Header/wsrm:SequenceAcknowledgement ))) or
fn:substring-after($ref/@URI, '#') = $target/*:Header/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:AckRequested header or wsrm:SequenceAcknowledgement
element that relates to a secure RM sequence is not included in a
Signature (Case with wsrm:CSR encrypted).</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3114b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3114b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3115" id="R3115">R3115</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3114 MUST be created using the key(s) associated with the security
context that protects the applicable Sequence.<span class="testable-type">NOT_TESTABLE</span></p>
<p class="statement"><span class="statement-id"><a name="R3117" id="R3117">R3117</a></span> When using SOAP 1.2, if a soap12:Fault
element appears as the body of an <span class="statement-target">ENVELOPE</span> and the fault relates to a known
secure Sequence, the soap12:Body MUST be included in a
signature.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3117a">RSP3117a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3117b">RSP3117b</a></span></p>
<div style="display: none;" id="RSP3117a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3117a" id="RSP3117a">RSP3117a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap12 Fault. a SOAP12 fault that has in its
detail element wsrm identifier that refers to a known Secured
Seq</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>like R3110</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3117a" id="RSP3117a">RSP3117a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap12:Envelope[soap12:Body/soap12:Fault][
some $tgt in . satisfies some $csr in
/wsil:testLog/wsil:messageLog/wsil:message//*:Envelope[*:Body/wsrm:CreateSequenceResponse][$tgt/*:Body/soap12:Fault/soap12:Detail//wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsse:Security[
some $ref in .//ds:Signature//ds:Reference satisfies
(fn:substring-after($ref/@URI, '#') = $target/soap12:Body/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The soap12:Fault element that relates to a secure RM sequence,
is not included in a Signature. (Case non-encrypted CS/CSR)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3117a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3117a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3117b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3117b" id="RSP3117b">RSP3117b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap12 Fault. a SOAP12 fault that has in its
detail element wsrm identifier that refers to a known Secured
Seq</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>like R3110</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3117b" id="RSP3117b">RSP3117b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap12:Envelope[soap12:Body/soap12:Fault/soap12:Detail//wsrm:Identifier][
some $tgt in . satisfies (some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap12:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or *:Header//xenc:ReferenceList))]
satisfies
not(/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequence[not(wsse:SecurityTokenReference)]
and not(*:Header/wsse:Security//xenc:ReferenceList) ]))]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">$target/*:Header/wsse:Security[
some $ref in .//ds:Signature//ds:Reference satisfies
(fn:substring-after($ref/@URI, '#') = $target/soap12:Body/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The soap12:Fault element that relates to a secure RM sequence,
is not included in a Signature. (Case encrypted CS/CSR)</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3117b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3117b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3118" id="R3118">R3118</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3117 MUST be created using the key(s) associated with the security
context that protects the applicable Sequence.<span class="testable-type">NOT_TESTABLE</span></p>
</div>
<div class="refinement">
<h4 id="Single_Signature_for_SOAP_1.1_Fault_and_SequenceFault_Header">
6.2.3 Single Signature for SOAP 1.1 Fault and SequenceFault
Header</h4>
<div class="rationale">
<p>As described in Section 4.1 of WS-ReliableMessaging, the
wsrm:SequenceFault element is used to carry the specific details
any SOAP 1.1 faults generated during the WS-RM-specific processing
of a message. As with SOAP 1.2, the integrity of fault information
needs to be protected. In addition to this, it is necessary to
ensure that the linkage between a wsrm:SequenceFault header and the
soap11:Fault body is preserved.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R3120" id="R3120">R3120</a></span> When using SOAP 1.1, if a
wsrm:SequenceFault appears in the header of an <span class="statement-target">ENVELOPE</span> and the fault relates to a known
secure Sequence, the wsrm:SequenceFault header MUST be included in
a signature.<span class="testable-type">TESTABLE</span>
<span class="testref-type"><a onclick="javascript:toggle(this)"href="#RSP3120a">RSP3120a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3120b">RSP3120b</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3120c">RSP3120c</a></span></p>
<div style="display: none;" id="RSP3120a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3120a" id="RSP3120a">RSP3120a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>like R3100</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3120a" id="RSP3120a">RSP3120a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[soap11:Header/wsrm:SequenceFault][
some $tgt in . satisfies some $fms in
preceding::soap11:Envelope[./../../@conversation =
$tgt/../../@conversation or
$tgt/soap11:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = ./soap11:Header/wsa:MessageID] satisfies
some $csr in
$fms/preceding::*:Envelope[*:Body/wsrm:CreateSequenceResponse][$fms/soap11:Header/wsrm:Sequence/wsrm:Identifier
= *:Body/wsrm:CreateSequenceResponse/wsrm:Identifier] satisfies
some $cs in
$csr/preceding::*:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference]
satisfies ($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/soap11:Header/wsse:Security[ some $ref in
.//ds:Signature//ds:Reference satisfies (
fn:substring-after($ref/@URI, '#') =
$target/soap11:Header/wsrm:SequenceFault/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/soap11:Header/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:SequenceFault element of a SOAP 1.1 envelope is not
signed while referring to a secure RM sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3120a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3120a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3120b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3120b" id="RSP3120b">RSP3120b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>like R3100</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3120b" id="RSP3120b">RSP3120b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[soap11:Header/wsrm:SequenceFault
and not(soap11:Header/wsse:Security//xenc:ReferenceList)][ some
$tgt in . satisfies some $fms in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[./../../@conversation
= $tgt/../../@conversation or
$tgt/soap11:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = ./soap11:Header/wsa:MessageID] satisfies
some $cs in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or *:Header//xenc:ReferenceList))]
satisfies
not(/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[*:Body/wsrm:CreateSequence[not(wsse:SecurityTokenReference)]
and not(*:Header/wsse:Security//xenc:ReferenceList) ]) ]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/soap11:Header/wsse:Security[ some $ref in
.//ds:Signature//ds:Reference satisfies (
fn:substring-after($ref/@URI, '#') =
$target/soap11:Header/wsrm:SequenceFault/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/soap11:Header/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:SequenceFault element of a SOAP 1.1 envelope is not
signed while referring to a secure RM sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3120b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3120b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3120c">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3120c" id="RSP3120c">RSP3120c</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>like R3100</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3120c" id="RSP3120c">RSP3120c</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case where CS itself is faulted</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[soap11:Header/wsrm:SequenceFault
and not(soap11:Header/wsse:Security//xenc:ReferenceList)][ some
$tgt in . satisfies some $fms in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or *:Header//xenc:ReferenceList))]
satisfies ($fms/../../@conversation = $tgt/../../@conversation) or
($tgt/soap11:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $fms/soap11:Header/wsa:MessageID)]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/soap11:Header/wsse:Security[ some $ref in
.//ds:Signature//ds:Reference satisfies (
fn:substring-after($ref/@URI, '#') =
$target/soap11:Header/wsrm:SequenceFault/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/soap11:Header/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id )
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsrm:SequenceFault element of a SOAP 1.1 envelope is not
signed while referring to a secure RM sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3120c">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3120c">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3121" id="R3121">R3121</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3120 MUST be coupled cryptographically (e.g. share a common
signature) with the message body.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3121a">RSP3121a</a></span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3121b">RSP3121b</a></span></p>
<div style="display: none;" id="RSP3121a">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3121a" id="RSP3121a">RSP3121a</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault. a SOAP11 fault that has in its
detail element wsrm identifier that refers to a known Secured
Seq</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3121a" id="RSP3121a">RSP3121a</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case non-encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[soap11:Header/wsrm:SequenceFault]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP3120a</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/soap11:Header/wsse:Security[ some $ref in
.//ds:Signature//ds:Reference satisfies ( (
fn:substring-after($ref/@URI, '#') =
$target/soap11:Header/wsrm:SequenceFault/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/soap11:Header/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) and (some
$ref2 in $ref/../ds:Reference satisfies (
fn:substring-after($ref2/@URI, '#') = $target/soap11:Body/@wsu:Id
or fn:substring-after($ref2/@URI, '#') = $target/@wsu:Id )))
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The Body of a SOAP 1.1 message with signed wsrm:SequenceFault
element is not covered by the same signature while referring to a
secure RM sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3121a">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3121a">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<div style="display: none;" id="RSP3121b">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3121b" id="RSP3121b">RSP3121b</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>partial (does not cover UnknownSequence Fault)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Envelope with Soap11 Fault. a SOAP11 fault that has in its
detail element wsrm identifier that refers to a known Secured
Seq</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td></td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td></td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3121b" id="RSP3121b">RSP3121b</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td>Case encrypted CS/CSR</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/soap11:Envelope[soap11:Header/wsrm:SequenceFault]</target>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>RSP3120b</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/soap11:Header/wsse:Security[ some $ref in
.//ds:Signature//ds:Reference satisfies ( (
fn:substring-after($ref/@URI, '#') =
$target/soap11:Header/wsrm:SequenceFault/@wsu:Id or
fn:substring-after($ref/@URI, '#') = $target/soap11:Header/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) and (some
$ref2 in $ref/../ds:Reference satisfies (
fn:substring-after($ref2/@URI, '#') = $target/soap11:Body/@wsu:Id
or fn:substring-after($ref2/@URI, '#') = $target/@wsu:Id )))
]</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The Body of a SOAP 1.1 message with signed wsrm:SequenceFault
element is not covered by the same signature while referring to a
secure RM sequence.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3121b">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3121b">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3122" id="R3122">R3122</a></span> In an <span class="statement-target">ENVELOPE</span>, the signature referred to in
R3120 MUST be created using the key(s) associated with the security
context that protects the applicable Sequence.<span class="testable-type">NOT_TESTABLE</span></p>
</div>
<h3 id="sec_mc">6.3 Secure Use of MakeConnection</h3>
<p>This Profile places additional requirements on the composition
of MakeConnection, WS-SecureConversation, and
WS-ReliableMessaging.</p>
<div class="refinement">
<h4 id="Security_Context_for_MakeConnection">6.3.1 Security Context
for MakeConnection</h4>
<div class="rationale">
<p>From a security standpoint, it will be commonly desired that the
security context of the message sent on the backchannel established
by a MakeConnection and that of the MakeConnection message itself
be the same. However, it is important to keep in mind that the
WS-MakeConnection protocol is independent of the application
protocol(s) flowing over it, thus there will be cases in which the
MC-SENDER has no knowledge of the security context (if any) of the
backchannel messages. For example, the WS-MakeConnection
specification details a scenario in which MakeConnection is used to
deliver Notifications from an Event Source. The Event Source may
have a variety of different security contexts that it uses
depending on the type of Notification being delivered. In this case
the MC-SENDER has no way of knowing which security context, if any,
should to be used. In such situations, the MC-RECEIVER needs to
simply ensure that the MC-SENDER is authenticated. It would still
be the MC-SENDER's responsibility to ensure that any message sent
on the backchannel has the correct security context - just as would
any endpoint receiving a message over a new connection.</p>
</div>
</div>
<div class="refinement">
<h4 id="Signing_the_MessagePending_header">6.3.2 Signing the
MessagePending header</h4>
<div class="rationale">
<p>Since the value of the wsmc:MessagePending header effects the
operation of the MakeConnection protocol, it must be protected to
ensure the proper functioning of that protocol.</p>
</div>
<p class="statement"><span class="statement-id"><a name="R3201" id="R3201">R3201</a></span> If a wsmc:MessagePending element appears
as a header block in an <span class="statement-target">ENVELOPE</span>, that element MUST be signed
using the key(s) associated with a security context, if any, that
protects the SOAP Body of the ENVELOPE.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3201">RSP3201</a></span></p>
<div style="display: none;" id="RSP3201">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3201" id="RSP3201">RSP3201</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td></td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>Env contains MessagePending header AND whose Body is being
signed (relates to Secured RM Seq)</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>(a) is signed, (b) signature covers both the header block and
the Body. The [target]'s security Header that indicates the Body is
signed also includes a reference to the wsu:Id of the
MessagePending Header</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>(default)</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Run some secure request/response tests where there are several
request messages being processed at the same time (ie. they are not
serialized). Also, set the wsa:ReplyTo of the request messages
(from a non-addressable endpoint) to an instance of the MC
Anonymous URI Template.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3201" id="RSP3201">RSP3201</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsse:Security
and *:Header/wsmc:MessagePending and (some $tgt in . satisfies some
$ref in *:Header/wsse:Security//ds:Signature//ds:Reference
satisfies (fn:substring-after($ref/@URI, '#') = $tgt/*:Body/@wsu:Id
or fn:substring-after($ref/@URI, '#') = $tgt/@wsu:Id ))]</target>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies fn:substring-after($ref/@URI, '#') = $target/@wsu:Id ) or
( some $ref in
$target/*:Header/wsse:Security//ds:Signature//ds:Reference
satisfies ( fn:substring-after($ref/@URI, '#') =
$target/*:Body/@wsu:Id and (some $ref2 in $ref/../ds:Reference
satisfies ( fn:substring-after($ref2/@URI, '#') =
$target/*:Header/wsmc:MessagePending/@wsu:Id))) )</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>The wsmc:MessagePending header block is not signed with same
signature as the Soap Body (based on @wsu:Id references).</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3201">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3201">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h3 id="replay">6.4 Replay Detection</h3>
<p>As mentioned in Section 5 of WS-ReliableMessaging, there is a
potential tension between certain aspects of security and reliable
messaging; a security implementation may attempt to detect and
prevent message replay attacks, but one of the invariants of the
WS-RM protocol is to resend messages until they are acknowledged.
Implementations must have the information necessary to distinguish
between a valid retransmission of an unacknowledged message and a
replayed message.</p>
<div class="refinement">
<h4 id="Unique_Timestamp_Values">6.4.1 Unique Timestamp Values</h4>
<p class="statement"><span class="statement-id"><a name="R3300" id="R3300">R3300</a></span> In the absence of WS-SecurityPolicy
assertions that indicate otherwise, an <span class="statement-target">ENVELOPE</span> in a secure Sequence that
contains a wsrm:Sequence header MUST contain a wsu:Timestamp as a
sub-element of the wsse:Security header.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3300">RSP3300</a></span></p>
<div style="display: none;" id="RSP3300">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3300" id="RSP3300">RSP3300</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td></td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good (should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope that belongs to a Secure Sequence, i.e. with a
wsrm:Sequence/wsrm:Identifier element that match the
wsrm:CreateSequenceResponse/wsrm:Identifier that is response of a
wsrm:CreateSequence element extended with a
wsse:SecurityTokenReference element.</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>The SOAP Envelope contains a wsse:Security header that has a
wsu:Timestamp child element.</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>No WS-SecurityPolicy assertions will be deployed or published.
Initiate a Secure Sequence (wsrm:CreateSequence element has been
extended with a wsse:SecurityTokenReference element). Then RMS is
sending messages over this sequence.</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3300" id="RSP3300">RSP3300</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Header/wsrm:Sequence][*:Header/wsse:Security]
[not(*:Header/wsrm:Sequence/wsrm:Identifier =
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope/*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> mycreateseq</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="mycreateseq">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
(*:Body/wsrm:CreateSequence and (: --- case CS/CSR not encrypted
--- :) (some $cs in . satisfies (some $csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequenceResponse]
satisfies ($target/*:Header/wsrm:Sequence/wsrm:Identifier =
$csr/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier and
($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID))))) or (: ---
case CS/CSR encrypted --- :) ( (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or
*:Header/wsse:Security//xenc:ReferenceList)) and (*:Header/wsa:To =
$target/*:Header/wsa:To or $target/../../@type = 'response') )
]</cotarget>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<prerequisite xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$mycreateseq/*:Body/wsrm:CreateSequence/wsse:SecurityTokenReference
or
$mycreateseq/*:Header/wsse:Security//xenc:ReferenceList</prerequisite>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
$target/*:Header/wsse:Security/wsu:Timestamp</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=warning</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>A SOAP Envelope that belongs to a Secure Sequence does not
contain a wsse:Security header that has a wsu:Timestamp child
element.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3300">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3300">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
<p class="statement"><span class="statement-id"><a name="R3301" id="R3301">R3301</a></span> For any two <span class="statement-target">ENVELOPE</span>s in a particular secure Sequence
that contain WS-RM Sequence headers in which the value of their
wsrm:MessageNumber elements are equal, it MUST be true that neither
of the envelopes contains a wsu:Timestamp as a child element of
wsse:Security header, OR that both messages contain a wsu:Timestamp
as child elements of their wsse:Security headers and the value of
these wsu:Timestamp elements are NOT equal.<span class="testable-type">TESTABLE</span> <span class="testref-type"><a onclick="javascript:toggle(this)" href="#RSP3301">RSP3301</a></span></p>
<div style="display: none;" id="RSP3301">
<table width="80%" class="tanalysis" border="1">
<tbody><tr>
<th width="20%">Test Assertion Analysis:</th>
<th align="left"><span class="tanalysis-id"><a name="RSP3301" id="RSP3301">RSP3301</a></span></th>
</tr>
<tr>
<td>General Notes:</td>
<td>This is a more general situation than R3300: a
WS-SecurityPolicy assertions may or may not be deployed, that
controls the presence of wsu:Timestamp. Although the Rxxxx is
considering a pair of Envelopes, the test target (and predicate)
focus on a single one at a time.</td>
</tr>
<tr>
<td>Coverage Assessment:</td>
<td>Good (should be able to cover all cases)</td>
</tr>
<tr>
<td>Target Type:</td>
<td>ENVELOPE</td>
</tr>
<tr>
<td>Test Target:</td>
<td>A SOAP Envelope that belongs to a Secure Sequence, (see the
filter condition in R3300 for this)</td>
</tr>
<tr>
<td>Test co-Target(s):</td>
<td></td>
</tr>
<tr>
<td>Test Prerequisite:</td>
<td></td>
</tr>
<tr>
<td>Predicate:</td>
<td>if the SOAP Envelope contains a wsse:Security/wsu:Timestamp
child element, then any previous RM retry SOAP Envelope (same
wsrm:Sequence/wsrm:Identifier and same
wsrm:Sequence/wsrm:MessageNumber) has a different
wsse:Security/wsu:Timestamp, else any previous RM retry SOAP
Envelope does NOT have wsu:Timestamp under wsse:Security</td>
</tr>
<tr>
<td>Prescription:</td>
<td>mandatory</td>
</tr>
<tr>
<td>Reporting:</td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td>Test Control:</td>
<td>Initiate a Secure Sequence (wsrm:CreateSequence element has
been extended with a wsse:SecurityTokenReference element). Then RMS
is sending messages over this sequence. Manage to cause message
resending (block Acks, or set the retry period shorter than the Ack
period.)</td>
</tr>
</tbody></table>
<table width="80%" class="assertion" border="1">
<tbody><tr>
<th width="20%">Test Assertion:</th>
<th align="left"><span class="assertion-id"><a name="RSP3301" id="RSP3301">RSP3301</a></span></th>
</tr>
<tr>
<td><b>Description:</b></td>
<td></td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<target xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
*:Header/wsrm:Sequence =
preceding::*:Envelope/*:Header/wsrm:Sequence]
[*:Header/wsse:Security]
[not(*:Header/wsrm:Sequence/wsrm:Identifier =
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope/*:Body/wsrm:CreateSequence/wsrm:Offer/wsrm:Identifier)]</target>
</td>
</tr>
<tr>
<td><b>co-Target:</b> mycreateseq</td>
<td>
<cotarget xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="mycreateseq">
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[
(*:Body/wsrm:CreateSequence and (: --- case CS/CSR not encrypted
--- :) (some $cs in . satisfies (some $csr in
/wsil:testLog/wsil:messageLog/wsil:message/wsil:messageContents/*:Envelope[*:Body/wsrm:CreateSequenceResponse]
satisfies ($target/*:Header/wsrm:Sequence/wsrm:Identifier =
$csr/*:Body/wsrm:CreateSequenceResponse/wsrm:Identifier and
($csr/../../@conversation = $cs/../../@conversation or
$csr/*:Header/wsa:RelatesTo[@RelationshipType =
'http://www.w3.org/2005/08/addressing/reply' or not
(@RelationshipType)] = $cs/*:Header/wsa:MessageID))))) or (: ---
case CS/CSR encrypted --- :) ( (*:Header/wsa:Action =
'http://docs.oasis-open.org/ws-rx/wsrm/200702/CreateSequence' and
(*:Body//*:EncryptedData or
*:Header/wsse:Security//xenc:ReferenceList)) and (*:Header/wsa:To =
$target/*:Header/wsa:To or $target/../../@type = 'response') )
]</cotarget>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<predicate xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">(not
($target/*:Header/wsse:Security/wsu:Timestamp) and not
(preceding::*:Envelope[*:Header/wsrm:Sequence =
$target/*:Header/wsrm:Sequence][*:Header/wsse:Security/wsu:Timestamp]))
or ($target/*:Header/wsse:Security/wsu:Timestamp and not
(preceding::*:Envelope[*:Header/wsrm:Sequence =
$target/*:Header/wsrm:Sequence]/*:Header/wsse:Security/wsu:Timestamp
= $target/*:Header/wsse:Security/wsu:Timestamp ))</predicate>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>true=passed, false=failed</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>mandatory</td>
</tr>
<tr>
<td><b>Error Message:</b></td>
<td>Either a SOAP Envelope that belongs to a Secure RM Sequence
contains a wsse:Security/wsu:Timestamp child element, but a
previous RM retry SOAP Envelope (same wsrm:Sequence/wsrm:Identifier
and same wsrm:Sequence/wsrm:MessageNumber) has a same
wsse:Security/wsu:Timestamp value, or the SOAP Envelope does not
contain a wsse:Security/wsu:Timestamp and yet some previous RM
retry SOAP Envelope does contain a wsu:Timestamp.</td>
</tr>
<tr>
<td><b>Diagnostic Data:</b></td>
<td>
<diagnostic xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema"></diagnostic>
</td>
</tr>
</tbody></table>
<span class="glossaryref-type"><a onclick="javascript:toggle(this)"href="#glossaryRSP3301">HELP - GLOSSARY</a></span></div>
<div style="display: none;" id="glossaryRSP3301">
<table width="80%" class="taglossary" border="1">
<tbody><tr>
<th width="20%">Test Assertion Part</th>
<th align="left"><span class="taglossary-id"><a name="glossary" id="glossary">What it means:</a></span></th>
</tr>
<tr>
<td><b>Test Assertion ID:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="TA_Id">
<p><i>[<b>markup: testAssertion/@id</b>]</i> (required)</p>
A unique ID for the current test assertion.</item>
</td>
</tr>
<tr>
<td><b>Description:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="description">
<p><i>[<b>markup: testAssertion/description</b> ]</i>
(optional)</p>
<p>A plain text description of the current test assertion. At
minimum expressing the TA predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Comments:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="comments">
<p><i>[<b>markup: testAssertion/comments</b> ]</i> (optional)</p>
A plain text comment about the TA script and how well it covers the
profile requirement. Explanation material for users, and developers
(what could be improved, etc.).</item>
</td>
</tr>
<tr>
<td><b>Target:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="target">
<p><i>[<b>markup: testAssertion/target</b> ]</i> (required)</p>
The artifacts to be tested, defined by an XPath expression that
returns a list of XML nodes from the log file in input. For every
artifact (node) selected by the Target expression, there will be a
report entry for this TA in the test report, with a result of
either:
<ul>
<li>passed</li>
<li>failed</li>
<li>warning</li>
<li>notApplicable</li>
<li>notRelevant</li>
<li>missingInput</li>
<li>undetermined</li>
</ul>
<p>See the "reporting" item for the meaning of these results.</p>
</item>
</td>
</tr>
<tr>
<td><b>Cotarget:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="cotarget">
<p><i>[<b>markup: testAssertion/cotarget</b> ]</i> (optional)</p>
<p>Artifact that is related to the target, and that needs be
accessed for the testing. Identified by an XPath expression that
may refer to the related target node using the variable
'$target'.</p>
<p>For example, the target can be a SOAP message and the cotarget
the WSDL file that describes this SOAP message.</p>
<p>A cotarget must have a @name attribute that identifies it. The
value of this attribute can be used as a variable (when prepending
'$' to it) by subsequently defined cotargets, prerequisite and
predicate.</p>
</item>
</td>
</tr>
<tr>
<td><b>Prerequisite:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prerequisite">
<p><i>[<b>markup: testAssertion/@preReq</b> ]</i> (optional)</p>
<p><i>[<b>markup: testAssertion/prerequisite</b> ]</i>
(optional)</p>
<p>The pre-condition for evaluating this Test Assertion on this
target. If the prerequisite evaluates to "false" then the target
does not qualify for this Test Assertion (the test report is
"notRelevant")</p>
<p>The first part (preReq attribute) is an enumeration of Test
Assertion IDs. Each one of the prerequisite TAs must either use the
same target (e.g. SOAP Envelope, or WSDL binding, etc.) as this TA,
or a target that is of a more general type than the main TA target.
The target must "pass" each one of these prerequisite TAs in order
to qualify for this TA.</p>
<p>(e.g. the target of TA t1 can be a WSDL binding while the target
of a TA t2 prerequisite of t1, can be the entire WSDL file).</p>
<p>The second part ("prerequisite" element) is an XPath (boolean)
expression of the same nature as the predicate. If present, it must
evaluate to "true" for the target to qualify. If it fails, the
result for the current TA in the report will be "notRelevant".
Otherwise, the target can be further evaluated by the predicate of
the main TA. The expression may refer to the target explicitly
using the variable name "$target", or to any cotarget using its
name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Predicate:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="predicate">
<p><i>[<b>markup: testAssertion/predicate</b>]</i> required
element]</p>
<p>A logical expression that evaluates whether this target is
fulfilling the profile requirement addressed by this test
Assertion. By default:</p>
- A result of <b>true</b> means the requirement is fulfilled
(reported as a "passed" in the test report).<br />
- A result of <b>false</b> means the requirement is violated
(reported as a "failed" in the test report).<br />
<p>However, in some cases and for testability reasons, the
predicate may be designed as a partial indicator e.g. only
indicates some cases of fulfillment, or some cases of violation. As
a result, when "true" indicates fulfillment it may be that "false"
is unconclusive, or conversely "false" will indicate violation, but
"true" is unconclusive. In such cases, the "Reporting" element
specifies the meaning of the predicate result w/r to the profile
requirement.</p>
<p>The predicate expression implicitly refers to the target (whic
is its "XPath context") although it may explicitly refer to it
using the variable name "$target". It may refer to any cotarget
using its name as variable name ($[name]).</p>
</item>
</td>
</tr>
<tr>
<td><b>Prescription:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="prescription">
<p><i>[<b>markup: testAssertion/prescription/@level</b> ]</i>
(required)</p>
Conveys the level of prescription associated with the profile
requirement. At least three values may be used:
<ul>
<li><b>mandatory</b>: maps to RFC2119 keywords MUST, MUST NOT,
SHALL, SHALL NOT, REQUIRED (and sometimes MAY NOT)</li>
<li><b>preferred</b>: maps to RFC2119 keywords SHOULD, SHOULD NOT,
RECOMMENDED, NOT RECOMMENDED</li>
<li><b>permitted</b>: maps to RFC2119 keywords MAY, OPTIONAL.</li>
</ul>
</item>
</td>
</tr>
<tr>
<td><b>Reporting:</b></td>
<td>
<item xmlns="http://www.ws-i.org/2002/08/12/ProfileDoc-2.0.xsd" xmlns:h="http://www.ws-i.org/2002/08/12/ProfileMarkup-2.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="reporting">
<p><i>[<b>markup: testAssertion/reporting</b> ]</i> (optional)</p>
<p>For each possible outcome of the predicate (true or false),
specifies how it must be interpreted w/r to the profile feature.
Two attributes are used that both must be present, when this
element is present:</p>
<ul>
<li><b>@true attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'passed')</li>
<li><b>@false attribute</b>: may take values among {passed, failed,
warning, undetermined} (default is 'failed')</li>
</ul>
The reported outcomes have the following meaning:<br />
<ul>
<li><b>passed</b>: the target passes the test and can be considered
as fulfilling the profile feature.</li>
<li><b>failed</b>: the target fails the test and can be considered
as violating (or not exhibiting) the profile feature.</li>
<li><b>warning</b>: the test result is inconclusive. There is a
possibility of profile requirement violation, that deserved further
investigation.</li>
<li><b>undetermined</b>: the test result is inconclusive for this
predicate value.</li>
</ul>
<p>NOTES: the predicate of the TA may be worded in a negative way
so that @false='passed' although that is not recommended. The
result of a test should not be related to the prescription level,
e.g. a "preferred" or "permitted" level should not imply that
@false='warning'.</p>
<p>Other test results that are automatically generated and not
controlled by the "reporting" element are:</p>
<ul>
<li><b>notRelevant</b>: the target failed the prerequisite
condition and therefore does not qualify for further testing (i.e.
the predicate expression is NOT evaluated on it).</li>
<li><b>missingInput</b>: a cotarget expression returned an empty
node set.</li>
<li><b>notApplicable</b>: this target was not even selected by the
target XPath expression, while being of the same general artifact
type (e.g. message type).</li>
</ul>
</item>
</td>
</tr>
</tbody></table>
</div>
</div>
<h2 id="references">Appendix A: Referenced Specifications</h2>
<p>The following specifications' requirements are incorporated into
the Profile by reference, except where superseded by the
Profile:</p>
<ul>
<li><a href="http://docs.oasis-open.org/ws-rx/wsrm/200702/wsrm-1.2-spec-os.html" class="offsite">Web Services Reliable Messaging 1.2</a></li>
<li><a href="http://www.ietf.org/rfc/rfc3987.txt" class="offsite">Internationalized Resource Identifiers (IRIs)</a></li>
<li><a href="http://www.w3.org/TR/2006/REC-ws-addr-soap-20060509" class="offsite">Web Services Addressing 1.0 - SOAP Binding</a></li>
<li><a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html" class="offsite">WS-SecureConversation 1.4</a></li>
<li><a href="http://docs.oasis-open.org/ws-rx/wsmc/200702/wsmc-1.1-spec-os.html" class="offsite">Web Services Make Connection 1.1</a></li>
<li><a href="http://www.w3.org/TR/soap12-part2/#singlereqrespmep" class="offsite">SOAP Version 1.2 Part 2: Adjunct (Second Edition),
Section 6.2 SOAP Request-Response Message Exchange Pattern</a></li>
<li><a href="http://www.w3.org/TR/wsdl#_porttypes" class="offsite">Web Services Description Language (WSDL) 1.1, Section 2.4
Port Types</a></li>
<li><a href="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.3/os/ws-securitypolicy-1.3-spec-os.html" class="offsite">WS-SecurityPolicy 1.3</a></li>
</ul>
<h2 id="points">Appendix B: Extensibility Points</h2>
<p>This section identifies extensibility points, as defined in
"Scope of the Profile," for the Profile's component
specifications.</p>
<p>These mechanisms are out of the scope of the Profile and Profile
conformance. An initial, non-exhaustive list of these extensibility
points is provided here as their use may affect interoperability.
In order to avoid interoperability issues not addressed by the
Profile, out-of-band agreement on the use of these extensibility
points may be necessary between the parties to a Web service.</p>
<p>In <a href="http://docs.oasis-open.org/ws-rx/wsrm/200702/wsrm-1.2-spec-os.html" class="offsite">Web Services Reliable Messaging 1.2:</a></p>
<ul>
<li><span class="statement-id">E0001</span> -
<strong>CreateSequence element and attribute extensions</strong> -
Extending CreateSequence, via additional elements or attributes, is
the primary mechanism for negotiating supplemental semantics to be
applied to the requested and/or offered Sequence. Note this
extensiblity point does not cover the pre-defined use of the
/wsrm:CreateSequence/wsse:SecurityTokenReference element.</li>
<li><span class="statement-id">E0002</span> -
<strong>CreateSequenceResponse element and attribute
extensions</strong> - Extending CreateSequenceResponse, via
additional elements or attributes, may be used to signal the
acceptance of the supplemental semantics requested by the use of
E0001 or it may be used in its own right to request or signal
additional semantics to be applied to either requested and/or
offered Sequence.</li>
<li><span class="statement-id">E0003</span> - <strong>CloseSequence
element and attribute extensions</strong> - The CloseSequence
element may be extended via additional elements or attributes to
indicate the use of supplemental semantics or options in the
closure of the Sequence.</li>
<li><span class="statement-id">E0004</span> -
<strong>CloseSequenceResponse element and attribute
extensions</strong> - The CloseSequenceResponse element may be
extended via additional elements or attributes to indicate the use
of supplemental semantics or options in the closure of the
Sequence.</li>
<li><span class="statement-id">E0005</span> -
<strong>TerminateSequence element and attribute extensions</strong>
- The TerminateSequence element may be extended via additional
elements or attributes to indicate the use of supplemental
semantics or options in the termination of the Sequence.</li>
<li><span class="statement-id">E0006</span> -
<strong>TerminateSequenceResponse element and attribute
extensions</strong> - The TerminateSequenceResponse element may be
extended via additional elements or attributes to indicate the use
of supplemental semantics or options in the termination of the
Sequence.</li>
<li><span class="statement-id">E0007</span> - <strong>Sequence
element and attribute extensions</strong> - The Sequence header
element may be extended via additional elements or attributes to
convey supplemental semantics or options that apply to the Sequence
identified by the header.</li>
<li><span class="statement-id">E0008</span> - <strong>AckRequested
element and attribute extensions</strong> - The AckRequest header
element may be extended via additional elements or attributes to
convey supplemental semantics or options that apply to the
request.</li>
<li><span class="statement-id">E0009</span> -
<strong>SequenceAcknowledgment element and attribute
extensions</strong> - The SequenceAcknowledgment header element may
be extended via additional elements or attributes to convey
supplemental semantics or options that apply to the
acknowledgment.</li>
<li><span class="statement-id">E0010</span> - <strong>SequenceFault
element and attribute extensions</strong> - The SequenceFault
element may be extended via additional elements or attributes to
convey supplemental semantics or options that apply to the
fault.</li>
</ul>
<p>In <a href="http://docs.oasis-open.org/ws-sx/ws-secureconversation/v1.4/os/ws-secureconversation-1.4-spec-os.html" class="offsite">WS-SecureConversation 1.4:</a></p>
<ul>
<li><span class="statement-id">E0011</span> -
<strong>SecurityContextToken element and attribute
extensions</strong> - The SecurityContextToken element may be
extended via additional elements or attributes to indicate the use
of supplemental semantics or options that apply to the security
context identified by the token.</li>
</ul>
<p>In <a href="http://docs.oasis-open.org/ws-rx/wsmc/200702/wsmc-1.1-spec-os.html" class="offsite">Web Services Make Connection 1.1:</a></p>
<ul>
<li><span class="statement-id">E0012</span> -
<strong>MakeConnection element and attribute extensions</strong> -
The MakeConnection element may be extended via additional elements
or attributes to indicate the use of supplemental semantics or
options that apply to the request.</li>
<li><span class="statement-id">E0013</span> - <strong>Attribute
extensions to the MakeConnection Address</strong> - The
/wsmc:MakeConnection/wsmc:Address element may be extended via
additional attributes to indicate the use of supplemental semantics
or options that apply to this instance of the MakeConnection
Anonymous URI</li>
<li><span class="statement-id">E0014</span> -
<strong>MessagePending element and attribute extensions</strong> -
The MessagePending header element may be extended via additional
elements or attributes to convey supplemental semantics or options
that apply to the indication of pending messages.</li>
</ul>
<h2 id="normative_references">Appendix C: Normative References</h2>
<p>In addition to all of the profiled specifications listed in
Appendix A, the following specifications are normatively
referenced:</p>
<p>RFC2119 <a href="http://ietf.org/rfc/rfc2119">http://ietf.org/rfc/rfc2119</a> Key
words for use in RFCs to Indicate Requirement Levels, S. Bradner
March 1997</p>
<p>Namespaces in XML 1.0 (Second Edition) <a href="http://www.w3.org/TR/REC-xml-names/">http://www.w3.org/TR/REC-xml-names/</a>
T. Bray et al August 2006</p>
<p>WS-I Conformance Claim Attachment Mechanisms Version 1.0
<a href="http://www.ws-i.org/Profiles/ConformanceClaims-1.0-2004-11-15.html">
http://www.ws-i.org/Profiles/ConformanceClaims-1.0-2004-11-15.html</a>,
M. Nottingham et al November 2004</p>
<p>WS-I Basic Profile 1.2 <a href="http://www.ws-i.org/Profiles/BasicProfile-1.2.html">http://www.ws-i.org/Profiles/BasicProfile-1.2.html</a>
, G. Pilz et al September 2010</p>
<p>WS-I Basic Profile 2.0 <a href="http://www.ws-i.org/Profiles/BasicProfile-2.0.html">http://www.ws-i.org/Profiles/BasicProfile-2.0.html</a>
, G. Pilz et al September 2010</p>
<p>WS-I Basic Security Profile 1.0 <a href="http://www.ws-i.org/Profiles/BasicSecurityProfile-1.0-2007-03-30.html">
http://www.ws-i.org/Profiles/BasicSecurityProfile-1.0-2007-03-30.html</a>
, M. McIntosh et al March 2007</p>
<p>WS-I Basic Security Profile 1.1 <a href="http://www.ws-i.org/Profiles/BasicSecurityProfile-1.1.html">http://www.ws-i.org/Profiles/BasicSecurityProfile-1.1.html</a>
, M. McIntosh et al January 2010</p>
<h2 id="acks">Appendix D: Acknowledgements</h2>
<p>This document is the work of the WS-I Reliable Secure Profile
Working Group.</p>
<h2 id="schm">Appendix E: Schemas</h2>
<div class="refinement">
<div class="explanation">
<p>A normative copy of the XML Schema description for this
specification can be retrieved from the following address: <a href="http://ws-i.org/profiles/rsp/1.0/rsp.xsd" class="offsite">http://ws-i.org/profiles/rsp/1.0/rsp.xsd</a> . A
non-normative copy of the XML schema is listed below for
convenience:</p>
</div>
<p class="example-banner">For example,</p>
<div class="example">
<p class="correct">CORRECT:</p>
<pre>&lt;xs:schema targetNamespace='http://ws-i.org/profiles/rsp/1.0/'
           xmlns:xs='http://www.w3.org/2001/XMLSchema'
           elementFormDefault='qualified'
           blockDefault='#all'&gt;
  &lt;xs:element name='Conformant'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:any namespace='##other' processContents='lax' minOccurs='0' maxOccurs='unbounded'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:anyAttribute namespace='##other' processContents='lax' /&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;
&lt;/xs:schema&gt;

</pre></div>
</div>
</body>
</html>
